/*! URI.js v1.12.0 http://medialize.github.com/URI.js/ */
!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.IPv6=e(t)}(this,function(t){var e=t&&t.IPv6;return{best:function(t){var e,r=(t=t.toLowerCase().split(":")).length,n=8;for(""===t[0]&&""===t[1]&&""===t[2]?(t.shift(),t.shift()):""===t[0]&&""===t[1]?t.shift():""===t[r-1]&&""===t[r-2]&&t.pop(),-1!==t[(r=t.length)-1].indexOf(".")&&(n=7),e=0;e<r&&""!==t[e];e++);if(e<n)for(t.splice(e,1,"0000");t.length<n;)t.splice(e,0,"0000");for(e=0;e<n;e++){r=t[e].split("");for(var o=0;3>o&&("0"===r[0]&&1<r.length);o++)r.splice(0,1);t[e]=r.join("")}r=-1;var i=o=0,s=-1,a=!1;for(e=0;e<n;e++)a?"0"===t[e]?i+=1:(a=!1,i>o&&(r=s,o=i)):"0"==t[e]&&(a=!0,s=e,i=1);for(i>o&&(r=s,o=i),1<o&&t.splice(r,o,""),r=t.length,n="",""===t[0]&&(beststr=":"),e=0;e<r&&(n+=t[e],e!==r-1);e++)n+=":";return""===t[r-1]&&(n+=":"),n},noConflict:function(){return t.IPv6===this&&(t.IPv6=e),this}}}),function(t){function e(t){throw RangeError(T[t])}function r(t,e){for(var r=t.length;r--;)t[r]=e(t[r]);return t}function n(t,e){return r(t.split(x),e).join(".")}function o(t){for(var e,r,n=[],o=0,i=t.length;o<i;)55296<=(e=t.charCodeAt(o++))&&56319>=e&&o<i?56320==(64512&(r=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function i(t){return r(t,function(t){var e="";return 65535<t&&(e+=I((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+I(t)}).join("")}function s(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function a(t,e,r){var n=0;for(t=r?P(t/w):t>>1,t+=P(t/e);t>E*y>>1;n+=m)t=P(t/E);return P(n+(E+1)*t/(t+v))}function u(t){var r,n,o,s,u,c,h=[],l=t.length,p=0,f=k,d=b;for(0>(n=t.lastIndexOf(O))&&(n=0),o=0;o<n;++o)128<=t.charCodeAt(o)&&e("not-basic"),h.push(t.charCodeAt(o));for(n=0<n?n+1:0;n<l;){for(o=p,r=1,s=m;n>=l&&e("invalid-input"),((u=10>(u=t.charCodeAt(n++))-48?u-22:26>u-65?u-65:26>u-97?u-97:m)>=m||u>P((_-p)/r))&&e("overflow"),p+=u*r,!(u<(c=s<=d?g:s>=d+y?y:s-d));s+=m)r>P(_/(u=m-c))&&e("overflow"),r*=u;d=a(p-o,r=h.length+1,0==o),P(p/r)>_-f&&e("overflow"),f+=P(p/r),p%=r,h.splice(p++,0,f)}return i(h)}function c(t){var r,n,i,u,c,h,l,p,f,d,v,w,A=[];for(d=(t=o(t)).length,r=k,n=0,c=b,h=0;h<d;++h)128>(f=t[h])&&A.push(I(f));for((i=u=A.length)&&A.push(O);i<d;){for(l=_,h=0;h<d;++h)(f=t[h])>=r&&f<l&&(l=f);for(l-r>P((_-n)/(v=i+1))&&e("overflow"),n+=(l-r)*v,r=l,h=0;h<d;++h)if((f=t[h])<r&&++n>_&&e("overflow"),f==r){for(p=n,l=m;!(p<(f=l<=c?g:l>=c+y?y:l-c));l+=m)w=p-f,p=m-f,A.push(I(s(f+w%p,0))),p=P(w/p);A.push(I(s(p,0))),c=a(n,v,i==u),n=0,++i}++n,++r}return A.join("")}var h="object"==typeof exports&&exports,l="object"==typeof module&&module&&module.exports==h&&module,p="object"==typeof global&&global;p.global!==p&&p.window!==p||(t=p);var f,d,_=2147483647,m=36,g=1,y=26,v=38,w=700,b=72,k=128,O="-",A=/^xn--/,S=/[^ -~]/,x=/\x2E|\u3002|\uFF0E|\uFF61/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=m-g,P=Math.floor,I=String.fromCharCode;if(f={version:"1.2.3",ucs2:{decode:o,encode:i},decode:u,encode:c,toASCII:function(t){return n(t,function(t){return S.test(t)?"xn--"+c(t):t})},toUnicode:function(t){return n(t,function(t){return A.test(t)?u(t.slice(4).toLowerCase()):t})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return f});else if(h&&!h.nodeType)if(l)l.exports=f;else for(d in f)f.hasOwnProperty(d)&&(h[d]=f[d]);else t.punycode=f}(this),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.SecondLevelDomains=e(t)}(this,function(t){var e=t&&t.SecondLevelDomains,r=Object.prototype.hasOwnProperty,n={list:{ac:"com|gov|mil|net|org",ae:"ac|co|gov|mil|name|net|org|pro|sch",af:"com|edu|gov|net|org",al:"com|edu|gov|mil|net|org",ao:"co|ed|gv|it|og|pb",ar:"com|edu|gob|gov|int|mil|net|org|tur",at:"ac|co|gv|or",au:"asn|com|csiro|edu|gov|id|net|org",ba:"co|com|edu|gov|mil|net|org|rs|unbi|unmo|unsa|untz|unze",bb:"biz|co|com|edu|gov|info|net|org|store|tv",bh:"biz|cc|com|edu|gov|info|net|org",bn:"com|edu|gov|net|org",bo:"com|edu|gob|gov|int|mil|net|org|tv",br:"adm|adv|agr|am|arq|art|ato|b|bio|blog|bmd|cim|cng|cnt|com|coop|ecn|edu|eng|esp|etc|eti|far|flog|fm|fnd|fot|fst|g12|ggf|gov|imb|ind|inf|jor|jus|lel|mat|med|mil|mus|net|nom|not|ntr|odo|org|ppg|pro|psc|psi|qsl|rec|slg|srv|tmp|trd|tur|tv|vet|vlog|wiki|zlg",bs:"com|edu|gov|net|org",bz:"du|et|om|ov|rg",ca:"ab|bc|mb|nb|nf|nl|ns|nt|nu|on|pe|qc|sk|yk",ck:"biz|co|edu|gen|gov|info|net|org",cn:"ac|ah|bj|com|cq|edu|fj|gd|gov|gs|gx|gz|ha|hb|he|hi|hl|hn|jl|js|jx|ln|mil|net|nm|nx|org|qh|sc|sd|sh|sn|sx|tj|tw|xj|xz|yn|zj",co:"com|edu|gov|mil|net|nom|org",cr:"ac|c|co|ed|fi|go|or|sa",cy:"ac|biz|com|ekloges|gov|ltd|name|net|org|parliament|press|pro|tm",do:"art|com|edu|gob|gov|mil|net|org|sld|web",dz:"art|asso|com|edu|gov|net|org|pol",ec:"com|edu|fin|gov|info|med|mil|net|org|pro",eg:"com|edu|eun|gov|mil|name|net|org|sci",er:"com|edu|gov|ind|mil|net|org|rochest|w",es:"com|edu|gob|nom|org",et:"biz|com|edu|gov|info|name|net|org",fj:"ac|biz|com|info|mil|name|net|org|pro",fk:"ac|co|gov|net|nom|org",fr:"asso|com|f|gouv|nom|prd|presse|tm",gg:"co|net|org",gh:"com|edu|gov|mil|org",gn:"ac|com|gov|net|org",gr:"com|edu|gov|mil|net|org",gt:"com|edu|gob|ind|mil|net|org",gu:"com|edu|gov|net|org",hk:"com|edu|gov|idv|net|org",id:"ac|co|go|mil|net|or|sch|web",il:"ac|co|gov|idf|k12|muni|net|org",in:"ac|co|edu|ernet|firm|gen|gov|i|ind|mil|net|nic|org|res",iq:"com|edu|gov|i|mil|net|org",ir:"ac|co|dnssec|gov|i|id|net|org|sch",it:"edu|gov",je:"co|net|org",jo:"com|edu|gov|mil|name|net|org|sch",jp:"ac|ad|co|ed|go|gr|lg|ne|or",ke:"ac|co|go|info|me|mobi|ne|or|sc",kh:"com|edu|gov|mil|net|org|per",ki:"biz|com|de|edu|gov|info|mob|net|org|tel",km:"asso|com|coop|edu|gouv|k|medecin|mil|nom|notaires|pharmaciens|presse|tm|veterinaire",kn:"edu|gov|net|org",kr:"ac|busan|chungbuk|chungnam|co|daegu|daejeon|es|gangwon|go|gwangju|gyeongbuk|gyeonggi|gyeongnam|hs|incheon|jeju|jeonbuk|jeonnam|k|kg|mil|ms|ne|or|pe|re|sc|seoul|ulsan",kw:"com|edu|gov|net|org",ky:"com|edu|gov|net|org",kz:"com|edu|gov|mil|net|org",lb:"com|edu|gov|net|org",lk:"assn|com|edu|gov|grp|hotel|int|ltd|net|ngo|org|sch|soc|web",lr:"com|edu|gov|net|org",lv:"asn|com|conf|edu|gov|id|mil|net|org",ly:"com|edu|gov|id|med|net|org|plc|sch",ma:"ac|co|gov|m|net|org|press",mc:"asso|tm",me:"ac|co|edu|gov|its|net|org|priv",mg:"com|edu|gov|mil|nom|org|prd|tm",mk:"com|edu|gov|inf|name|net|org|pro",ml:"com|edu|gov|net|org|presse",mn:"edu|gov|org",mo:"com|edu|gov|net|org",mt:"com|edu|gov|net|org",mv:"aero|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro",mw:"ac|co|com|coop|edu|gov|int|museum|net|org",mx:"com|edu|gob|net|org",my:"com|edu|gov|mil|name|net|org|sch",nf:"arts|com|firm|info|net|other|per|rec|store|web",ng:"biz|com|edu|gov|mil|mobi|name|net|org|sch",ni:"ac|co|com|edu|gob|mil|net|nom|org",np:"com|edu|gov|mil|net|org",nr:"biz|com|edu|gov|info|net|org",om:"ac|biz|co|com|edu|gov|med|mil|museum|net|org|pro|sch",pe:"com|edu|gob|mil|net|nom|org|sld",ph:"com|edu|gov|i|mil|net|ngo|org",pk:"biz|com|edu|fam|gob|gok|gon|gop|gos|gov|net|org|web",pl:"art|bialystok|biz|com|edu|gda|gdansk|gorzow|gov|info|katowice|krakow|lodz|lublin|mil|net|ngo|olsztyn|org|poznan|pwr|radom|slupsk|szczecin|torun|warszawa|waw|wroc|wroclaw|zgora",pr:"ac|biz|com|edu|est|gov|info|isla|name|net|org|pro|prof",ps:"com|edu|gov|net|org|plo|sec",pw:"belau|co|ed|go|ne|or",ro:"arts|com|firm|info|nom|nt|org|rec|store|tm|www",rs:"ac|co|edu|gov|in|org",sb:"com|edu|gov|net|org",sc:"com|edu|gov|net|org",sh:"co|com|edu|gov|net|nom|org",sl:"com|edu|gov|net|org",st:"co|com|consulado|edu|embaixada|gov|mil|net|org|principe|saotome|store",sv:"com|edu|gob|org|red",sz:"ac|co|org",tr:"av|bbs|bel|biz|com|dr|edu|gen|gov|info|k12|name|net|org|pol|tel|tsk|tv|web",tt:"aero|biz|cat|co|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel",tw:"club|com|ebiz|edu|game|gov|idv|mil|net|org",mu:"ac|co|com|gov|net|or|org",mz:"ac|co|edu|gov|org",na:"co|com",nz:"ac|co|cri|geek|gen|govt|health|iwi|maori|mil|net|org|parliament|school",pa:"abo|ac|com|edu|gob|ing|med|net|nom|org|sld",pt:"com|edu|gov|int|net|nome|org|publ",py:"com|edu|gov|mil|net|org",qa:"com|edu|gov|mil|net|org",re:"asso|com|nom",ru:"ac|adygeya|altai|amur|arkhangelsk|astrakhan|bashkiria|belgorod|bir|bryansk|buryatia|cbg|chel|chelyabinsk|chita|chukotka|chuvashia|com|dagestan|e-burg|edu|gov|grozny|int|irkutsk|ivanovo|izhevsk|jar|joshkar-ola|kalmykia|kaluga|kamchatka|karelia|kazan|kchr|kemerovo|khabarovsk|khakassia|khv|kirov|koenig|komi|kostroma|kranoyarsk|kuban|kurgan|kursk|lipetsk|magadan|mari|mari-el|marine|mil|mordovia|mosreg|msk|murmansk|nalchik|net|nnov|nov|novosibirsk|nsk|omsk|orenburg|org|oryol|penza|perm|pp|pskov|ptz|rnd|ryazan|sakhalin|samara|saratov|simbirsk|smolensk|spb|stavropol|stv|surgut|tambov|tatarstan|tom|tomsk|tsaritsyn|tsk|tula|tuva|tver|tyumen|udm|udmurtia|ulan-ude|vladikavkaz|vladimir|vladivostok|volgograd|vologda|voronezh|vrn|vyatka|yakutia|yamal|yekaterinburg|yuzhno-sakhalinsk",rw:"ac|co|com|edu|gouv|gov|int|mil|net",sa:"com|edu|gov|med|net|org|pub|sch",sd:"com|edu|gov|info|med|net|org|tv",se:"a|ac|b|bd|c|d|e|f|g|h|i|k|l|m|n|o|org|p|parti|pp|press|r|s|t|tm|u|w|x|y|z",sg:"com|edu|gov|idn|net|org|per",sn:"art|com|edu|gouv|org|perso|univ",sy:"com|edu|gov|mil|net|news|org",th:"ac|co|go|in|mi|net|or",tj:"ac|biz|co|com|edu|go|gov|info|int|mil|name|net|nic|org|test|web",tn:"agrinet|com|defense|edunet|ens|fin|gov|ind|info|intl|mincom|nat|net|org|perso|rnrt|rns|rnu|tourism",tz:"ac|co|go|ne|or",ua:"biz|cherkassy|chernigov|chernovtsy|ck|cn|co|com|crimea|cv|dn|dnepropetrovsk|donetsk|dp|edu|gov|if|in|ivano-frankivsk|kh|kharkov|kherson|khmelnitskiy|kiev|kirovograd|km|kr|ks|kv|lg|lugansk|lutsk|lviv|me|mk|net|nikolaev|od|odessa|org|pl|poltava|pp|rovno|rv|sebastopol|sumy|te|ternopil|uzhgorod|vinnica|vn|zaporizhzhe|zhitomir|zp|zt",ug:"ac|co|go|ne|or|org|sc",uk:"ac|bl|british-library|co|cym|gov|govt|icnet|jet|lea|ltd|me|mil|mod|national-library-scotland|nel|net|nhs|nic|nls|org|orgn|parliament|plc|police|sch|scot|soc",us:"dni|fed|isa|kids|nsn",uy:"com|edu|gub|mil|net|org",ve:"co|com|edu|gob|info|mil|net|org|web",vi:"co|com|k12|net|org",vn:"ac|biz|com|edu|gov|health|info|int|name|net|org|pro",ye:"co|com|gov|ltd|me|net|org|plc",yu:"ac|co|edu|gov|org",za:"ac|agric|alt|bourse|city|co|cybernet|db|edu|gov|grondar|iaccess|imt|inca|landesign|law|mil|net|ngo|nis|nom|olivetti|org|pix|school|tm|web",zm:"ac|co|com|edu|gov|net|org|sch"},has_expression:null,is_expression:null,has:function(t){return!!t.match(n.has_expression)},is:function(t){return!!t.match(n.is_expression)},get:function(t){return(t=t.match(n.has_expression))&&t[1]||null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this},init:function(){var t,e="";for(t in n.list)r.call(n.list,t)&&(e+="|(("+n.list[t]+")."+t+")");n.has_expression=RegExp("\\.("+e.substr(1)+")$","i"),n.is_expression=RegExp("^("+e.substr(1)+")$","i")}};return n.init(),n}),function(t,e){"object"==typeof exports?module.exports=e(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],e):t.URI=e(t.punycode,t.IPv6,t.SecondLevelDomains,t)}(this,function(t,e,r,n){function o(t,e){return this instanceof o?(void 0===t&&(t="undefined"!=typeof location?location.href+"":""),this.href(t),void 0!==e?this.absoluteTo(e):this):new o(t,e)}function i(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function a(t){return"Array"===s(t)}function u(t,e){var r,n;if(a(e)){for(r=0,n=e.length;r<n;r++)if(!u(t,e[r]))return!1;return!0}var o=s(e);for(r=0,n=t.length;r<n;r++)if("RegExp"===o){if("string"==typeof t[r]&&t[r].match(e))return!0}else if(t[r]===e)return!0;return!1}function c(t,e){if(!a(t)||!a(e)||t.length!==e.length)return!1;t.sort(),e.sort();for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function h(t){return escape(t)}function l(t){return encodeURIComponent(t).replace(/[!'()*]/g,h).replace(/\*/g,"%2A")}var p=n&&n.URI;o.version="1.12.0";var f=o.prototype,d=Object.prototype.hasOwnProperty;o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\.-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/},o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},o.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();return"input"===e&&"image"!==t.type?void 0:o.domAttributes[e]}},o.encode=l,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=l,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},o.encodeQuery=function(t,e){var r=o.encode(t+"");return e?r.replace(/%20/g,"+"):r},o.decodeQuery=function(t,e){t+="";try{return o.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}},o.recodePath=function(t){for(var e=0,r=(t=(t+"").split("/")).length;e<r;e++)t[e]=o.encodePathSegment(o.decode(t[e]));return t.join("/")},o.decodePath=function(t){for(var e=0,r=(t=(t+"").split("/")).length;e<r;e++)t[e]=o.decodePathSegment(t[e]);return t.join("/")};var _,m={encode:"encode",decode:"decode"},g=function(t,e){return function(r){return o[e](r+"").replace(o.characters[t][e].expression,function(r){return o.characters[t][e].map[r]})}};for(_ in m)o[_+"PathSegment"]=g("pathname",m[_]);for(_ in o.encodeReserved=g("reserved","encode"),o.parse=function(t,e){var r;return e||(e={}),-1<(r=t.indexOf("#"))&&(e.fragment=t.substring(r+1)||null,t=t.substring(0,r)),-1<(r=t.indexOf("?"))&&(e.query=t.substring(r+1)||null,t=t.substring(0,r)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=o.parseAuthority(t,e)):-1<(r=t.indexOf(":"))&&(e.protocol=t.substring(0,r)||null,e.protocol&&!e.protocol.match(o.protocol_expression)?e.protocol=void 0:"file"===e.protocol?t=t.substring(r+3):"//"===t.substring(r+1,r+3)?(t=t.substring(r+3),t=o.parseAuthority(t,e)):(t=t.substring(r+1),e.urn=!0)),e.path=t,e},o.parseHost=function(t,e){var r,n=t.indexOf("/");return-1===n&&(n=t.length),"["===t.charAt(0)?(r=t.indexOf("]"),e.hostname=t.substring(1,r)||null,e.port=t.substring(r+2,n)||null):t.indexOf(":")!==t.lastIndexOf(":")?(e.hostname=t.substring(0,n)||null,e.port=null):(r=t.substring(0,n).split(":"),e.hostname=r[0]||null,e.port=r[1]||null),e.hostname&&"/"!==t.substring(n).charAt(0)&&(n++,t="/"+t),t.substring(n)||"/"},o.parseAuthority=function(t,e){return t=o.parseUserinfo(t,e),o.parseHost(t,e)},o.parseUserinfo=function(t,e){var r=t.indexOf("/"),n=-1<r?t.lastIndexOf("@",r):t.indexOf("@");return-1<n&&(-1===r||n<r)?(r=t.substring(0,n).split(":"),e.username=r[0]?o.decode(r[0]):null,r.shift(),e.password=r[0]?o.decode(r.join(":")):null,t=t.substring(n+1)):(e.username=null,e.password=null),t},o.parseQuery=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,n,i={},s=t.split("&"),a=s.length,u=0;u<a;u++)r=s[u].split("="),n=o.decodeQuery(r.shift(),e),r=r.length?o.decodeQuery(r.join("="),e):null,i[n]?("string"==typeof i[n]&&(i[n]=[i[n]]),i[n].push(r)):i[n]=r;return i},o.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=o.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},o.buildHost=function(t){var e="";return t.hostname?(o.ip6_expression.test(t.hostname)?e=t.port?e+"["+t.hostname+"]:"+t.port:e+t.hostname:(e+=t.hostname,t.port&&(e+=":"+t.port)),e):""},o.buildAuthority=function(t){return o.buildUserinfo(t)+o.buildHost(t)},o.buildUserinfo=function(t){var e="";return t.username&&(e+=o.encode(t.username),t.password&&(e+=":"+o.encode(t.password)),e+="@"),e},o.buildQuery=function(t,e,r){var n,i,s,u,c="";for(i in t)if(d.call(t,i)&&i)if(a(t[i]))for(n={},s=0,u=t[i].length;s<u;s++)void 0!==t[i][s]&&void 0===n[t[i][s]+""]&&(c+="&"+o.buildQueryParameter(i,t[i][s],r),!0!==e&&(n[t[i][s]+""]=!0));else void 0!==t[i]&&(c+="&"+o.buildQueryParameter(i,t[i],r));return c.substring(1)},o.buildQueryParameter=function(t,e,r){return o.encodeQuery(t,r)+(null!==e?"="+o.encodeQuery(e,r):"")},o.addQuery=function(t,e,r){if("object"==typeof e)for(var n in e)d.call(e,n)&&o.addQuery(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");void 0===t[e]?t[e]=r:("string"==typeof t[e]&&(t[e]=[t[e]]),a(r)||(r=[r]),t[e]=t[e].concat(r))}},o.removeQuery=function(t,e,r){var n;if(a(e))for(r=0,n=e.length;r<n;r++)t[e[r]]=void 0;else if("object"==typeof e)for(n in e)d.call(e,n)&&o.removeQuery(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");if(void 0!==r){if(t[e]===r)t[e]=void 0;else if(a(t[e])){n=t[e];var i,s,u={};if(a(r))for(i=0,s=r.length;i<s;i++)u[r[i]]=!0;else u[r]=!0;for(i=0,s=n.length;i<s;i++)void 0!==u[n[i]]&&(n.splice(i,1),s--,i--);t[e]=n}}else t[e]=void 0}},o.hasQuery=function(t,e,r,n){if("object"==typeof e){for(var i in e)if(d.call(e,i)&&!o.hasQuery(t,i,e[i]))return!1;return!0}if("string"!=typeof e)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(s(r)){case"Undefined":return e in t;case"Boolean":return r===(t=Boolean(a(t[e])?t[e].length:t[e]));case"Function":return!!r(t[e],e,t);case"Array":return!!a(t[e])&&(n?u:c)(t[e],r);case"RegExp":return a(t[e])?!!n&&u(t[e],r):Boolean(t[e]&&t[e].match(r));case"Number":r=String(r);case"String":return a(t[e])?!!n&&u(t[e],r):t[e]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.commonPath=function(t,e){var r,n=Math.min(t.length,e.length);for(r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r)){r--;break}return 1>r?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(r)&&"/"===e.charAt(r)||(r=t.substring(0,r).lastIndexOf("/")),t.substring(0,r+1))},o.withinString=function(t,e,r){r||(r={});var n=r.start||o.findUri.start,i=r.end||o.findUri.end,s=r.trim||o.findUri.trim,a=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var u=n.exec(t);if(!u)break;if(u=u.index,r.ignoreHtml)if((c=t.slice(Math.max(u-3,0),u))&&a.test(c))continue;var c=u+t.slice(u).search(i),h=t.slice(u,c).replace(s,"");r.ignore&&r.ignore.test(h)||(h=e(h,u,c=u+h.length,t),t=t.slice(0,u)+h+t.slice(c),n.lastIndex=u+h.length)}return n.lastIndex=0,t},o.ensureValidHostname=function(e){if(e.match(o.invalid_hostname_characters)){if(!t)throw new TypeError("Hostname '"+e+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(t.toASCII(e).match(o.invalid_hostname_characters))throw new TypeError("Hostname '"+e+"' contains characters other than [A-Z0-9.-]")}},o.noConflict=function(t){return t?(t={URI:this.noConflict()},URITemplate&&"function"==typeof URITemplate.noConflict&&(t.URITemplate=URITemplate.noConflict()),e&&"function"==typeof e.noConflict&&(t.IPv6=e.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(t.SecondLevelDomains=SecondLevelDomains.noConflict()),t):(n.URI===this&&(n.URI=p),this)},f.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},f.clone=function(){return new o(this)},f.valueOf=f.toString=function(){return this.build(!1)._string},g=function(t){return function(e,r){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!r),this)}},m={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"})f[_]=g(m[_]);for(_ in g=function(t,e){return function(r,n){return void 0===r?this._parts[t]||"":(null!==r&&((r+="").charAt(0)===e&&(r=r.substring(1))),this._parts[t]=r,this.build(!n),this)}},m={query:"?",fragment:"#"})f[_]=g(_,m[_]);for(_ in g=function(t,e){return function(r,n){var o=this[t](r,n);return"string"==typeof o&&o.length?e+o:o}},m={search:["?","query"],hash:["#","fragment"]})f[_]=g(m[_][1],m[_][0]);f.pathname=function(t,e){if(void 0===t||!0===t){var r=this._parts.path||(this._parts.hostname?"/":"");return t?o.decodePath(r):r}return this._parts.path=t?o.recodePath(t):"/",this.build(!e),this},f.path=f.pathname,f.href=function(t,e){var r;if(void 0===t)return this.toString();this._string="",this._parts=o._parts();var n=t instanceof o,i="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName&&(t=t[i=o.getDomAttribute(t)]||"",i=!1),!n&&i&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t)this._parts=o.parse(t,this._parts);else{if(!n&&!i)throw new TypeError("invalid input");for(r in n=n?t._parts:t)d.call(this._parts,r)&&(this._parts[r]=n[r])}return this.build(!e),this},f.is=function(t){var e=!1,n=!1,i=!1,s=!1,a=!1,u=!1,c=!1,h=!this._parts.urn;switch(this._parts.hostname&&(h=!1,n=o.ip4_expression.test(this._parts.hostname),i=o.ip6_expression.test(this._parts.hostname),a=(s=!(e=n||i))&&r&&r.has(this._parts.hostname),u=s&&o.idn_expression.test(this._parts.hostname),c=s&&o.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return h;case"absolute":return!h;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return i;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var y=f.protocol,v=f.port,w=f.hostname;f.protocol=function(t,e){if(void 0!==t&&t&&!(t=t.replace(/:(\/\/)?$/,"")).match(o.protocol_expression))throw new TypeError("Protocol '"+t+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return y.call(this,t,e)},f.scheme=f.protocol,f.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(":"===(t+="").charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError("Port '"+t+"' contains characters other than [0-9]");return v.call(this,t,e)},f.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var r={};o.parseHost(t,r),t=r.hostname}return w.call(this,t,e)},f.host=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?o.buildHost(this._parts):"":(o.parseHost(t,this._parts),this.build(!e),this)},f.authority=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?o.buildAuthority(this._parts):"":(o.parseAuthority(t,this._parts),this.build(!e),this)},f.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.username)return"";var r=o.buildUserinfo(this._parts);return r.substring(0,r.length-1)}return"@"!==t[t.length-1]&&(t+="@"),o.parseUserinfo(t,this._parts),this.build(!e),this},f.resource=function(t,e){var r;return void 0===t?this.path()+this.search()+this.hash():(r=o.parse(t),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!e),this)},f.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}return r=this._parts.hostname.length-this.domain().length,r=this._parts.hostname.substring(0,r),r=RegExp("^"+i(r)),t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&o.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(r,t),this.build(!e),this},f.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);return r&&2>r.length?this._parts.hostname:(r=this._parts.hostname.length-this.tld(e).length-1,r=this._parts.hostname.lastIndexOf(".",r-1)+1,this._parts.hostname.substring(r)||"")}if(!t)throw new TypeError("cannot set domain empty");return o.ensureValidHostname(t),!this._parts.hostname||this.is("IP")?this._parts.hostname=t:(r=RegExp(i(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(r,t)),this.build(!e),this},f.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf(".");n=this._parts.hostname.substring(n+1);return!0!==e&&r&&r.list[n.toLowerCase()]&&r.get(this._parts.hostname)||n}if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(t))throw new TypeError("TLD '"+t+"' contains characters other than [A-Z0-9]");n=RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(n,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");n=RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(n,t)}return this.build(!e),this},f.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1;r=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return t?o.decodePath(r):r}return r=this._parts.path.length-this.filename().length,r=this._parts.path.substring(0,r),r=RegExp("^"+i(r)),this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=o.recodePath(t),this._parts.path=this._parts.path.replace(r,t),this.build(!e),this},f.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/");r=this._parts.path.substring(r+1);return t?o.decodePathSegment(r):r}r=!1,"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(r=!0);var n=RegExp(i(this.filename())+"$");return t=o.recodePath(t),this._parts.path=this._parts.path.replace(n,t),r?this.normalizePath(e):this.build(!e),this},f.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var r=this.filename(),n=r.lastIndexOf(".");return-1===n?"":(r=r.substring(n+1),r=/^[a-z0-9%]+$/i.test(r)?r:"",t?o.decodePathSegment(r):r)}if("."===t.charAt(0)&&(t=t.substring(1)),r=this.suffix())n=t?RegExp(i(r)+"$"):RegExp(i("."+r)+"$");else{if(!t)return this;this._parts.path+="."+o.recodePath(t)}return n&&(t=o.recodePath(t),this._parts.path=this._parts.path.replace(n,t)),this.build(!e),this},f.segment=function(t,e,r){var n=this._parts.urn?":":"/",o="/"===(i=this.path()).substring(0,1),i=i.split(n);if(void 0!==t&&"number"!=typeof t&&(r=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw Error("Bad segment '"+t+"', must be 0-based integer");if(o&&i.shift(),0>t&&(t=Math.max(i.length+t,0)),void 0===e)return void 0===t?i:i[t];if(null===t||void 0===i[t])if(a(e)){i=[],t=0;for(var s=e.length;t<s;t++)(e[t].length||i.length&&i[i.length-1].length)&&(i.length&&!i[i.length-1].length&&i.pop(),i.push(e[t]))}else(e||"string"==typeof e)&&(""===i[i.length-1]?i[i.length-1]=e:i.push(e));else e||"string"==typeof e&&e.length?i[t]=e:i.splice(t,1);return o&&i.unshift(""),this.path(i.join(n),r)},f.segmentCoded=function(t,e,r){var n,i;if("number"!=typeof t&&(r=e,e=t,t=void 0),void 0===e){if(a(t=this.segment(t,e,r)))for(n=0,i=t.length;n<i;n++)t[n]=o.decode(t[n]);else t=void 0!==t?o.decode(t):void 0;return t}if(a(e))for(n=0,i=e.length;n<i;n++)e[n]=o.decode(e[n]);else e="string"==typeof e?o.encode(e):e;return this.segment(t,e,r)};var b=f.query;return f.query=function(t,e){if(!0===t)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=t.call(this,r);return this._parts.query=o.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=o.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):b.call(this,t,e)},f.setQuery=function(t,e,r){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof t)for(var i in t)d.call(t,i)&&(n[i]=t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");n[t]=void 0!==e?e:null}return this._parts.query=o.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},f.addQuery=function(t,e,r){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(n,t,void 0===e?null:e),this._parts.query=o.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},f.removeQuery=function(t,e,r){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(n,t,e),this._parts.query=o.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},f.hasQuery=function(t,e,r){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(n,t,e,r)},f.setSearch=f.setQuery,f.addSearch=f.addQuery,f.removeSearch=f.removeQuery,f.hasSearch=f.hasQuery,f.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},f.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},f.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},f.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},f.normalizePath=function(t){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var e,r,n,i=this._parts.path,s="";for("/"!==i.charAt(0)&&(e=!0,i="/"+i),i=i.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(s=i.substring(1).match(/^(\.\.\/)+/)||"")&&(s=s[0]);-1!==(r=i.indexOf("/.."));)0!==r?(-1===(n=i.substring(0,r).lastIndexOf("/"))&&(n=r),i=i.substring(0,n)+i.substring(r+3)):i=i.substring(3);return e&&this.is("relative")&&(i=s+i.substring(1)),i=o.recodePath(i),this._parts.path=i,this.build(!t),this},f.normalizePathname=f.normalizePath,f.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},f.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},f.normalizeSearch=f.normalizeQuery,f.normalizeHash=f.normalizeFragment,f.iso8859=function(){var t=o.encode,e=o.decode;return o.encode=escape,o.decode=decodeURIComponent,this.normalize(),o.encode=t,o.decode=e,this},f.unicode=function(){var t=o.encode,e=o.decode;return o.encode=l,o.decode=unescape,this.normalize(),o.encode=t,o.decode=e,this},f.readable=function(){var e=this.clone();e.username("").password("").normalize();var r="";if(e._parts.protocol&&(r+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(r+=t.toUnicode(e._parts.hostname),e._parts.port&&(r+=":"+e._parts.port)):r+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(r+="/"),r+=e.path(!0),e._parts.query){for(var n="",i=0,s=e._parts.query.split("&"),a=s.length;i<a;i++){var u=(s[i]||"").split("=");n=n+"&"+o.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26");void 0!==u[1]&&(n+="="+o.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+o.decodeQuery(e.hash(),!0)},f.absoluteTo=function(t){var e,r,n=this.clone(),i=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(t instanceof o||(t=new o(t)),n._parts.protocol||(n._parts.protocol=t._parts.protocol),this._parts.hostname)return n;for(e=0;r=i[e];e++)n._parts[r]=t._parts[r];return n._parts.path?".."===n._parts.path.substring(-2)&&(n._parts.path+="/"):(n._parts.path=t._parts.path,n._parts.query||(n._parts.query=t._parts.query)),"/"!==n.path().charAt(0)&&(t=t.directory(),n._parts.path=(t?t+"/":"")+n._parts.path,n.normalizePath()),n.build(),n},f.relativeTo=function(t){var e,r,n,i,s=this.clone().normalize();if(s._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(t=new o(t).normalize(),e=s._parts,r=t._parts,n=s.path(),i=t.path(),"/"!==n.charAt(0))throw Error("URI is already relative");if("/"!==i.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");return e.protocol===r.protocol&&(e.protocol=null),e.username!==r.username||e.password!==r.password||null!==e.protocol||null!==e.username||null!==e.password||e.hostname!==r.hostname||e.port!==r.port?s.build():(e.hostname=null,e.port=null,n===i?(e.path="",s.build()):(t=o.commonPath(s.path(),t.path()))?(r=r.path.substring(t.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../"),e.path=r+e.path.substring(t.length),s.build()):s.build())},f.equals=function(t){var e=this.clone();t=new o(t);var r,n={},i={},s={};if(e.normalize(),t.normalize(),e.toString()===t.toString())return!0;if(n=e.query(),i=t.query(),e.query(""),t.query(""),e.toString()!==t.toString()||n.length!==i.length)return!1;for(r in n=o.parseQuery(n,this._parts.escapeQuerySpace),i=o.parseQuery(i,this._parts.escapeQuerySpace),n)if(d.call(n,r)){if(a(n[r])){if(!c(n[r],i[r]))return!1}else if(n[r]!==i[r])return!1;s[r]=!0}for(r in i)if(d.call(i,r)&&!s[r])return!1;return!0},f.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},f.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},o}),function(t,e){"object"==typeof exports?module.exports=e(require("./URI")):"function"==typeof define&&define.amd?define(["./URI"],e):e(t.URI)}(this,function(t){var e=t.prototype,r=e.fragment;t.fragmentPrefix="?";var n=t._parts;return t._parts=function(){var e=n();return e.fragmentPrefix=t.fragmentPrefix,e},e.fragmentPrefix=function(t){return this._parts.fragmentPrefix=t,this},e.fragment=function(e,n){var o=this._parts.fragmentPrefix,i=this._parts.fragment||"";return!0===e?i.substring(0,o.length)!==o?{}:t.parseQuery(i.substring(o.length)):void 0!==e&&"string"!=typeof e?(this._parts.fragment=o+t.buildQuery(e),this.build(!n),this):r.call(this,e,n)},e.addFragment=function(e,r,n){var o=this._parts.fragmentPrefix,i=t.parseQuery((this._parts.fragment||"").substring(o.length));return t.addQuery(i,e,r),this._parts.fragment=o+t.buildQuery(i),"string"!=typeof e&&(n=r),this.build(!n),this},e.removeFragment=function(e,r,n){var o=this._parts.fragmentPrefix,i=t.parseQuery((this._parts.fragment||"").substring(o.length));return t.removeQuery(i,e,r),this._parts.fragment=o+t.buildQuery(i),"string"!=typeof e&&(n=r),this.build(!n),this},e.addHash=e.addFragment,e.removeHash=e.removeFragment,{}}),function(t){"use strict";var e=function(){function t(t){this.options=t}return t.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},t}(),r=function(){function t(e){return"function"==typeof Object.freeze?function(e){if("object"!=typeof e||null===e)return e;var r,n;for(n in Object.freeze(e),e)e.hasOwnProperty(n)&&("object"!=typeof(r=e[n])||r instanceof RegExp||t(r));return e}(e):e}return{isArray:function(t){return"[object Array]"===Object.prototype.toString.apply(t)},isString:function(t){return"[object String]"===Object.prototype.toString.apply(t)},isNumber:function(t){return"[object Number]"===Object.prototype.toString.apply(t)},isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.apply(t)},join:function(t,e){var r,n="",o=!0;for(r=0;r<t.length;r+=1)o?o=!1:n+=e,n+=t[r];return n},map:function(t,e){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r},filter:function(t,e){for(var r=[],n=0;n<t.length;n+=1)e(t[n])&&r.push(t[n]);return r},deepFreeze:t}}(),n=function(){function t(t){return t>="0"&&t<="9"}return{isAlpha:function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},isDigit:t,isHexDigit:function(e){return t(e)||e>="a"&&e<="f"||e>="A"&&e<="F"}}}(),o=function(){var t={encode:function(t){return unescape(encodeURIComponent(t))},numBytes:function(t){return t<=127?1:194<=t&&t<=223?2:224<=t&&t<=239?3:240<=t&&t<=244?4:0},isValidFollowingCharCode:function(t){return 128<=t&&t<=191}};function e(t,e){return"%"===t.charAt(e)&&n.isHexDigit(t.charAt(e+1))&&n.isHexDigit(t.charAt(e+2))}function r(t,e){return parseInt(t.substr(e,2),16)}return{encodeCharacter:function(e){var r,n,o="",i=t.encode(e);for(n=0;n<i.length;n+=1)o+="%"+((r=i.charCodeAt(n))<16?"0":"")+r.toString(16).toUpperCase();return o},isPctEncoded:function(n){if(!e(n,0))return!1;var o=r(n,1),i=t.numBytes(o);if(0===i)return!1;for(var s=1;s<i;s+=1)if(!e(n,3*s)||!t.isValidFollowingCharCode(r(n,3*s+1)))return!1;return!0},pctCharAt:function(n,o){var i=n.charAt(o);if(!e(n,o))return i;var s=r(n,o+1),a=t.numBytes(s);if(0===a)return i;for(var u=1;u<a;u+=1)if(!e(n,o+3*u)||!t.isValidFollowingCharCode(r(n,o+3*u+1)))return i;return n.substr(o,3*a)}}}(),i=function(){return{isVarchar:function(t){return n.isAlpha(t)||n.isDigit(t)||"_"===t||o.isPctEncoded(t)},isUnreserved:function(t){return n.isAlpha(t)||n.isDigit(t)||"-"===t||"."===t||"_"===t||"~"===t},isReserved:function(t){return":"===t||"/"===t||"?"===t||"#"===t||"["===t||"]"===t||"@"===t||"!"===t||"$"===t||"&"===t||"("===t||")"===t||"*"===t||"+"===t||","===t||";"===t||"="===t||"'"===t}}}(),s=function(){function t(t,e){var r,n="",s="";for("number"!=typeof t&&"boolean"!=typeof t||(t=t.toString()),r=0;r<t.length;r+=s.length)s=t.charAt(r),n+=i.isUnreserved(s)||e&&i.isReserved(s)?s:o.encodeCharacter(s);return n}return{encode:t,encodePassReserved:function(e){return t(e,!0)},encodeLiteral:function(t){var e,r="",n="";for(e=0;e<t.length;e+=n.length)(n=o.pctCharAt(t,e)).length>1?r+=n:r+=i.isReserved(n)||i.isUnreserved(n)?n:o.encodeCharacter(n);return r},encodeLiteralCharacter:function(t,e){var r=o.pctCharAt(t,e);return r.length>1?r:i.isReserved(r)||i.isUnreserved(r)?r:o.encodeCharacter(r)}}}(),a=function(){var t={};function e(e){t[e]={symbol:e,separator:"?"===e?"&":""===e||"+"===e||"#"===e?",":e,named:";"===e||"&"===e||"?"===e,ifEmpty:"&"===e||"?"===e?"=":"",first:"+"===e?"":e,encode:"+"===e||"#"===e?s.encodePassReserved:s.encode,toString:function(){return this.symbol}}}return e(""),e("+"),e("#"),e("."),e("/"),e(";"),e("?"),e("&"),{valueOf:function(e){return t[e]?t[e]:"=,!@|".indexOf(e)>=0?null:t[""]}}}();function u(t){var e;if(null==t)return!1;if(r.isArray(t))return t.length>0;if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return!0;for(e in t)if(t.hasOwnProperty(e)&&u(t[e]))return!0;return!1}var c=function(){function t(t){this.literal=s.encodeLiteral(t)}return t.prototype.expand=function(){return this.literal},t.prototype.toString=t.prototype.expand,t}(),h=function(){function t(t){var r,s,u=[],c=null,h=null,p=null,f="";function d(){var r=t.substring(h,s);if(0===r.length)throw new e({expressionText:t,message:"a varname must be specified",position:s});c={varname:r,exploded:!1,maxLength:null},h=null}function _(){if(p===s)throw new e({expressionText:t,message:"after a ':' you have to specify the length",position:s});c.maxLength=parseInt(t.substring(p,s),10),p=null}for(r=function(r){var n=a.valueOf(r);if(null===n)throw new e({expressionText:t,message:"illegal use of reserved operator",position:s,operator:r});return n}(t.charAt(0)),s=r.symbol.length,h=s;s<t.length;s+=f.length){if(f=o.pctCharAt(t,s),null!==h){if("."===f){if(h===s)throw new e({expressionText:t,message:"a varname MUST NOT start with a dot",position:s});continue}if(i.isVarchar(f))continue;d()}if(null!==p){if(s===p&&"0"===f)throw new e({expressionText:t,message:"A :prefix must not start with digit 0",position:s});if(n.isDigit(f)){if(s-p>=4)throw new e({expressionText:t,message:"A :prefix must have max 4 digits",position:s});continue}_()}if(":"!==f)if("*"!==f){if(","!==f)throw new e({expressionText:t,message:"illegal character",character:f,position:s});u.push(c),c=null,h=s+1}else{if(null===c)throw new e({expressionText:t,message:"exploded without varspec",position:s});if(c.exploded)throw new e({expressionText:t,message:"exploded twice",position:s});if(c.maxLength)throw new e({expressionText:t,message:"an explode (*) MUST NOT follow to a prefix",position:s});c.exploded=!0}else{if(null!==c.maxLength)throw new e({expressionText:t,message:"only one :maxLength is allowed per varspec",position:s});if(c.exploded)throw new e({expressionText:t,message:"an exploeded varspec MUST NOT be varspeced",position:s});p=s+1}}return null!==h&&d(),null!==p&&_(),u.push(c),new l(t,r,u)}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}return function(n){var o,i,s,a=[],u=null,h="",l=!0,f=0;for(o=0;o<n.length;o+=1)if(i=n.charAt(o),null===f){if(null===u)throw new Error("reached unreachable code");if("{"===i)throw new e({templateText:n,message:"brace already opened",position:o});if("}"===i){if(u+1===o)throw new e({templateText:n,message:"empty braces",position:u});try{s=t(n.substring(u+1,o))}catch(t){if(t.prototype===e.prototype)throw new e({templateText:n,message:t.options.message,position:u+t.options.position,details:t.options});throw t}a.push(s),0===s.operator.symbol.length?h+="([^/]+)":l=!1,u=null,f=o+1}}else{if("}"===i)throw new e({templateText:n,message:"unopened brace closed",position:o});"{"===i&&(f<o&&(s=new c(n.substring(f,o)),a.push(s),h+=r(s.literal)),f=null,u=o)}if(null!==u)throw new e({templateText:n,message:"unclosed brace",position:u});return f<n.length&&(s=new c(n.substring(f)),a.push(s),h+=r(s.literal)),!1===l&&(h=void 0),new p(n,a,h)}}(),l=function(){function t(t){return JSON&&JSON.stringify?JSON.stringify(t):t}function e(t){if(!u(t))return!0;if(r.isString(t))return""===t;if(r.isNumber(t)||r.isBoolean(t))return!1;if(r.isArray(t))return 0===t.length;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function n(t){var e,r=[];for(e in t)t.hasOwnProperty(e)&&r.push({name:e,value:t[e]});return r}function o(t,e,r){this.templateText=t,this.operator=e,this.varspecs=r}function i(t,e,r){var n="";if(r=r.toString(),e.named){if(n+=s.encodeLiteral(t.varname),""===r)return n+=e.ifEmpty;n+="="}return null!==t.maxLength&&(r=r.substr(0,t.maxLength)),n+=e.encode(r)}function a(t){return u(t.value)}function c(t,o,i){var c=[],h="";if(o.named){if(h+=s.encodeLiteral(t.varname),e(i))return h+=o.ifEmpty;h+="="}return r.isArray(i)?(c=i,c=r.filter(c,u),c=r.map(c,o.encode),h+=r.join(c,",")):(c=n(i),c=r.filter(c,a),c=r.map(c,function(t){return o.encode(t.name)+","+o.encode(t.value)}),h+=r.join(c,",")),h}function h(t,o,i){var c=[];return r.isArray(i)?(c=i,c=r.filter(c,u),c=r.map(c,function(r){var n=s.encodeLiteral(t.varname);return e(r)?n+=o.ifEmpty:n+="="+o.encode(r),n})):(c=n(i),c=r.filter(c,a),c=r.map(c,function(t){var r=s.encodeLiteral(t.name);return e(t.value)?r+=o.ifEmpty:r+="="+o.encode(t.value),r})),r.join(c,o.separator)}function l(t,e){var o=[],i="";return r.isArray(e)?(o=e,o=r.filter(o,u),o=r.map(o,t.encode),i+=r.join(o,t.separator)):(o=n(e),o=r.filter(o,function(t){return u(t.value)}),o=r.map(o,function(e){return t.encode(e.name)+"="+t.encode(e.value)}),i+=r.join(o,t.separator)),i}return o.prototype.toString=function(){return this.templateText},o.prototype.expand=function(n){var o,s,a,p=[],f=this.operator;for(o=0;o<this.varspecs.length;o+=1)if(null!=(a=n[(s=this.varspecs[o]).varname]))if(s.exploded&&!0,r.isArray(a),"string"==typeof a||"number"==typeof a||"boolean"==typeof a)p.push(i(s,f,a));else{if(s.maxLength&&u(a))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+t(a));s.exploded?u(a)&&(f.named?p.push(h(s,f,a)):p.push(l(f,a))):!f.named&&e(a)||p.push(c(s,f,a))}return 0===p.length?"":f.first+r.join(p,f.separator)},o}(),p=function(){function t(t,e,n){this.templateText=t,this.expressions=e,void 0!==n&&(this.regexp=new RegExp("^"+n+"$")),r.deepFreeze(this)}return t.prototype.toString=function(){return this.templateText},t.prototype.expand=function(t){var e,r="";for(e=0;e<this.expressions.length;e+=1)r+=this.expressions[e].expand(t);return r},t.prototype.extract=function(t){var e,r,n,o,i=1,s=!0,a={};if(void 0!==this.regexp&&this.regexp.test(t)){for(o=this.regexp.exec(t),e=0;e<this.expressions.length;e+=1)void 0===(r=this.expressions[e]).literal&&(void 0!==r.operator&&0===r.operator.symbol.length&&1===r.varspecs.length&&!1===(n=r.varspecs[0]).exploded&&null===n.maxLength&&-1===o[i].indexOf(",")?(a[n.varname]=decodeURIComponent(o[i]),i+=1):s=!1);if(s)return a}return!1},t.parse=h,t.UriTemplateError=e,t}();!function(t){"undefined"!=typeof module?module.exports=t:"function"==typeof define?define([],function(){return t}):"undefined"!=typeof window?window.UriTemplate=t:global.UriTemplate=t}(p)}();var LZString=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function o(t,e){if(!n[t]){n[t]={};for(var r=0;r<t.length;r++)n[t][t.charAt(r)]=r}return n[t][e]}var i={compressToBase64:function(t){if(null==t)return"";var r=i._compress(t,6,function(t){return e.charAt(t)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:i._decompress(t.length,32,function(r){return o(e,t.charAt(r))})},compressToUTF16:function(e){return null==e?"":i._compress(e,15,function(e){return t(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(t){for(var e=i.compress(t),r=new Uint8Array(2*e.length),n=0,o=e.length;n<o;n++){var s=e.charCodeAt(n);r[2*n]=s>>>8,r[2*n+1]=s%256}return r},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var r=new Array(e.length/2),n=0,o=r.length;n<o;n++)r[n]=256*e[2*n]+e[2*n+1];var s=[];return r.forEach(function(e){s.push(t(e))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":i._compress(t,6,function(t){return r.charAt(t)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,function(e){return o(r,t.charAt(e))}))},compress:function(e){return i._compress(e,16,function(e){return t(e)})},_compress:function(t,e,r){if(null==t)return"";var n,o,i,s={},a={},u="",c="",h="",l=2,p=3,f=2,d=[],_=0,m=0;for(i=0;i<t.length;i+=1)if(u=t.charAt(i),Object.prototype.hasOwnProperty.call(s,u)||(s[u]=p++,a[u]=!0),c=h+u,Object.prototype.hasOwnProperty.call(s,c))h=c;else{if(Object.prototype.hasOwnProperty.call(a,h)){if(h.charCodeAt(0)<256){for(n=0;n<f;n++)_<<=1,m==e-1?(m=0,d.push(r(_)),_=0):m++;for(o=h.charCodeAt(0),n=0;n<8;n++)_=_<<1|1&o,m==e-1?(m=0,d.push(r(_)),_=0):m++,o>>=1}else{for(o=1,n=0;n<f;n++)_=_<<1|o,m==e-1?(m=0,d.push(r(_)),_=0):m++,o=0;for(o=h.charCodeAt(0),n=0;n<16;n++)_=_<<1|1&o,m==e-1?(m=0,d.push(r(_)),_=0):m++,o>>=1}0==--l&&(l=Math.pow(2,f),f++),delete a[h]}else for(o=s[h],n=0;n<f;n++)_=_<<1|1&o,m==e-1?(m=0,d.push(r(_)),_=0):m++,o>>=1;0==--l&&(l=Math.pow(2,f),f++),s[c]=p++,h=String(u)}if(""!==h){if(Object.prototype.hasOwnProperty.call(a,h)){if(h.charCodeAt(0)<256){for(n=0;n<f;n++)_<<=1,m==e-1?(m=0,d.push(r(_)),_=0):m++;for(o=h.charCodeAt(0),n=0;n<8;n++)_=_<<1|1&o,m==e-1?(m=0,d.push(r(_)),_=0):m++,o>>=1}else{for(o=1,n=0;n<f;n++)_=_<<1|o,m==e-1?(m=0,d.push(r(_)),_=0):m++,o=0;for(o=h.charCodeAt(0),n=0;n<16;n++)_=_<<1|1&o,m==e-1?(m=0,d.push(r(_)),_=0):m++,o>>=1}0==--l&&(l=Math.pow(2,f),f++),delete a[h]}else for(o=s[h],n=0;n<f;n++)_=_<<1|1&o,m==e-1?(m=0,d.push(r(_)),_=0):m++,o>>=1;0==--l&&(l=Math.pow(2,f),f++)}for(o=2,n=0;n<f;n++)_=_<<1|1&o,m==e-1?(m=0,d.push(r(_)),_=0):m++,o>>=1;for(;;){if(_<<=1,m==e-1){d.push(r(_));break}m++}return d.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,r,n){var o,i,s,a,u,c,h,l=[],p=4,f=4,d=3,_="",m=[],g={val:n(0),position:r,index:1};for(o=0;o<3;o+=1)l[o]=o;for(s=0,u=Math.pow(2,2),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=r,g.val=n(g.index++)),s|=(a>0?1:0)*c,c<<=1;switch(s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=r,g.val=n(g.index++)),s|=(a>0?1:0)*c,c<<=1;h=t(s);break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=r,g.val=n(g.index++)),s|=(a>0?1:0)*c,c<<=1;h=t(s);break;case 2:return""}for(l[3]=h,i=h,m.push(h);;){if(g.index>e)return"";for(s=0,u=Math.pow(2,d),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=r,g.val=n(g.index++)),s|=(a>0?1:0)*c,c<<=1;switch(h=s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=r,g.val=n(g.index++)),s|=(a>0?1:0)*c,c<<=1;l[f++]=t(s),h=f-1,p--;break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=r,g.val=n(g.index++)),s|=(a>0?1:0)*c,c<<=1;l[f++]=t(s),h=f-1,p--;break;case 2:return m.join("")}if(0==p&&(p=Math.pow(2,d),d++),l[h])_=l[h];else{if(h!==f)return null;_=i+i.charAt(0)}m.push(_),l[f++]=i+_.charAt(0),i=_,0==--p&&(p=Math.pow(2,d),d++)}}};return i}();function parseStringToObject(t){var e=function(){var t,e,r=[],n=arguments;for(t=0;t<n.length;t+=1)for(e=0;e<n[t].length;e+=1)r.push(n[t][e]);return r},r=function(t,e,r){var n={type:"simple",key:t,value:e};return void 0!==r&&(n.operator=r),n},n=function(t,r){var n,o=[];for(n=0;n<r.length;n+=1)r[n].operator===t?o=e(o,r[n].query_list):o.push(r[n]);return{type:"complex",operator:t,query_list:o}},o=function(t,e){var r;if("complex"===t.type){for(r=0;r<t.query_list.length;++r)o(t.query_list[r],e);return!0}return"simple"===t.type&&!t.key&&(t.key=e,!0)};return function(){var t=function(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r},e=[1,5],i=[1,7],s=[1,8],a=[1,10],u=[1,12],c=[1,6,7,15],h=[1,6,7,9,12,14,15,16,19,21],l=[1,6,7,9,11,12,14,15,16,19,21],p=[2,17],f={trace:function(){},yy:{},symbols_:{error:2,begin:3,search_text:4,end:5,EOF:6,NEWLINE:7,and_expression:8,OR:9,boolean_expression:10,AND:11,NOT:12,expression:13,LEFT_PARENTHESE:14,RIGHT_PARENTHESE:15,WORD:16,DEFINITION:17,value:18,OPERATOR:19,string:20,QUOTE:21,QUOTED_STRING:22,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",7:"NEWLINE",9:"OR",11:"AND",12:"NOT",14:"LEFT_PARENTHESE",15:"RIGHT_PARENTHESE",16:"WORD",17:"DEFINITION",19:"OPERATOR",21:"QUOTE",22:"QUOTED_STRING"},productions_:[0,[3,2],[5,0],[5,1],[5,1],[4,1],[4,2],[4,3],[8,1],[8,3],[10,2],[10,1],[13,3],[13,3],[13,1],[18,2],[18,1],[20,1],[20,3]],performAction:function(t,e,i,s,a,u,c){var h,l=u.length-1;switch(a){case 1:return u[l-1];case 5:case 8:case 11:case 14:case 16:this.$=u[l];break;case 6:this.$=n("AND",[u[l-1],u[l]]);break;case 7:this.$=n("OR",[u[l-2],u[l]]);break;case 9:this.$=n("AND",[u[l-2],u[l]]);break;case 10:this.$="NOT"===(h=u[l]).operator?h.query_list[0]:{type:"complex",operator:"NOT",query_list:[h]};break;case 12:this.$=u[l-1];break;case 13:o(u[l],u[l-2]),this.$=u[l];break;case 15:u[l].operator=u[l-1],this.$=u[l];break;case 17:this.$=r("",u[l]);break;case 18:this.$=r("",u[l-1].replace(/(?:\\(")|(\\[^"]))/g,"$1$2"))}},table:[{3:1,4:2,8:3,10:4,12:e,13:6,14:i,16:s,18:9,19:a,20:11,21:u},{1:[3]},{1:[2,2],5:13,6:[1,14],7:[1,15]},t(c,[2,5],{8:3,10:4,13:6,18:9,20:11,4:16,9:[1,17],12:e,14:i,16:s,19:a,21:u}),t(h,[2,8],{11:[1,18]}),{13:19,14:i,16:s,18:9,19:a,20:11,21:u},t(l,[2,11]),{4:20,8:3,10:4,12:e,13:6,14:i,16:s,18:9,19:a,20:11,21:u},t(l,p,{17:[1,21]}),t(l,[2,14]),{16:[1,23],20:22,21:u},t(l,[2,16]),{22:[1,24]},{1:[2,1]},{1:[2,3]},{1:[2,4]},t(c,[2,6]),{4:25,8:3,10:4,12:e,13:6,14:i,16:s,18:9,19:a,20:11,21:u},{8:26,10:4,12:e,13:6,14:i,16:s,18:9,19:a,20:11,21:u},t(l,[2,10]),{15:[1,27]},{13:28,14:i,16:s,18:9,19:a,20:11,21:u},t(l,[2,15]),t(l,p),{21:[1,29]},t(c,[2,7]),t(h,[2,9]),t(l,[2,12]),t(l,[2,13]),t(l,[2,18])],defaultActions:{13:[2,1],14:[2,3],15:[2,4]},parseError:function(t,e){if(!e.recoverable){function r(t,e){this.message=t,this.hash=e}throw r.prototype=new Error,new r(t,e)}this.trace(t)},parse:function(t){var e=this,r=[0],n=[null],o=[],i=this.table,s="",a=0,u=0,c=0,h=o.slice.call(arguments,1),l=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);l.setInput(t,p.yy),p.yy.lexer=l,p.yy.parser=this,void 0===l.yylloc&&(l.yylloc={});var d=l.yylloc;o.push(d);var _=l.options&&l.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,g,y,v,w,b,k,O,A,S=function(){var t;return"number"!=typeof(t=l.lex()||1)&&(t=e.symbols_[t]||t),t},x={};;){if(y=r[r.length-1],this.defaultActions[y]?v=this.defaultActions[y]:(null==m&&(m=S()),v=i[y]&&i[y][m]),void 0===v||!v.length||!v[0]){var T="";for(b in A=[],i[y])this.terminals_[b]&&b>2&&A.push("'"+this.terminals_[b]+"'");T=l.showPosition?"Parse error on line "+(a+1)+":\n"+l.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:l.match,token:this.terminals_[m]||m,line:l.yylineno,loc:d,expected:A})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+m);switch(v[0]){case 1:r.push(m),n.push(l.yytext),o.push(l.yylloc),r.push(v[1]),m=null,g?(m=g,g=null):(u=l.yyleng,s=l.yytext,a=l.yylineno,d=l.yylloc,c>0&&c--);break;case 2:if(k=this.productions_[v[1]][1],x.$=n[n.length-k],x._$={first_line:o[o.length-(k||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(k||1)].first_column,last_column:o[o.length-1].last_column},_&&(x._$.range=[o[o.length-(k||1)].range[0],o[o.length-1].range[1]]),void 0!==(w=this.performAction.apply(x,[s,u,a,p.yy,v[1],n,o].concat(h))))return w;k&&(r=r.slice(0,-1*k*2),n=n.slice(0,-1*k),o=o.slice(0,-1*k)),r.push(this.productions_[v[1]][0]),n.push(x.$),o.push(x._$),O=i[r[r.length-2]][r[r.length-1]],r.push(O);break;case 3:return!0}}return!0}},d={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var r,n,o;if(this.options.backtrack_lexer&&(o={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(o.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var i in o)this[i]=o[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),i=0;i<o.length;i++)if((r=this._input.match(this.rules[o[i]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=i,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,o[i])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,o[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,r,n){switch(r){case 0:return this.begin("letsquote"),"QUOTE";case 1:return this.popState(),this.begin("endquote"),"QUOTED_STRING";case 2:return this.popState(),"QUOTE";case 3:break;case 4:return"LEFT_PARENTHESE";case 5:return"RIGHT_PARENTHESE";case 6:return"AND";case 7:return"OR";case 8:return"NOT";case 9:return"DEFINITION";case 10:return 19;case 11:return 16;case 12:return 6}},rules:[/^(?:")/,/^(?:(\\"|[^"])*)/,/^(?:")/,/^(?:[^\S]+)/,/^(?:\()/,/^(?:\))/,/^(?:AND\b)/,/^(?:OR\b)/,/^(?:NOT\b)/,/^(?::)/,/^(?:(!?=|<=?|>=?))/,/^(?:[^\s\n"():><!=]+)/,/^(?:$)/],conditions:{endquote:{rules:[2],inclusive:!1},letsquote:{rules:[1],inclusive:!1},INITIAL:{rules:[0,3,4,5,6,7,8,9,10,11,12],inclusive:!0}}};function _(){this.yy={}}return f.lexer=d,_.prototype=f,f.Parser=_,new _}().parse(t)}"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";var t,e;function r(){return t.apply(null,arguments)}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function i(t){return void 0===t}function s(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function a(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function u(t,e){var r,n=[];for(r=0;r<t.length;++r)n.push(e(t[r],r));return n}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t,e){for(var r in e)c(e,r)&&(t[r]=e[r]);return c(e,"toString")&&(t.toString=e.toString),c(e,"valueOf")&&(t.valueOf=e.valueOf),t}function l(t,e,r,n){return Te(t,e,r,n,!0).utc()}function p(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function f(t){if(null==t._isValid){var r=p(t),n=e.call(r.parsedDateParts,function(t){return null!=t}),o=!isNaN(t._d.getTime())&&r.overflow<0&&!r.empty&&!r.invalidMonth&&!r.invalidWeekday&&!r.weekdayMismatch&&!r.nullInput&&!r.invalidFormat&&!r.userInvalidated&&(!r.meridiem||r.meridiem&&n);if(t._strict&&(o=o&&0===r.charsLeftOver&&0===r.unusedTokens.length&&void 0===r.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return o;t._isValid=o}return t._isValid}function d(t){var e=l(NaN);return null!=t?h(p(e),t):p(e).userInvalidated=!0,e}e=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),r=e.length>>>0,n=0;n<r;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var _=r.momentProperties=[];function m(t,e){var r,n,o;if(i(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),i(e._i)||(t._i=e._i),i(e._f)||(t._f=e._f),i(e._l)||(t._l=e._l),i(e._strict)||(t._strict=e._strict),i(e._tzm)||(t._tzm=e._tzm),i(e._isUTC)||(t._isUTC=e._isUTC),i(e._offset)||(t._offset=e._offset),i(e._pf)||(t._pf=p(e)),i(e._locale)||(t._locale=e._locale),_.length>0)for(r=0;r<_.length;r++)i(o=e[n=_[r]])||(t[n]=o);return t}var g=!1;function y(t){m(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===g&&(g=!0,r.updateOffset(this),g=!1)}function v(t){return t instanceof y||null!=t&&null!=t._isAMomentObject}function w(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function b(t){var e=+t,r=0;return 0!==e&&isFinite(e)&&(r=w(e)),r}function k(t,e,r){var n,o=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),s=0;for(n=0;n<o;n++)(r&&t[n]!==e[n]||!r&&b(t[n])!==b(e[n]))&&s++;return s+i}function O(t){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function A(t,e){var n=!0;return h(function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){for(var o,i=[],s=0;s<arguments.length;s++){if(o="","object"==typeof arguments[s]){for(var a in o+="\n["+s+"] ",arguments[0])o+=a+": "+arguments[0][a]+", ";o=o.slice(0,-2)}else o=arguments[s];i.push(o)}O(t+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)},e)}var S,x={};function T(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),x[t]||(O(e),x[t]=!0)}function E(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function P(t,e){var r,n=h({},t);for(r in e)c(e,r)&&(o(t[r])&&o(e[r])?(n[r]={},h(n[r],t[r]),h(n[r],e[r])):null!=e[r]?n[r]=e[r]:delete n[r]);for(r in t)c(t,r)&&!c(e,r)&&o(t[r])&&(n[r]=h({},n[r]));return n}function I(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,S=Object.keys?Object.keys:function(t){var e,r=[];for(e in t)c(t,e)&&r.push(e);return r};var j={};function D(t,e){var r=t.toLowerCase();j[r]=j[r+"s"]=j[e]=t}function C(t){return"string"==typeof t?j[t]||j[t.toLowerCase()]:void 0}function M(t){var e,r,n={};for(r in t)c(t,r)&&(e=C(r))&&(n[e]=t[r]);return n}var R={};function Y(t,e){R[t]=e}function L(t,e,r){var n=""+Math.abs(t),o=e-n.length;return(t>=0?r?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Q=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},U={};function z(t,e,r,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),t&&(U[t]=o),e&&(U[e[0]]=function(){return L(o.apply(this,arguments),e[1],e[2])}),r&&(U[r]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function H(t,e){return t.isValid()?(e=q(e,t.localeData()),F[e]=F[e]||function(t){var e,r,n,o=t.match(N);for(e=0,r=o.length;e<r;e++)U[o[e]]?o[e]=U[o[e]]:o[e]=(n=o[e]).match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"");return function(e){var n,i="";for(n=0;n<r;n++)i+=E(o[n])?o[n].call(e,t):o[n];return i}}(e),F[e](t)):t.localeData().invalidDate()}function q(t,e){var r=5;function n(t){return e.longDateFormat(t)||t}for(Q.lastIndex=0;r>=0&&Q.test(t);)t=t.replace(Q,n),Q.lastIndex=0,r-=1;return t}var G=/\d/,W=/\d\d/,B=/\d{3}/,V=/\d{4}/,J=/[+-]?\d{6}/,$=/\d\d?/,Z=/\d\d\d\d?/,K=/\d\d\d\d\d\d?/,X=/\d{1,3}/,tt=/\d{1,4}/,et=/[+-]?\d{1,6}/,rt=/\d+/,nt=/[+-]?\d+/,ot=/Z|[+-]\d\d:?\d\d/gi,it=/Z|[+-]\d\d(?::?\d\d)?/gi,st=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,at={};function ut(t,e,r){at[t]=E(e)?e:function(t,n){return t&&r?r:e}}function ct(t,e){return c(at,t)?at[t](e._strict,e._locale):new RegExp(ht(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,r,n,o){return e||r||n||o})))}function ht(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var lt={};function pt(t,e){var r,n=e;for("string"==typeof t&&(t=[t]),s(e)&&(n=function(t,r){r[e]=b(t)}),r=0;r<t.length;r++)lt[t[r]]=n}function ft(t,e){pt(t,function(t,r,n,o){n._w=n._w||{},e(t,n._w,n,o)})}function dt(t,e,r){null!=e&&c(lt,t)&&lt[t](e,r._a,r,t)}var _t=0,mt=1,gt=2,yt=3,vt=4,wt=5,bt=6,kt=7,Ot=8;function At(t){return St(t)?366:365}function St(t){return t%4==0&&t%100!=0||t%400==0}z("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),z(0,["YY",2],0,function(){return this.year()%100}),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),D("year","y"),Y("year",1),ut("Y",nt),ut("YY",$,W),ut("YYYY",tt,V),ut("YYYYY",et,J),ut("YYYYYY",et,J),pt(["YYYYY","YYYYYY"],_t),pt("YYYY",function(t,e){e[_t]=2===t.length?r.parseTwoDigitYear(t):b(t)}),pt("YY",function(t,e){e[_t]=r.parseTwoDigitYear(t)}),pt("Y",function(t,e){e[_t]=parseInt(t,10)}),r.parseTwoDigitYear=function(t){return b(t)+(b(t)>68?1900:2e3)};var xt,Tt=Et("FullYear",!0);function Et(t,e){return function(n){return null!=n?(It(this,t,n),r.updateOffset(this,e),this):Pt(this,t)}}function Pt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function It(t,e,r){t.isValid()&&!isNaN(r)&&("FullYear"===e&&St(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](r,t.month(),jt(r,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](r))}function jt(t,e){if(isNaN(t)||isNaN(e))return NaN;var r,n=(e%(r=12)+r)%r;return t+=(e-n)/12,1===n?St(t)?29:28:31-n%7%2}xt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},z("M",["MM",2],"Mo",function(){return this.month()+1}),z("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),z("MMMM",0,0,function(t){return this.localeData().months(this,t)}),D("month","M"),Y("month",8),ut("M",$),ut("MM",$,W),ut("MMM",function(t,e){return e.monthsShortRegex(t)}),ut("MMMM",function(t,e){return e.monthsRegex(t)}),pt(["M","MM"],function(t,e){e[mt]=b(t)-1}),pt(["MMM","MMMM"],function(t,e,r,n){var o=r._locale.monthsParse(t,n,r._strict);null!=o?e[mt]=o:p(r).invalidMonth=t});var Dt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ct="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Mt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Rt(t,e){var r;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=b(e);else if(!s(e=t.localeData().monthsParse(e)))return t;return r=Math.min(t.date(),jt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,r),t}function Yt(t){return null!=t?(Rt(this,t),r.updateOffset(this,!0),this):Pt(this,"Month")}var Lt=st;var Nt=st;function Qt(){function t(t,e){return e.length-t.length}var e,r,n=[],o=[],i=[];for(e=0;e<12;e++)r=l([2e3,e]),n.push(this.monthsShort(r,"")),o.push(this.months(r,"")),i.push(this.months(r,"")),i.push(this.monthsShort(r,""));for(n.sort(t),o.sort(t),i.sort(t),e=0;e<12;e++)n[e]=ht(n[e]),o[e]=ht(o[e]);for(e=0;e<24;e++)i[e]=ht(i[e]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Ft(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function Ut(t,e,r){var n=7+e-r;return-((7+Ft(t,0,n).getUTCDay()-e)%7)+n-1}function zt(t,e,r,n,o){var i,s,a=1+7*(e-1)+(7+r-n)%7+Ut(t,n,o);return a<=0?s=At(i=t-1)+a:a>At(t)?(i=t+1,s=a-At(t)):(i=t,s=a),{year:i,dayOfYear:s}}function Ht(t,e,r){var n,o,i=Ut(t.year(),e,r),s=Math.floor((t.dayOfYear()-i-1)/7)+1;return s<1?n=s+qt(o=t.year()-1,e,r):s>qt(t.year(),e,r)?(n=s-qt(t.year(),e,r),o=t.year()+1):(o=t.year(),n=s),{week:n,year:o}}function qt(t,e,r){var n=Ut(t,e,r),o=Ut(t+1,e,r);return(At(t)-n+o)/7}z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),D("week","w"),D("isoWeek","W"),Y("week",5),Y("isoWeek",5),ut("w",$),ut("ww",$,W),ut("W",$),ut("WW",$,W),ft(["w","ww","W","WW"],function(t,e,r,n){e[n.substr(0,1)]=b(t)});z("d",0,"do","day"),z("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),z("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),z("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),D("day","d"),D("weekday","e"),D("isoWeekday","E"),Y("day",11),Y("weekday",11),Y("isoWeekday",11),ut("d",$),ut("e",$),ut("E",$),ut("dd",function(t,e){return e.weekdaysMinRegex(t)}),ut("ddd",function(t,e){return e.weekdaysShortRegex(t)}),ut("dddd",function(t,e){return e.weekdaysRegex(t)}),ft(["dd","ddd","dddd"],function(t,e,r,n){var o=r._locale.weekdaysParse(t,n,r._strict);null!=o?e.d=o:p(r).invalidWeekday=t}),ft(["d","e","E"],function(t,e,r,n){e[n]=b(t)});var Gt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Wt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var Bt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var Vt=st;var Jt=st;var $t=st;function Zt(){function t(t,e){return e.length-t.length}var e,r,n,o,i,s=[],a=[],u=[],c=[];for(e=0;e<7;e++)r=l([2e3,1]).day(e),n=this.weekdaysMin(r,""),o=this.weekdaysShort(r,""),i=this.weekdays(r,""),s.push(n),a.push(o),u.push(i),c.push(n),c.push(o),c.push(i);for(s.sort(t),a.sort(t),u.sort(t),c.sort(t),e=0;e<7;e++)a[e]=ht(a[e]),u[e]=ht(u[e]),c[e]=ht(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Kt(){return this.hours()%12||12}function Xt(t,e){z(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function te(t,e){return e._meridiemParse}z("H",["HH",2],0,"hour"),z("h",["hh",2],0,Kt),z("k",["kk",2],0,function(){return this.hours()||24}),z("hmm",0,0,function(){return""+Kt.apply(this)+L(this.minutes(),2)}),z("hmmss",0,0,function(){return""+Kt.apply(this)+L(this.minutes(),2)+L(this.seconds(),2)}),z("Hmm",0,0,function(){return""+this.hours()+L(this.minutes(),2)}),z("Hmmss",0,0,function(){return""+this.hours()+L(this.minutes(),2)+L(this.seconds(),2)}),Xt("a",!0),Xt("A",!1),D("hour","h"),Y("hour",13),ut("a",te),ut("A",te),ut("H",$),ut("h",$),ut("k",$),ut("HH",$,W),ut("hh",$,W),ut("kk",$,W),ut("hmm",Z),ut("hmmss",K),ut("Hmm",Z),ut("Hmmss",K),pt(["H","HH"],yt),pt(["k","kk"],function(t,e,r){var n=b(t);e[yt]=24===n?0:n}),pt(["a","A"],function(t,e,r){r._isPm=r._locale.isPM(t),r._meridiem=t}),pt(["h","hh"],function(t,e,r){e[yt]=b(t),p(r).bigHour=!0}),pt("hmm",function(t,e,r){var n=t.length-2;e[yt]=b(t.substr(0,n)),e[vt]=b(t.substr(n)),p(r).bigHour=!0}),pt("hmmss",function(t,e,r){var n=t.length-4,o=t.length-2;e[yt]=b(t.substr(0,n)),e[vt]=b(t.substr(n,2)),e[wt]=b(t.substr(o)),p(r).bigHour=!0}),pt("Hmm",function(t,e,r){var n=t.length-2;e[yt]=b(t.substr(0,n)),e[vt]=b(t.substr(n))}),pt("Hmmss",function(t,e,r){var n=t.length-4,o=t.length-2;e[yt]=b(t.substr(0,n)),e[vt]=b(t.substr(n,2)),e[wt]=b(t.substr(o))});var ee,re=Et("Hours",!0),ne={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ct,monthsShort:Mt,week:{dow:0,doy:6},weekdays:Gt,weekdaysMin:Bt,weekdaysShort:Wt,meridiemParse:/[ap]\.?m?\.?/i},oe={},ie={};function se(t){return t?t.toLowerCase().replace("_","-"):t}function ae(t){var e=null;if(!oe[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=ee._abbr,require("./locale/"+t),ue(e)}catch(t){}return oe[t]}function ue(t,e){var r;return t&&((r=i(e)?he(t):ce(t,e))?ee=r:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ee._abbr}function ce(t,e){if(null!==e){var r,n=ne;if(e.abbr=t,null!=oe[t])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=oe[t]._config;else if(null!=e.parentLocale)if(null!=oe[e.parentLocale])n=oe[e.parentLocale]._config;else{if(null==(r=ae(e.parentLocale)))return ie[e.parentLocale]||(ie[e.parentLocale]=[]),ie[e.parentLocale].push({name:t,config:e}),null;n=r._config}return oe[t]=new I(P(n,e)),ie[t]&&ie[t].forEach(function(t){ce(t.name,t.config)}),ue(t),oe[t]}return delete oe[t],null}function he(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ee;if(!n(t)){if(e=ae(t))return e;t=[t]}return function(t){for(var e,r,n,o,i=0;i<t.length;){for(e=(o=se(t[i]).split("-")).length,r=(r=se(t[i+1]))?r.split("-"):null;e>0;){if(n=ae(o.slice(0,e).join("-")))return n;if(r&&r.length>=e&&k(o,r,!0)>=e-1)break;e--}i++}return ee}(t)}function le(t){var e,r=t._a;return r&&-2===p(t).overflow&&(e=r[mt]<0||r[mt]>11?mt:r[gt]<1||r[gt]>jt(r[_t],r[mt])?gt:r[yt]<0||r[yt]>24||24===r[yt]&&(0!==r[vt]||0!==r[wt]||0!==r[bt])?yt:r[vt]<0||r[vt]>59?vt:r[wt]<0||r[wt]>59?wt:r[bt]<0||r[bt]>999?bt:-1,p(t)._overflowDayOfYear&&(e<_t||e>gt)&&(e=gt),p(t)._overflowWeeks&&-1===e&&(e=kt),p(t)._overflowWeekday&&-1===e&&(e=Ot),p(t).overflow=e),t}function pe(t,e,r){return null!=t?t:null!=e?e:r}function fe(t){var e,n,o,i,s,a=[];if(!t._d){for(o=function(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[gt]&&null==t._a[mt]&&function(t){var e,r,n,o,i,s,a,u;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)i=1,s=4,r=pe(e.GG,t._a[_t],Ht(Ee(),1,4).year),n=pe(e.W,1),((o=pe(e.E,1))<1||o>7)&&(u=!0);else{i=t._locale._week.dow,s=t._locale._week.doy;var c=Ht(Ee(),i,s);r=pe(e.gg,t._a[_t],c.year),n=pe(e.w,c.week),null!=e.d?((o=e.d)<0||o>6)&&(u=!0):null!=e.e?(o=e.e+i,(e.e<0||e.e>6)&&(u=!0)):o=i}n<1||n>qt(r,i,s)?p(t)._overflowWeeks=!0:null!=u?p(t)._overflowWeekday=!0:(a=zt(r,n,o,i,s),t._a[_t]=a.year,t._dayOfYear=a.dayOfYear)}(t),null!=t._dayOfYear&&(s=pe(t._a[_t],o[_t]),(t._dayOfYear>At(s)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),n=Ft(s,0,t._dayOfYear),t._a[mt]=n.getUTCMonth(),t._a[gt]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=o[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[yt]&&0===t._a[vt]&&0===t._a[wt]&&0===t._a[bt]&&(t._nextDay=!0,t._a[yt]=0),t._d=(t._useUTC?Ft:function(t,e,r,n,o,i,s){var a=new Date(t,e,r,n,o,i,s);return t<100&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}).apply(null,a),i=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[yt]=24),t._w&&void 0!==t._w.d&&t._w.d!==i&&(p(t).weekdayMismatch=!0)}}var de=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_e=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,me=/Z|[+-]\d\d(?::?\d\d)?/,ge=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ye=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ve=/^\/?Date\((\-?\d+)/i;function we(t){var e,r,n,o,i,s,a=t._i,u=de.exec(a)||_e.exec(a);if(u){for(p(t).iso=!0,e=0,r=ge.length;e<r;e++)if(ge[e][1].exec(u[1])){o=ge[e][0],n=!1!==ge[e][2];break}if(null==o)return void(t._isValid=!1);if(u[3]){for(e=0,r=ye.length;e<r;e++)if(ye[e][1].exec(u[3])){i=(u[2]||" ")+ye[e][0];break}if(null==i)return void(t._isValid=!1)}if(!n&&null!=i)return void(t._isValid=!1);if(u[4]){if(!me.exec(u[4]))return void(t._isValid=!1);s="Z"}t._f=o+(i||"")+(s||""),Se(t)}else t._isValid=!1}var be=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function ke(t,e,r,n,o,i){var s=[function(t){var e=parseInt(t,10);if(e<=49)return 2e3+e;if(e<=999)return 1900+e;return e}(t),Mt.indexOf(e),parseInt(r,10),parseInt(n,10),parseInt(o,10)];return i&&s.push(parseInt(i,10)),s}var Oe={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ae(t){var e=be.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim());if(e){var r=ke(e[4],e[3],e[2],e[5],e[6],e[7]);if(!function(t,e,r){return!t||Wt.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(p(r).weekdayMismatch=!0,r._isValid=!1,!1)}(e[1],r,t))return;t._a=r,t._tzm=function(t,e,r){if(t)return Oe[t];if(e)return 0;var n=parseInt(r,10),o=n%100;return(n-o)/100*60+o}(e[8],e[9],e[10]),t._d=Ft.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function Se(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],p(t).empty=!0;var e,n,o,i,s,a=""+t._i,u=a.length,c=0;for(o=q(t._f,t._locale).match(N)||[],e=0;e<o.length;e++)i=o[e],(n=(a.match(ct(i,t))||[])[0])&&((s=a.substr(0,a.indexOf(n))).length>0&&p(t).unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),c+=n.length),U[i]?(n?p(t).empty=!1:p(t).unusedTokens.push(i),dt(i,n,t)):t._strict&&!n&&p(t).unusedTokens.push(i);p(t).charsLeftOver=u-c,a.length>0&&p(t).unusedInput.push(a),t._a[yt]<=12&&!0===p(t).bigHour&&t._a[yt]>0&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[yt]=function(t,e,r){var n;if(null==r)return e;return null!=t.meridiemHour?t.meridiemHour(e,r):null!=t.isPM?((n=t.isPM(r))&&e<12&&(e+=12),n||12!==e||(e=0),e):e}(t._locale,t._a[yt],t._meridiem),fe(t),le(t)}else Ae(t);else we(t)}function xe(t){var e=t._i,c=t._f;return t._locale=t._locale||he(t._l),null===e||void 0===c&&""===e?d({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),v(e)?new y(le(e)):(a(e)?t._d=e:n(c)?function(t){var e,r,n,o,i;if(0===t._f.length)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++)i=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],Se(e),f(e)&&(i+=p(e).charsLeftOver,i+=10*p(e).unusedTokens.length,p(e).score=i,(null==n||i<n)&&(n=i,r=e));h(t,r||e)}(t):c?Se(t):function(t){var e=t._i;i(e)?t._d=new Date(r.now()):a(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=ve.exec(t._i);null===e?(we(t),!1===t._isValid&&(delete t._isValid,Ae(t),!1===t._isValid&&(delete t._isValid,r.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):n(e)?(t._a=u(e.slice(0),function(t){return parseInt(t,10)}),fe(t)):o(e)?function(t){if(!t._d){var e=M(t._i);t._a=u([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),fe(t)}}(t):s(e)?t._d=new Date(e):r.createFromInputFallback(t)}(t),f(t)||(t._d=null),t))}function Te(t,e,r,i,s){var a,u={};return!0!==r&&!1!==r||(i=r,r=void 0),(o(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||n(t)&&0===t.length)&&(t=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=r,u._i=t,u._f=e,u._strict=i,(a=new y(le(xe(u))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function Ee(t,e,r,n){return Te(t,e,r,n,!1)}r.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),r.ISO_8601=function(){},r.RFC_2822=function(){};var Pe=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ee.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:d()}),Ie=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Ee.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:d()});function je(t,e){var r,o;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return Ee();for(r=e[0],o=1;o<e.length;++o)e[o].isValid()&&!e[o][t](r)||(r=e[o]);return r}var De=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ce(t){var e=M(t),r=e.year||0,n=e.quarter||0,o=e.month||0,i=e.week||0,s=e.day||0,a=e.hour||0,u=e.minute||0,c=e.second||0,h=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===xt.call(De,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var r=!1,n=0;n<De.length;++n)if(t[De[n]]){if(r)return!1;parseFloat(t[De[n]])!==b(t[De[n]])&&(r=!0)}return!0}(e),this._milliseconds=+h+1e3*c+6e4*u+1e3*a*60*60,this._days=+s+7*i,this._months=+o+3*n+12*r,this._data={},this._locale=he(),this._bubble()}function Me(t){return t instanceof Ce}function Re(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ye(t,e){z(t,0,0,function(){var t=this.utcOffset(),r="+";return t<0&&(t=-t,r="-"),r+L(~~(t/60),2)+e+L(~~t%60,2)})}Ye("Z",":"),Ye("ZZ",""),ut("Z",it),ut("ZZ",it),pt(["Z","ZZ"],function(t,e,r){r._useUTC=!0,r._tzm=Ne(it,t)});var Le=/([\+\-]|\d\d)/gi;function Ne(t,e){var r=(e||"").match(t);if(null===r)return null;var n=((r[r.length-1]||[])+"").match(Le)||["-",0,0],o=60*n[1]+b(n[2]);return 0===o?0:"+"===n[0]?o:-o}function Qe(t,e){var n,o;return e._isUTC?(n=e.clone(),o=(v(t)||a(t)?t.valueOf():Ee(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+o),r.updateOffset(n,!1),n):Ee(t).local()}function Fe(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Ue(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}r.updateOffset=function(){};var ze=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,He=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function qe(t,e){var r,n,o,i=t,a=null;return Me(t)?i={ms:t._milliseconds,d:t._days,M:t._months}:s(t)?(i={},e?i[e]=t:i.milliseconds=t):(a=ze.exec(t))?(r="-"===a[1]?-1:1,i={y:0,d:b(a[gt])*r,h:b(a[yt])*r,m:b(a[vt])*r,s:b(a[wt])*r,ms:b(Re(1e3*a[bt]))*r}):(a=He.exec(t))?(r="-"===a[1]?-1:(a[1],1),i={y:Ge(a[2],r),M:Ge(a[3],r),w:Ge(a[4],r),d:Ge(a[5],r),h:Ge(a[6],r),m:Ge(a[7],r),s:Ge(a[8],r)}):null==i?i={}:"object"==typeof i&&("from"in i||"to"in i)&&(o=function(t,e){var r;if(!t.isValid()||!e.isValid())return{milliseconds:0,months:0};e=Qe(e,t),t.isBefore(e)?r=We(t,e):((r=We(e,t)).milliseconds=-r.milliseconds,r.months=-r.months);return r}(Ee(i.from),Ee(i.to)),(i={}).ms=o.milliseconds,i.M=o.months),n=new Ce(i),Me(t)&&c(t,"_locale")&&(n._locale=t._locale),n}function Ge(t,e){var r=t&&parseFloat(t.replace(",","."));return(isNaN(r)?0:r)*e}function We(t,e){var r={milliseconds:0,months:0};return r.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(r.months,"M").isAfter(e)&&--r.months,r.milliseconds=+e-+t.clone().add(r.months,"M"),r}function Be(t,e){return function(r,n){var o;return null===n||isNaN(+n)||(T(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=r,r=n,n=o),Ve(this,qe(r="string"==typeof r?+r:r,n),t),this}}function Ve(t,e,n,o){var i=e._milliseconds,s=Re(e._days),a=Re(e._months);t.isValid()&&(o=null==o||o,a&&Rt(t,Pt(t,"Month")+a*n),s&&It(t,"Date",Pt(t,"Date")+s*n),i&&t._d.setTime(t._d.valueOf()+i*n),o&&r.updateOffset(t,s||a))}qe.fn=Ce.prototype,qe.invalid=function(){return qe(NaN)};var Je=Be(1,"add"),$e=Be(-1,"subtract");function Ze(t,e){var r=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(r,"months");return-(r+(e-n<0?(e-n)/(n-t.clone().add(r-1,"months")):(e-n)/(t.clone().add(r+1,"months")-n)))||0}function Ke(t){var e;return void 0===t?this._locale._abbr:(null!=(e=he(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xe=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function tr(){return this._locale}function er(t,e){z(0,[t,t.length],0,e)}function rr(t,e,r,n,o){var i;return null==t?Ht(this,n,o).year:(e>(i=qt(t,n,o))&&(e=i),function(t,e,r,n,o){var i=zt(t,e,r,n,o),s=Ft(i.year,0,i.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}.call(this,t,e,r,n,o))}z(0,["gg",2],0,function(){return this.weekYear()%100}),z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),er("gggg","weekYear"),er("ggggg","weekYear"),er("GGGG","isoWeekYear"),er("GGGGG","isoWeekYear"),D("weekYear","gg"),D("isoWeekYear","GG"),Y("weekYear",1),Y("isoWeekYear",1),ut("G",nt),ut("g",nt),ut("GG",$,W),ut("gg",$,W),ut("GGGG",tt,V),ut("gggg",tt,V),ut("GGGGG",et,J),ut("ggggg",et,J),ft(["gggg","ggggg","GGGG","GGGGG"],function(t,e,r,n){e[n.substr(0,2)]=b(t)}),ft(["gg","GG"],function(t,e,n,o){e[o]=r.parseTwoDigitYear(t)}),z("Q",0,"Qo","quarter"),D("quarter","Q"),Y("quarter",7),ut("Q",G),pt("Q",function(t,e){e[mt]=3*(b(t)-1)}),z("D",["DD",2],"Do","date"),D("date","D"),Y("date",9),ut("D",$),ut("DD",$,W),ut("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),pt(["D","DD"],gt),pt("Do",function(t,e){e[gt]=b(t.match($)[0])});var nr=Et("Date",!0);z("DDD",["DDDD",3],"DDDo","dayOfYear"),D("dayOfYear","DDD"),Y("dayOfYear",4),ut("DDD",X),ut("DDDD",B),pt(["DDD","DDDD"],function(t,e,r){r._dayOfYear=b(t)}),z("m",["mm",2],0,"minute"),D("minute","m"),Y("minute",14),ut("m",$),ut("mm",$,W),pt(["m","mm"],vt);var or=Et("Minutes",!1);z("s",["ss",2],0,"second"),D("second","s"),Y("second",15),ut("s",$),ut("ss",$,W),pt(["s","ss"],wt);var ir,sr=Et("Seconds",!1);for(z("S",0,0,function(){return~~(this.millisecond()/100)}),z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,function(){return 10*this.millisecond()}),z(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),z(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),z(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),z(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),z(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),D("millisecond","ms"),Y("millisecond",16),ut("S",X,G),ut("SS",X,W),ut("SSS",X,B),ir="SSSS";ir.length<=9;ir+="S")ut(ir,rt);function ar(t,e){e[bt]=b(1e3*("0."+t))}for(ir="S";ir.length<=9;ir+="S")pt(ir,ar);var ur=Et("Milliseconds",!1);z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var cr=y.prototype;function hr(t){return t}cr.add=Je,cr.calendar=function(t,e){var n=t||Ee(),o=Qe(n,this).startOf("day"),i=r.calendarFormat(this,o)||"sameElse",s=e&&(E(e[i])?e[i].call(this,n):e[i]);return this.format(s||this.localeData().calendar(i,this,Ee(n)))},cr.clone=function(){return new y(this)},cr.diff=function(t,e,r){var n,o,i;if(!this.isValid())return NaN;if(!(n=Qe(t,this)).isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),e=C(e)){case"year":i=Ze(this,n)/12;break;case"month":i=Ze(this,n);break;case"quarter":i=Ze(this,n)/3;break;case"second":i=(this-n)/1e3;break;case"minute":i=(this-n)/6e4;break;case"hour":i=(this-n)/36e5;break;case"day":i=(this-n-o)/864e5;break;case"week":i=(this-n-o)/6048e5;break;default:i=this-n}return r?i:w(i)},cr.endOf=function(t){return void 0===(t=C(t))||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))},cr.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=H(this,t);return this.localeData().postformat(e)},cr.from=function(t,e){return this.isValid()&&(v(t)&&t.isValid()||Ee(t).isValid())?qe({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},cr.fromNow=function(t){return this.from(Ee(),t)},cr.to=function(t,e){return this.isValid()&&(v(t)&&t.isValid()||Ee(t).isValid())?qe({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},cr.toNow=function(t){return this.to(Ee(),t)},cr.get=function(t){return E(this[t=C(t)])?this[t]():this},cr.invalidAt=function(){return p(this).overflow},cr.isAfter=function(t,e){var r=v(t)?t:Ee(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=C(i(e)?"millisecond":e))?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(e).valueOf())},cr.isBefore=function(t,e){var r=v(t)?t:Ee(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=C(i(e)?"millisecond":e))?this.valueOf()<r.valueOf():this.clone().endOf(e).valueOf()<r.valueOf())},cr.isBetween=function(t,e,r,n){return("("===(n=n||"()")[0]?this.isAfter(t,r):!this.isBefore(t,r))&&(")"===n[1]?this.isBefore(e,r):!this.isAfter(e,r))},cr.isSame=function(t,e){var r,n=v(t)?t:Ee(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=C(e||"millisecond"))?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf()))},cr.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},cr.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},cr.isValid=function(){return f(this)},cr.lang=Xe,cr.locale=Ke,cr.localeData=tr,cr.max=Ie,cr.min=Pe,cr.parsingFlags=function(){return h({},p(this))},cr.set=function(t,e){if("object"==typeof t)for(var r=function(t){var e=[];for(var r in t)e.push({unit:r,priority:R[r]});return e.sort(function(t,e){return t.priority-e.priority}),e}(t=M(t)),n=0;n<r.length;n++)this[r[n].unit](t[r[n].unit]);else if(E(this[t=C(t)]))return this[t](e);return this},cr.startOf=function(t){switch(t=C(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},cr.subtract=$e,cr.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},cr.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},cr.toDate=function(){return new Date(this.valueOf())},cr.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,r=e?this.clone().utc():this;return r.year()<0||r.year()>9999?H(r,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):E(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(r,"Z")):H(r,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},cr.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var r="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=e+'[")]';return this.format(r+n+"-MM-DD[T]HH:mm:ss.SSS"+o)},cr.toJSON=function(){return this.isValid()?this.toISOString():null},cr.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},cr.unix=function(){return Math.floor(this.valueOf()/1e3)},cr.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},cr.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},cr.year=Tt,cr.isLeapYear=function(){return St(this.year())},cr.weekYear=function(t){return rr.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},cr.isoWeekYear=function(t){return rr.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},cr.quarter=cr.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},cr.month=Yt,cr.daysInMonth=function(){return jt(this.year(),this.month())},cr.week=cr.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},cr.isoWeek=cr.isoWeeks=function(t){var e=Ht(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},cr.weeksInYear=function(){var t=this.localeData()._week;return qt(this.year(),t.dow,t.doy)},cr.isoWeeksInYear=function(){return qt(this.year(),1,4)},cr.date=nr,cr.day=cr.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},cr.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},cr.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},cr.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},cr.hour=cr.hours=re,cr.minute=cr.minutes=or,cr.second=cr.seconds=sr,cr.millisecond=cr.milliseconds=ur,cr.utcOffset=function(t,e,n){var o,i=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Ne(it,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(o=Fe(this)),this._offset=t,this._isUTC=!0,null!=o&&this.add(o,"m"),i!==t&&(!e||this._changeInProgress?Ve(this,qe(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:Fe(this)},cr.utc=function(t){return this.utcOffset(0,t)},cr.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Fe(this),"m")),this},cr.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ne(ot,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},cr.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Ee(t).utcOffset():0,(this.utcOffset()-t)%60==0)},cr.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},cr.isLocal=function(){return!!this.isValid()&&!this._isUTC},cr.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},cr.isUtc=Ue,cr.isUTC=Ue,cr.zoneAbbr=function(){return this._isUTC?"UTC":""},cr.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},cr.dates=A("dates accessor is deprecated. Use date instead.",nr),cr.months=A("months accessor is deprecated. Use month instead",Yt),cr.years=A("years accessor is deprecated. Use year instead",Tt),cr.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),cr.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!i(this._isDSTShifted))return this._isDSTShifted;var t={};if(m(t,this),(t=xe(t))._a){var e=t._isUTC?l(t._a):Ee(t._a);this._isDSTShifted=this.isValid()&&k(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var lr=I.prototype;function pr(t,e,r,n){var o=he(),i=l().set(n,e);return o[r](i,t)}function fr(t,e,r){if(s(t)&&(e=t,t=void 0),t=t||"",null!=e)return pr(t,e,r,"month");var n,o=[];for(n=0;n<12;n++)o[n]=pr(t,n,r,"month");return o}function dr(t,e,r,n){"boolean"==typeof t?(s(e)&&(r=e,e=void 0),e=e||""):(r=e=t,t=!1,s(e)&&(r=e,e=void 0),e=e||"");var o,i=he(),a=t?i._week.dow:0;if(null!=r)return pr(e,(r+a)%7,n,"day");var u=[];for(o=0;o<7;o++)u[o]=pr(e,(o+a)%7,n,"day");return u}lr.calendar=function(t,e,r){var n=this._calendar[t]||this._calendar.sameElse;return E(n)?n.call(e,r):n},lr.longDateFormat=function(t){var e=this._longDateFormat[t],r=this._longDateFormat[t.toUpperCase()];return e||!r?e:(this._longDateFormat[t]=r.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},lr.invalidDate=function(){return this._invalidDate},lr.ordinal=function(t){return this._ordinal.replace("%d",t)},lr.preparse=hr,lr.postformat=hr,lr.relativeTime=function(t,e,r,n){var o=this._relativeTime[r];return E(o)?o(t,e,r,n):o.replace(/%d/i,t)},lr.pastFuture=function(t,e){var r=this._relativeTime[t>0?"future":"past"];return E(r)?r(e):r.replace(/%s/i,e)},lr.set=function(t){var e,r;for(r in t)E(e=t[r])?this[r]=e:this["_"+r]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},lr.months=function(t,e){return t?n(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Dt).test(e)?"format":"standalone"][t.month()]:n(this._months)?this._months:this._months.standalone},lr.monthsShort=function(t,e){return t?n(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Dt.test(e)?"format":"standalone"][t.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},lr.monthsParse=function(t,e,r){var n,o,i;if(this._monthsParseExact)return function(t,e,r){var n,o,i,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)i=l([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(i,"").toLocaleLowerCase();return r?"MMM"===e?-1!==(o=xt.call(this._shortMonthsParse,s))?o:null:-1!==(o=xt.call(this._longMonthsParse,s))?o:null:"MMM"===e?-1!==(o=xt.call(this._shortMonthsParse,s))?o:-1!==(o=xt.call(this._longMonthsParse,s))?o:null:-1!==(o=xt.call(this._longMonthsParse,s))?o:-1!==(o=xt.call(this._shortMonthsParse,s))?o:null}.call(this,t,e,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=l([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),r||this._monthsParse[n]||(i="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i")),r&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(r&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!r&&this._monthsParse[n].test(t))return n}},lr.monthsRegex=function(t){return this._monthsParseExact?(c(this,"_monthsRegex")||Qt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Nt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},lr.monthsShortRegex=function(t){return this._monthsParseExact?(c(this,"_monthsRegex")||Qt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Lt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},lr.week=function(t){return Ht(t,this._week.dow,this._week.doy).week},lr.firstDayOfYear=function(){return this._week.doy},lr.firstDayOfWeek=function(){return this._week.dow},lr.weekdays=function(t,e){return t?n(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone},lr.weekdaysMin=function(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin},lr.weekdaysShort=function(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort},lr.weekdaysParse=function(t,e,r){var n,o,i;if(this._weekdaysParseExact)return function(t,e,r){var n,o,i,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)i=l([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(i,"").toLocaleLowerCase();return r?"dddd"===e?-1!==(o=xt.call(this._weekdaysParse,s))?o:null:"ddd"===e?-1!==(o=xt.call(this._shortWeekdaysParse,s))?o:null:-1!==(o=xt.call(this._minWeekdaysParse,s))?o:null:"dddd"===e?-1!==(o=xt.call(this._weekdaysParse,s))?o:-1!==(o=xt.call(this._shortWeekdaysParse,s))?o:-1!==(o=xt.call(this._minWeekdaysParse,s))?o:null:"ddd"===e?-1!==(o=xt.call(this._shortWeekdaysParse,s))?o:-1!==(o=xt.call(this._weekdaysParse,s))?o:-1!==(o=xt.call(this._minWeekdaysParse,s))?o:null:-1!==(o=xt.call(this._minWeekdaysParse,s))?o:-1!==(o=xt.call(this._weekdaysParse,s))?o:-1!==(o=xt.call(this._shortWeekdaysParse,s))?o:null}.call(this,t,e,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=l([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(i="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i")),r&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(r&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(r&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!r&&this._weekdaysParse[n].test(t))return n}},lr.weekdaysRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Vt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},lr.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Jt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},lr.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=$t),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},lr.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},lr.meridiem=function(t,e,r){return t>11?r?"pm":"PM":r?"am":"AM"},ue("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===b(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=A("moment.lang is deprecated. Use moment.locale instead.",ue),r.langData=A("moment.langData is deprecated. Use moment.localeData instead.",he);var _r=Math.abs;function mr(t,e,r,n){var o=qe(e,r);return t._milliseconds+=n*o._milliseconds,t._days+=n*o._days,t._months+=n*o._months,t._bubble()}function gr(t){return t<0?Math.floor(t):Math.ceil(t)}function yr(t){return 4800*t/146097}function vr(t){return 146097*t/4800}function wr(t){return function(){return this.as(t)}}var br=wr("ms"),kr=wr("s"),Or=wr("m"),Ar=wr("h"),Sr=wr("d"),xr=wr("w"),Tr=wr("M"),Er=wr("y");function Pr(t){return function(){return this.isValid()?this._data[t]:NaN}}var Ir=Pr("milliseconds"),jr=Pr("seconds"),Dr=Pr("minutes"),Cr=Pr("hours"),Mr=Pr("days"),Rr=Pr("months"),Yr=Pr("years");var Lr=Math.round,Nr={ss:44,s:45,m:45,h:22,d:26,M:11};var Qr=Math.abs;function Fr(t){return(t>0)-(t<0)||+t}function Ur(){if(!this.isValid())return this.localeData().invalidDate();var t,e,r=Qr(this._milliseconds)/1e3,n=Qr(this._days),o=Qr(this._months);e=w((t=w(r/60))/60),r%=60,t%=60;var i=w(o/12),s=o%=12,a=n,u=e,c=t,h=r?r.toFixed(3).replace(/\.?0+$/,""):"",l=this.asSeconds();if(!l)return"P0D";var p=l<0?"-":"",f=Fr(this._months)!==Fr(l)?"-":"",d=Fr(this._days)!==Fr(l)?"-":"",_=Fr(this._milliseconds)!==Fr(l)?"-":"";return p+"P"+(i?f+i+"Y":"")+(s?f+s+"M":"")+(a?d+a+"D":"")+(u||c||h?"T":"")+(u?_+u+"H":"")+(c?_+c+"M":"")+(h?_+h+"S":"")}var zr=Ce.prototype;return zr.isValid=function(){return this._isValid},zr.abs=function(){var t=this._data;return this._milliseconds=_r(this._milliseconds),this._days=_r(this._days),this._months=_r(this._months),t.milliseconds=_r(t.milliseconds),t.seconds=_r(t.seconds),t.minutes=_r(t.minutes),t.hours=_r(t.hours),t.months=_r(t.months),t.years=_r(t.years),this},zr.add=function(t,e){return mr(this,t,e,1)},zr.subtract=function(t,e){return mr(this,t,e,-1)},zr.as=function(t){if(!this.isValid())return NaN;var e,r,n=this._milliseconds;if("month"===(t=C(t))||"year"===t)return e=this._days+n/864e5,r=this._months+yr(e),"month"===t?r:r/12;switch(e=this._days+Math.round(vr(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}},zr.asMilliseconds=br,zr.asSeconds=kr,zr.asMinutes=Or,zr.asHours=Ar,zr.asDays=Sr,zr.asWeeks=xr,zr.asMonths=Tr,zr.asYears=Er,zr.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12):NaN},zr._bubble=function(){var t,e,r,n,o,i=this._milliseconds,s=this._days,a=this._months,u=this._data;return i>=0&&s>=0&&a>=0||i<=0&&s<=0&&a<=0||(i+=864e5*gr(vr(a)+s),s=0,a=0),u.milliseconds=i%1e3,t=w(i/1e3),u.seconds=t%60,e=w(t/60),u.minutes=e%60,r=w(e/60),u.hours=r%24,a+=o=w(yr(s+=w(r/24))),s-=gr(vr(o)),n=w(a/12),a%=12,u.days=s,u.months=a,u.years=n,this},zr.clone=function(){return qe(this)},zr.get=function(t){return t=C(t),this.isValid()?this[t+"s"]():NaN},zr.milliseconds=Ir,zr.seconds=jr,zr.minutes=Dr,zr.hours=Cr,zr.days=Mr,zr.weeks=function(){return w(this.days()/7)},zr.months=Rr,zr.years=Yr,zr.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),r=function(t,e,r){var n=qe(t).abs(),o=Lr(n.as("s")),i=Lr(n.as("m")),s=Lr(n.as("h")),a=Lr(n.as("d")),u=Lr(n.as("M")),c=Lr(n.as("y")),h=o<=Nr.ss&&["s",o]||o<Nr.s&&["ss",o]||i<=1&&["m"]||i<Nr.m&&["mm",i]||s<=1&&["h"]||s<Nr.h&&["hh",s]||a<=1&&["d"]||a<Nr.d&&["dd",a]||u<=1&&["M"]||u<Nr.M&&["MM",u]||c<=1&&["y"]||["yy",c];return h[2]=e,h[3]=+t>0,h[4]=r,function(t,e,r,n,o){return o.relativeTime(e||1,!!r,t,n)}.apply(null,h)}(this,!t,e);return t&&(r=e.pastFuture(+this,r)),e.postformat(r)},zr.toISOString=Ur,zr.toString=Ur,zr.toJSON=Ur,zr.locale=Ke,zr.localeData=tr,zr.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ur),zr.lang=Xe,z("X",0,0,"unix"),z("x",0,0,"valueOf"),ut("x",nt),ut("X",/[+-]?\d+(\.\d{1,3})?/),pt("X",function(t,e,r){r._d=new Date(1e3*parseFloat(t,10))}),pt("x",function(t,e,r){r._d=new Date(b(t))}),r.version="2.22.1",t=Ee,r.fn=cr,r.min=function(){return je("isBefore",[].slice.call(arguments,0))},r.max=function(){return je("isAfter",[].slice.call(arguments,0))},r.now=function(){return Date.now?Date.now():+new Date},r.utc=l,r.unix=function(t){return Ee(1e3*t)},r.months=function(t,e){return fr(t,e,"months")},r.isDate=a,r.locale=ue,r.invalid=d,r.duration=qe,r.isMoment=v,r.weekdays=function(t,e,r){return dr(t,e,r,"weekdays")},r.parseZone=function(){return Ee.apply(null,arguments).parseZone()},r.localeData=he,r.isDuration=Me,r.monthsShort=function(t,e){return fr(t,e,"monthsShort")},r.weekdaysMin=function(t,e,r){return dr(t,e,r,"weekdaysMin")},r.defineLocale=ce,r.updateLocale=function(t,e){if(null!=e){var r,n,o=ne;null!=(n=ae(t))&&(o=n._config),(r=new I(e=P(o,e))).parentLocale=oe[t],oe[t]=r,ue(t)}else null!=oe[t]&&(null!=oe[t].parentLocale?oe[t]=oe[t].parentLocale:null!=oe[t]&&delete oe[t]);return oe[t]},r.locales=function(){return S(oe)},r.weekdaysShort=function(t,e,r){return dr(t,e,r,"weekdaysShort")},r.normalizeUnits=C,r.relativeTimeRounding=function(t){return void 0===t?Lr:"function"==typeof t&&(Lr=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==Nr[t]&&(void 0===e?Nr[t]:(Nr[t]=e,"s"===t&&(Nr.ss=e-1),!0))},r.calendarFormat=function(t,e){var r=t.diff(e,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"},r.prototype=cr,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},r}),function(t,e,r){"use strict";var n={},o=/[\-\[\]{}()*+?.,\\\^$|#\s]/g,i=/%/g,s=/_/g,a=/^(?:AND|OR|NOT)$/i,u=/^(?:!?=|<=?|>=?)$/i;function c(t){var e,r=[];if(void 0!==t){for(Array.isArray(t)||(t=[t]),e=0;e<t.length;e+=1)"object"==typeof t[e]?r[e]=t[e].content:r[e]=t[e];return r}}function h(t,e,r){if(!Array.isArray(t))throw new TypeError("jioquery.sortOn(): Argument 1 is not of type 'array'");return 0===t.length?e:(e.sort(function t(e,r){return function(n,o){var i,s,a,u,h,l,p,f,d,_=r[0][0],m=r[0][1];if("descending"===m)i=1;else{if("ascending"!==m)throw new TypeError("Query.sortFunction(): Argument 2 must be 'ascending' or 'descending'");i=-1}if(void 0!==e&&void 0!==e.key_set&&void 0!==e.key_set[_]&&void 0!==e.key_set[_].cast_to)return p=(s="string"==typeof e.key_set[_].cast_to?e.cast_lookup[e.key_set[_].cast_to]:e.key_set[_].cast_to)(n[_]),"function"==typeof(f=s(o[_])).cmp?0!=(d=i*f.cmp(p))?d:r.length>1?t(e,r.slice(1))(n,o):d:p>f?-i:p<f?i:r.length>1?t(e,r.slice(1))(n,o):0;for(h=c(n[_])||[],l=c(o[_])||[],u=Math.max(h.length,l.length),a=0;a<u;a+=1){if(void 0===h[a])return i;if(void 0===l[a])return-i;if(h[a]>l[a])return-i;if(h[a]<l[a])return i}return r.length>1?t(e,r.slice(1))(n,o):0}}(r,t)),e)}function l(t){!function(t){var e;if(void 0!==t){if("object"!=typeof t)throw new TypeError("Query().create(): key_schema is not of type 'object'");if(void 0===t.key_set)throw new TypeError("Query().create(): key_schema has no 'key_set' property");for(e in t)if(t.hasOwnProperty(e))switch(e){case"key_set":case"cast_lookup":case"match_lookup":break;default:throw new TypeError("Query().create(): key_schema has unknown property '"+e+"'")}}}(t),this._key_schema=t||{}}function p(){}function f(t){return t.replace(o,"\\$&")}function d(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{configurable:!0,enumerable:!1,writable:!0,value:t}})}function _(t,e){if("string"!=typeof t)throw new TypeError("jioquery.searchTextToRegExp(): Argument 1 is not of type 'string'");return!1===e?new RegExp("^"+f(t)+"$"):new RegExp("^"+f(t).replace(i,"[\\s\\S]*").replace(s,".")+"$","i")}function m(t,e){l.call(this,e),this.operator=t.operator,this.query_list=t.query_list||[],this.query_list=this.query_list.map(function(t){return p.create(t,e)})}function g(t){return'"'+function(t){return void 0===t?"undefined":null===t?"null":t.toString()}(t).replace(/"/g,'\\"')+'"'}function y(t){var e=0,r=null,n=null,o="",i="";if("simple"===t.type)return(t.key?t.key+": ":"")+(t.operator||"")+" "+g(t.value);if("complex"===t.type){if(!(r=t.query_list)||0===r.length)return"";if("NOT"===(o=t.operator||""))return"NOT ( "+y({type:"complex",operator:"AND",query_list:r})+" )";if(1===r.length)return y(r[0]);for(i=r[e].key,e=1;e<r.length&&("simple"===r[e].type&&r[e].key===i);e+=1);if(n=[],e===r.length)for(e=0;e<r.length;e+=1)n.push((r[e].operator||"")+" "+g(r[e].value));else for(i="",e=0;e<r.length;e+=1)n.push(y(r[e]));return n.length>1?(i?i+": ":"")+"( "+n.join(" "+o+" ")+" )":(i?i+": ":"")+n[0]}throw new TypeError("This object is not a query")}function v(t,e){l.call(this,e),this.operator=t.operator,this.key=t.key,this.value=t.value}l.prototype.exec=function(e,r){if(!Array.isArray(e))throw new TypeError("Query().exec(): Argument 1 is not of type 'array'");if(void 0===r&&(r={}),"object"!=typeof r)throw new TypeError("Query().exec(): Optional argument 2 is not of type 'object'");var n;for(n=e.length-1;n>=0;n-=1)this.match(e[n])||e.splice(n,1);return r.sort_on&&h(r.sort_on,e,this._key_schema),r.limit&&function(t,e){if(!Array.isArray(t))throw new TypeError("jioquery.limit(): Argument 1 is not of type 'array'");if(!Array.isArray(e))throw new TypeError("jioquery.limit(): Argument 2 is not of type 'array'");e.splice(0,t[0]),t[1]&&e.splice(t[1])}(r.limit,e),function(t,e){var r,n,o;if(!Array.isArray(t))throw new TypeError("jioquery.select(): Argument 1 is not of type Array");if(!Array.isArray(e))throw new TypeError("jioquery.select(): Argument 2 is not of type Array");for(r=0;r<e.length;r+=1){for(o={},n=0;n<t.length;n+=1)e[r].hasOwnProperty([t[n]])&&(o[t[n]]=e[r][t[n]]);for(n in o)if(o.hasOwnProperty(n)){e[r]=o;break}}}(r.select_list||[],e),(new t.Queue).push(function(){return e})},l.prototype.match=function(){return!0},l.prototype.parse=function(e){var r,n=this;return r={parsed:JSON.parse(JSON.stringify(n.serialized()))},(new t.Queue).push(function(){return n.onParseStart(r,e)}).push(function(){return function e(r,o){var i,s=r.parsed,a=new t.Queue;function u(t){a.push(function(){return r.parsed=s.query_list[t],e(r,o)}).push(function(){s.query_list[t]=r.parsed})}if("complex"===s.type){for(i=0;i<s.query_list.length;i+=1)u(i);return a.push(function(){return r.parsed=s,n.onParseComplexQuery(r,o)})}if("simple"===s.type)return n.onParseSimpleQuery(r,o)}(r,e)}).push(function(){return n.onParseEnd(r,e)}).push(function(){return r.parsed})},l.prototype.toString=function(){return""},l.prototype.serialized=function(){},d(m,l),m.prototype.operator="AND",m.prototype.type="complex",m.prototype.match=function(t){var e=this.operator;return a.test(e)||(e="AND"),this[e.toUpperCase()](t)},m.prototype.toString=function(){return y(this.toJSON())},m.prototype.serialized=function(){var t={type:"complex",operator:this.operator,query_list:[]};return this.query_list.forEach(function(e){t.query_list.push("function"==typeof e.toJSON?e.toJSON():e)}),t},m.prototype.toJSON=m.prototype.serialized,m.prototype.AND=function(t){for(var e=!0,r=0;e&&r!==this.query_list.length;)e=this.query_list[r].match(t),r+=1;return e},m.prototype.OR=function(t){for(var e=!1,r=0;!e&&r!==this.query_list.length;)e=this.query_list[r].match(t),r+=1;return e},m.prototype.NOT=function(t){return!this.query_list[0].match(t)},p.create=function(t,e){if(""===t)return new l(e);if("string"==typeof t&&(t=r(t)),"string"==typeof(t||{}).type&&n[t.type])return new n[t.type](t,e);throw new TypeError("QueryFactory.create(): Argument 1 is not a search text or a parsable object")},d(v,l),v.prototype.type="simple",v.prototype.match=function(t){var e,r=null,n=null,o=null,s=null,a=this.operator,c=null,h=this.key;if(u.test(a)||(a=i.test(this.value)?"like":"="),s=this[a],this._key_schema.key_set&&void 0!==this._key_schema.key_set[h]&&(h=this._key_schema.key_set[h]),""===h){for(e in s=this.like,c="%"+this.value+"%",t)if(t.hasOwnProperty(e)&&"__id"!==e&&t[e]&&!0===s(t[e],c))return!0;return!1}if("object"==typeof h){if(function(t){var e;if(void 0===t.read_from)throw new TypeError("Custom key is missing the read_from property");for(e in t)if(t.hasOwnProperty(e))switch(e){case"read_from":case"cast_to":case"equal_match":break;default:throw new TypeError("Custom key has unknown property '"+e+"'")}}(h),r=t[h.read_from],"string"==typeof(n=h.equal_match)&&(n=this._key_schema.match_lookup[n]),void 0!==n&&(s="="===a||"like"===a?n:s),c=this.value,o=h.cast_to){"string"==typeof o&&(o=this._key_schema.cast_lookup[o]);try{c=o(c)}catch(t){c=void 0}try{r=o(r)}catch(t){r=void 0}}}else r=t[h],c=this.value;return void 0!==r&&void 0!==c&&s(r,c)},v.prototype.toString=function(){return y(this.toJSON())},v.prototype.serialized=function(){var t={type:"simple",key:this.key,value:this.value};return void 0!==this.operator&&(t.operator=this.operator),t},v.prototype.toJSON=v.prototype.serialized,v.prototype["="]=function(t,e){var r,n;for(Array.isArray(t)||(t=[t]),n=0;n<t.length;n+=1){if("object"==typeof(r=t[n])&&r.hasOwnProperty("content")&&(r=r.content),"function"==typeof r.cmp)return 0===r.cmp(e);if(e.toString()===r.toString())return!0}return!1},v.prototype.like=function(t,e){var r,n;for(Array.isArray(t)||(t=[t]),n=0;n<t.length;n+=1){if("object"==typeof(r=t[n])&&r.hasOwnProperty("content")&&(r=r.content),"function"==typeof r.cmp)return 0===r.cmp(e);if(_(e.toString()).test(r.toString()))return!0}return!1},v.prototype["!="]=function(t,e){var r,n;for(Array.isArray(t)||(t=[t]),n=0;n<t.length;n+=1){if("object"==typeof(r=t[n])&&r.hasOwnProperty("content")&&(r=r.content),"function"==typeof r.cmp)return 0!==r.cmp(e);if(e.toString()===r.toString())return!1}return!0},v.prototype["<"]=function(t,e){var r;return Array.isArray(t)||(t=[t]),"object"==typeof(r=t[0])&&r.hasOwnProperty("content")&&(r=r.content),"function"==typeof r.cmp?r.cmp(e)<0:r<e},v.prototype["<="]=function(t,e){var r;return Array.isArray(t)||(t=[t]),"object"==typeof(r=t[0])&&r.hasOwnProperty("content")&&(r=r.content),"function"==typeof r.cmp?r.cmp(e)<=0:r<=e},v.prototype[">"]=function(t,e){var r;return Array.isArray(t)||(t=[t]),"object"==typeof(r=t[0])&&r.hasOwnProperty("content")&&(r=r.content),"function"==typeof r.cmp?r.cmp(e)>0:r>e},v.prototype[">="]=function(t,e){var r;return Array.isArray(t)||(t=[t]),"object"==typeof(r=t[0])&&r.hasOwnProperty("content")&&(r=r.content),"function"==typeof r.cmp?r.cmp(e)>=0:r>=e},n.simple=v,n.complex=m,l.parseStringToObject=r,l.objectToSearchText=y,e.Query=l,e.SimpleQuery=v,e.ComplexQuery=m,e.QueryFactory=p}(RSVP,window,parseStringToObject),function(t,e){"use strict";var r,n="millisecond",o={year:0,month:1,day:2,hour:3,minute:4,second:5,millisecond:6};(r=function(t){if(!(this instanceof r))return new r(t);if(t instanceof r)return this.mom=t.mom.clone(),void(this._precision=t._precision);if(void 0===t)return this.mom=e(),void this.setPrecision(n);if(this.mom=null,this._str=t,t.match(/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+\-][0-2]\d:[0-5]\d|Z)/)||t.match(/\d\d\d\d-\d\d-\d\d \d\d:\d\d:\d\d\.\d\d\d/)?(this.mom=e(t),this.setPrecision(n)):t.match(/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+\-][0-2]\d:[0-5]\d|Z)/)||t.match(/\d\d\d\d-\d\d-\d\d \d\d:\d\d:\d\d/)?(this.mom=e(t),this.setPrecision("second")):t.match(/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+\-][0-2]\d:[0-5]\d|Z)/)||t.match(/\d\d\d\d-\d\d-\d\d \d\d:\d\d/)?(this.mom=e(t),this.setPrecision("minute")):t.match(/\d\d\d\d-\d\d-\d\d \d\d/)?(this.mom=e(t),this.setPrecision("hour")):t.match(/\d\d\d\d-\d\d-\d\d/)?(this.mom=e(t),this.setPrecision("day")):t.match(/\d\d\d\d-\d\d/)?(this.mom=e(t),this.setPrecision("month")):t.match(/\d\d\d\d/)&&(this.mom=e(t,"YYYY"),this.setPrecision("year")),!this.mom)throw new Error("Cannot parse: "+t)}).prototype.setPrecision=function(t){this._precision=t},r.prototype.getPrecision=function(){return this._precision},r.prototype.cmp=function(t){var e,r,n=this.mom,i=t.mom,s=(e=this._precision,r=t._precision,o[e]<o[r]?e:r);return n.isBefore(i,s)?-1:n.isSame(i,s)?0:1},r.prototype.toPrecisionString=function(t){var e;if(!(e={millisecond:"YYYY-MM-DD HH:mm:ss.SSS",second:"YYYY-MM-DD HH:mm:ss",minute:"YYYY-MM-DD HH:mm",hour:"YYYY-MM-DD HH",day:"YYYY-MM-DD",month:"YYYY-MM",year:"YYYY"}[t=t||this._precision]))throw new TypeError("Unsupported precision value '"+t+"'");return this.mom.format(e)},r.prototype.toString=function(){return this._str},t.jiodate={JIODate:r,YEAR:"year",MONTH:"month",DAY:"day",HOUR:"hour",MIN:"minute",SEC:"second",MSEC:n}}(window,moment),function(t,e,r,n,o,i,s,a,u){"use strict";void 0===t.DOMError&&(t.DOMError={});var c,h={};function l(t,e){if(void 0!==t&&"string"!=typeof t)throw new TypeError("You must pass a string.");this.message=t||"Default Message",this.status_code=e||500}function p(t,e){var n,o=i(t),s=new a(o.length),c=new u(s);for(n=0;n<o.length;n+=1)c[n]=o.charCodeAt(n);return new r([s],{type:e})}function f(t,e,r){if("string"!=typeof t[0]||""===t[0])throw new c.util.jIOError("Document id must be a non empty string on '"+e.__type+"."+r+"'.",400)}function d(t,e,r){if("string"!=typeof t[1]||""===t[1])throw new c.util.jIOError("Attachment id must be a non empty string on '"+e.__type+"."+r+"'.",400)}function _(t,r,n){var o;try{o=t.apply(n,r)}catch(t){return(new e.Queue).push(function(){return e.reject(t)})}return o instanceof e.Queue?o:(new e.Queue).push(function(){return o})}function m(t,e,r,n){return t.prototype[e]=function(){var t,o,i,s=arguments,a=this;if(void 0!==r&&(t=r.apply(a.__storage,[s,a,e])),void 0===(o=a.__storage[e]))throw new c.util.jIOError("Capacity '"+e+"' is not implemented on '"+a.__type+"'",501);return i=_(o,s,a.__storage),void 0!==n&&i.push(function(e){return n.call(a,s,e,t)}),i},this}function g(t,e){if(!(this instanceof g))return new g;this.__type=t,this.__storage=e}function y(){if(!(this instanceof y))return new y;this.__storage_types={}}l.prototype=new Error,l.prototype.constructor=l,h.jIOError=l,h.ajax=function(t){var r=new XMLHttpRequest;return new e.Promise(function(e,n){var o;if(r.open(t.type||"GET",t.url,!0),r.responseType=t.dataType||"","object"==typeof t.headers&&null!==t.headers)for(o in t.headers)t.headers.hasOwnProperty(o)&&r.setRequestHeader(o,t.headers[o]);if(r.addEventListener("load",function(t){if(t.target.status>=400)return n(t);e(t)}),r.addEventListener("error",n),"object"==typeof t.xhrFields&&null!==t.xhrFields)for(o in t.xhrFields)t.xhrFields.hasOwnProperty(o)&&(r[o]=t.xhrFields[o]);void 0!==t.timeout&&0!==t.timeout&&(r.timeout=t.timeout,r.ontimeout=function(){return n(new c.util.jIOError("Gateway Timeout",504))}),"function"==typeof t.beforeSend&&t.beforeSend(r),r.send(t.data)},function(){r.abort()})},h.readBlobAsText=function(t,r){var n=new s;return new e.Promise(function(e,o){n.addEventListener("load",e),n.addEventListener("error",o),n.readAsText(t,r)},function(){n.abort()})},h.readBlobAsArrayBuffer=function(t){var r=new s;return new e.Promise(function(e,n){r.addEventListener("load",e),r.addEventListener("error",n),r.readAsArrayBuffer(t)},function(){r.abort()})},h.readBlobAsDataURL=function(t){var r=new s;return new e.Promise(function(e,n){r.addEventListener("load",e),r.addEventListener("error",n),r.readAsDataURL(t)},function(){r.abort()})},h.stringify=function t(e){var r,n,o,i,s;if(void 0!==e){if(null===e)return"null";if(e.constructor===Object){for(n=Object.keys(e).sort(),s=[],o=0;o<n.length;o+=1)void 0!==(i=t(e[r=n[o]]))&&s.push(t(r)+":"+i);return"{"+s.join(",")+"}"}if(e.constructor===Array){for(s=[],o=0;o<e.length;o+=1)s.push(t(e[o]));return"["+s.join(",")+"]"}return JSON.stringify(e)}},h.base64toBlob=p,h.dataURItoBlob=function(t){if("data:"===t)return new r;var e=t.split(",")[0].split(":")[1];return e=e.slice(0,e.length-";base64".length),p(t.split(",")[1],e)},m(g,"put",f,function(t){return t[0]}),m(g,"get",f),m(g,"bulk"),m(g,"remove",f,function(t){return t[0]}),g.prototype.post=function(){var t=this,e=arguments;return _(function(){if(void 0===t.__storage.post)throw new c.util.jIOError("Capacity 'post' is not implemented on '"+t.__type+"'",501);return t.__storage.post.apply(t.__storage,e)})},m(g,"putAttachment",function(t,e,n){f(t,e,n),d(t,e,n);var o=t[3]||{};if("string"==typeof t[2])t[2]=new r([t[2]],{type:o._content_type||o._mimetype||"text/plain;charset=utf-8"});else if(!(t[2]instanceof r))throw new c.util.jIOError("Attachment content is not a blob",400)}),m(g,"removeAttachment",function(t,e,r){f(t,e,r),d(t,e,r)}),m(g,"getAttachment",function(t,e,r){var n="blob";return f(t,e,r),d(t,e,r),void 0!==t[2]&&(n=t[2].format||n,delete t[2].format),n},function(t,n,o){var i;if(!(n instanceof r))throw new c.util.jIOError("'getAttachment' ("+t[0]+" , "+t[1]+") on '"+this.__type+"' does not return a Blob.",501);if("blob"===o)i=n;else if("data_url"===o)i=(new e.Queue).push(function(){return c.util.readBlobAsDataURL(n)}).push(function(t){return t.target.result});else if("array_buffer"===o)i=(new e.Queue).push(function(){return c.util.readBlobAsArrayBuffer(n)}).push(function(t){return t.target.result});else if("text"===o)i=(new e.Queue).push(function(){return c.util.readBlobAsText(n)}).push(function(t){return t.target.result});else{if("json"!==o)throw new c.util.jIOError(this.__type+".getAttachment format: '"+o+"' is not supported",400);i=(new e.Queue).push(function(){return c.util.readBlobAsText(n)}).push(function(t){return JSON.parse(t.target.result)})}return i}),g.prototype.buildQuery=function(){var t=this.__storage.buildQuery,e=arguments;if(void 0===t)throw new c.util.jIOError("Capacity 'buildQuery' is not implemented on '"+this.__type+"'",501);return _(t,e,this.__storage)},g.prototype.hasCapacity=function(t){var e=this.__storage.hasCapacity;if(void 0!==this.__storage[t])return!0;if(void 0===e||!e.apply(this.__storage,arguments))throw new c.util.jIOError("Capacity '"+t+"' is not implemented on '"+this.__type+"'",501);return!0},g.prototype.allDocs=function(t){var e=this;return void 0===t&&(t={}),_(function(){if(e.hasCapacity("list")&&(void 0===t.query||e.hasCapacity("query"))&&(void 0===t.sort_on||e.hasCapacity("sort"))&&(void 0===t.group_by||e.hasCapacity("group"))&&(void 0===t.select_list||e.hasCapacity("select"))&&(void 0===t.include_docs||e.hasCapacity("include"))&&(void 0===t.limit||e.hasCapacity("limit")))return e.buildQuery(t).push(function(t){return{data:{rows:t,total_rows:t.length}}})})},m(g,"allAttachments",f),m(g,"repair"),g.prototype.repair=function(){var t=this,e=arguments;return _(function(){if(void 0!==t.__storage.repair)return t.__storage.repair.apply(t.__storage,e)})},y.prototype.createJIO=function(t,e){if("string"!=typeof t.type)throw new TypeError("Invalid storage description");if(!this.__storage_types[t.type])throw new TypeError("Unknown storage '"+t.type+"'");return new g(t.type,new this.__storage_types[t.type](t,e))},y.prototype.addStorage=function(t,e){if("string"!=typeof t)throw new TypeError("jIO.addStorage(): Argument 1 is not of type 'string'");if("function"!=typeof e)throw new TypeError("jIO.addStorage(): Argument 2 is not of type 'function'");if(void 0!==this.__storage_types[t])throw new TypeError("jIO.addStorage(): Storage type already exists");this.__storage_types[t]=e},y.prototype.util=h,y.prototype.QueryFactory=n,y.prototype.Query=o,c=new y,t.jIO=c}(window,RSVP,Blob,QueryFactory,Query,atob,FileReader,ArrayBuffer,Uint8Array),function(){if("undefined"!=typeof module?module.exports=n:"undefined"!=typeof window&&(window.Rusha=n),"undefined"!=typeof FileReaderSync){var t=new FileReaderSync,e=new n(4194304);self.onmessage=function(t){var r,n=t.data.data;try{r=e.digest(n),self.postMessage({id:t.data.id,hash:r})}catch(e){self.postMessage({id:t.data.id,error:e.name})}}}var r={getDataType:function(t){if("string"==typeof t)return"string";if(t instanceof Array)return"array";if("undefined"!=typeof global&&global.Buffer&&global.Buffer.isBuffer(t))return"buffer";if(t instanceof ArrayBuffer)return"arraybuffer";if(t.buffer instanceof ArrayBuffer)return"view";if(t instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};function n(e){"use strict";var n={fill:0},o=function(t){for(t+=9;t%64>0;t+=1);return t},i=function(t,e,r,n,o){var i,s=this,a=o%4,u=n%4,c=n-u;if(c>0)switch(a){case 0:t[o+3|0]=s[r];case 1:t[o+2|0]=s[r+1];case 2:t[o+1|0]=s[r+2];case 3:t[0|o]=s[r+3]}for(i=4-a;i<c;i=i+=4)e[o+i>>2]=s[r+i]<<24|s[r+i+1]<<16|s[r+i+2]<<8|s[r+i+3];switch(u){case 3:t[o+c+1|0]=s[r+c+2];case 2:t[o+c+2|0]=s[r+c+1];case 1:t[o+c+3|0]=s[r+c]}},s=function(e){switch(r.getDataType(e)){case"string":return function(t,e,r,n,o){var i,s=this,a=o%4,u=n%4,c=n-u;if(c>0)switch(a){case 0:t[o+3|0]=s.charCodeAt(r);case 1:t[o+2|0]=s.charCodeAt(r+1);case 2:t[o+1|0]=s.charCodeAt(r+2);case 3:t[0|o]=s.charCodeAt(r+3)}for(i=a;i<c;i=i+4|0)e[o+i>>2]=s.charCodeAt(r+i)<<24|s.charCodeAt(r+i+1)<<16|s.charCodeAt(r+i+2)<<8|s.charCodeAt(r+i+3);switch(u){case 3:t[o+c+1|0]=s.charCodeAt(r+c+2);case 2:t[o+c+2|0]=s.charCodeAt(r+c+1);case 1:t[o+c+3|0]=s.charCodeAt(r+c)}}.bind(e);case"array":case"buffer":return i.bind(e);case"arraybuffer":return i.bind(new Uint8Array(e));case"view":return i.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return function(e,r,n,o,i){var s,a=i%4,u=o%4,c=o-u,h=new Uint8Array(t.readAsArrayBuffer(this.slice(n,n+o)));if(c>0)switch(a){case 0:e[i+3|0]=h[0];case 1:e[i+2|0]=h[1];case 2:e[i+1|0]=h[2];case 3:e[0|i]=h[3]}for(s=4-a;s<c;s=s+=4)r[i+s>>2]=h[s]<<24|h[s+1]<<16|h[s+2]<<8|h[s+3];switch(u){case 3:e[i+c+1|0]=h[c+2];case 2:e[i+c+2|0]=h[c+1];case 1:e[i+c+3|0]=h[c]}}.bind(e)}};!function(t){if(t%64>0)throw new Error("Chunk size must be a multiple of 128 bit");n.maxChunkLen=t,n.padMaxChunkLen=o(t),n.heap=new ArrayBuffer(function(t){var e;if(t<=65536)return 65536;if(t<16777216)for(e=1;e<t;e<<=1);else for(e=16777216;e<t;e+=16777216);return e}(n.padMaxChunkLen+320+20)),n.h32=new Int32Array(n.heap),n.h8=new Int8Array(n.heap),n.core=function(t,e,r){"use asm";var n=new t.Int32Array(r);function o(t,e){t=t|0;e=e|0;var r=0,o=0,i=0,s=0,a=0,u=0,c=0,h=0,l=0,p=0,f=0,d=0,_=0,m=0;i=n[e+320>>2]|0;a=n[e+324>>2]|0;c=n[e+328>>2]|0;l=n[e+332>>2]|0;f=n[e+336>>2]|0;for(r=0;(r|0)<(t|0);r=r+64|0){s=i;u=a;h=c;p=l;d=f;for(o=0;(o|0)<64;o=o+4|0){m=n[r+o>>2]|0;_=((i<<5|i>>>27)+(a&c|~a&l)|0)+((m+f|0)+1518500249|0)|0;f=l;l=c;c=a<<30|a>>>2;a=i;i=_;n[t+o>>2]=m}for(o=t+64|0;(o|0)<(t+80|0);o=o+4|0){m=(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])<<1|(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])>>>31;_=((i<<5|i>>>27)+(a&c|~a&l)|0)+((m+f|0)+1518500249|0)|0;f=l;l=c;c=a<<30|a>>>2;a=i;i=_;n[o>>2]=m}for(o=t+80|0;(o|0)<(t+160|0);o=o+4|0){m=(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])<<1|(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])>>>31;_=((i<<5|i>>>27)+(a^c^l)|0)+((m+f|0)+1859775393|0)|0;f=l;l=c;c=a<<30|a>>>2;a=i;i=_;n[o>>2]=m}for(o=t+160|0;(o|0)<(t+240|0);o=o+4|0){m=(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])<<1|(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])>>>31;_=((i<<5|i>>>27)+(a&c|a&l|c&l)|0)+((m+f|0)-1894007588|0)|0;f=l;l=c;c=a<<30|a>>>2;a=i;i=_;n[o>>2]=m}for(o=t+240|0;(o|0)<(t+320|0);o=o+4|0){m=(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])<<1|(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])>>>31;_=((i<<5|i>>>27)+(a^c^l)|0)+((m+f|0)-899497514|0)|0;f=l;l=c;c=a<<30|a>>>2;a=i;i=_;n[o>>2]=m}i=i+s|0;a=a+u|0;c=c+h|0;l=l+p|0;f=f+d|0}n[e+320>>2]=i;n[e+324>>2]=a;n[e+328>>2]=c;n[e+332>>2]=l;n[e+336>>2]=f}return{hash:o}}({Int32Array:Int32Array,DataView:DataView},{},n.heap),n.buffer=null}(e||65536);var a=function(t,e,r,i,a){var u=r;a&&(u=function(t,e){var r=o(t),i=new Int32Array(n.heap,0,r>>2);return function(t,e){for(var r=e>>2;r<t.length;r++)t[r]=0}(i,t),function(t,e,r){t[e>>2]|=128<<24-(e%4<<3),t[14+(2+(e>>2)&-16)]=r>>29,t[15+(2+(e>>2)&-16)]=r<<3}(i,t,e),r}(r,i)),function(t,e,r){s(t)(n.h8,n.h32,e,r,0)}(t,e,r),n.core.hash(u,n.padMaxChunkLen)},u=this.rawDigest=function(t){var e,r,o,i=t.byteLength||t.length||t.size||0;e=n.heap,r=n.padMaxChunkLen,(o=new Int32Array(e,r+320,5))[0]=1732584193,o[1]=-271733879,o[2]=-1732584194,o[3]=271733878,o[4]=-1009589776;var s=0,u=n.maxChunkLen;for(s=0;i>s+u;s+=u)a(t,s,u,i,!1);return a(t,s,i-s,i,!0),function(t,e){var r=new Int32Array(t,e+320,5),n=new Int32Array(5),o=new DataView(n.buffer);return o.setInt32(0,r[0],!1),o.setInt32(4,r[1],!1),o.setInt32(8,r[2],!1),o.setInt32(12,r[3],!1),o.setInt32(16,r[4],!1),n}(n.heap,n.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(t){return function(t){var e,r,n=[],o=new Uint8Array(t);for(e=0;e<o.length;e++)r=o[e],n[e]="0123456789abcdef".charAt(r>>4&15)+"0123456789abcdef".charAt(r>>0&15);return n.join("")}(u(t).buffer)}}}(),function(t,e,r,n){"use strict";var o=new r,i=0,s=1,a=2,u=3,c=0,h=74,l=49,p=47,f=75,d=116,_=136,m=117,g=137,y=118,v=138,w=119,b=139,k=216,O=226,A=236,S=217,x=237,T=218,E=228,P=238,I=219,j=239,D=284,C=285,M=348,R=358,Y=368,L=346,N=356,Q=366,F=349,U=359,z=369,H=347,q=357,G=367,W=374,B=375,V=384,J=385;function $(t,e){this._list=[],this.name="ReplicateReport",this.message=this.name,this.has_error=!1,this._log_level=t,this._log_console=e}function Z(t){if(void 0!==t&&"string"!=typeof t)throw new TypeError("You must pass a string.");this.message=t||"Skip some asynchronous code"}function K(t){return o.digestFromString(t)}function X(t){return o.digestFromArrayBuffer(t)}function tt(e){if(this._query_options=e.query||{},this._log_level=e.report_level||100,this._log_console=e.debug||!1,void 0!==e.signature_hash_key&&(this._query_options.select_list=[e.signature_hash_key]),this._signature_hash_key=e.signature_hash_key,this._local_sub_storage=t.createJIO(e.local_sub_storage),this._remote_sub_storage=t.createJIO(e.remote_sub_storage),e.hasOwnProperty("signature_sub_storage")?(this._signature_sub_storage=t.createJIO(e.signature_sub_storage),this._custom_signature_sub_storage=!0):(this._signature_hash="_replicate_"+K(n(e.local_sub_storage)+n(e.remote_sub_storage)+n(this._query_options)),this._signature_sub_storage=t.createJIO({type:"query",sub_storage:{type:"document",document_id:this._signature_hash,sub_storage:e.local_sub_storage}}),this._custom_signature_sub_storage=!1),this._use_remote_post=e.use_remote_post||!1,this._parallel_operation_attachment_amount=e.parallel_operation_attachment_amount||1,this._parallel_operation_amount=e.parallel_operation_amount||1,this._conflict_handling=e.conflict_handling||0,this._conflict_handling!==i&&this._conflict_handling!==s&&this._conflict_handling!==a&&this._conflict_handling!==u)throw new t.util.jIOError("Unsupported conflict handling: "+this._conflict_handling,400);this._check_local_modification=e.check_local_modification,void 0===this._check_local_modification&&(this._check_local_modification=!0),this._check_local_creation=e.check_local_creation,void 0===this._check_local_creation&&(this._check_local_creation=!0),this._check_local_deletion=e.check_local_deletion,void 0===this._check_local_deletion&&(this._check_local_deletion=!0),this._check_remote_modification=e.check_remote_modification,void 0===this._check_remote_modification&&(this._check_remote_modification=!0),this._check_remote_creation=e.check_remote_creation,void 0===this._check_remote_creation&&(this._check_remote_creation=!0),this._check_remote_deletion=e.check_remote_deletion,void 0===this._check_remote_deletion&&(this._check_remote_deletion=!0),this._check_local_attachment_modification=e.check_local_attachment_modification,void 0===this._check_local_attachment_modification&&(this._check_local_attachment_modification=!1),this._check_local_attachment_creation=e.check_local_attachment_creation,void 0===this._check_local_attachment_creation&&(this._check_local_attachment_creation=!1),this._check_local_attachment_deletion=e.check_local_attachment_deletion,void 0===this._check_local_attachment_deletion&&(this._check_local_attachment_deletion=!1),this._check_remote_attachment_modification=e.check_remote_attachment_modification,void 0===this._check_remote_attachment_modification&&(this._check_remote_attachment_modification=!1),this._check_remote_attachment_creation=e.check_remote_attachment_creation,void 0===this._check_remote_attachment_creation&&(this._check_remote_attachment_creation=!1),this._check_remote_attachment_deletion=e.check_remote_attachment_deletion,void 0===this._check_remote_attachment_deletion&&(this._check_remote_attachment_deletion=!1)}function et(t,r,n,o){var i,s=[];function a(o){o.push(function(){if(n.length>0){var i=n.shift(),s=new e.Queue;return i[0]=s,r.apply(t,i),a(o),s}})}for(i=0;i<o;i+=1)s.push(new e.Queue),a(s[i]);return o>1?e.all(s):s[0]}function rt(t,r,n,o){return(new e.Queue).push(function(){if(!n.hasOwnProperty(o))return r.allDocs(t._query_options).push(function(t){var e,r={};for(e=0;e<t.data.total_rows;e+=1)r[t.data.rows[e].id]=t.data.rows[e].value;n[o]=r})}).push(function(){return n[o]})}function nt(t,e,r,n,o,i,s){return o?s.logAttachment(r,n,i?g:b):s.logAttachment(r,n,i?x:j),e.removeAttachment(r,n).push(function(){return t._signature_sub_storage.removeAttachment(r,n)})}function ot(t,e,r,n,o,i,s,a,u){return a?u.logAttachment(o,i,s?m:w):u.logAttachment(o,i,s?S:I),e.putAttachment(o,i,r).push(function(){return t._signature_sub_storage.putAttachment(o,i,JSON.stringify({hash:n}))})}function it(e,r,n,o,i,s,a,u,h,l,p,d,_,m){var g;return r[h]=null,a.getAttachment(u,h).push(function(e){return g=e,t.util.readBlobAsArrayBuffer(g)}).push(function(t){return X(t.target.result)},function(e){if(e instanceof t.util.jIOError&&404===e.status_code)return g=null,null;throw e}).push(function(t){return o===t?(m.logAttachment(u,h,C),null===o?e._signature_sub_storage.removeAttachment(u,h):e._signature_sub_storage.putAttachment(u,h,JSON.stringify({hash:o}))):t===n||!0===l?null===o?nt(e,a,u,h,t!==n,_,m):ot(e,a,i,o,u,h,_,t!==n,m):!0!==d?!0===p||null===o?null===t?nt(e,s,u,h,o!==n,!_,m):ot(e,s,g,t,u,h,!_,o!==n,m):null===t?ot(e,a,i,o,u,h,_,!1,m):void m.logAttachment(u,h,f):void m.logAttachment(u,h,B)}).push(void 0,function(t){m.logAttachment(u,h,c,t)})}function st(r,n,o,i,s,a,u,c,h,l,p,f,d,_){var m,g;r.push(function(){if(!0===p)return e.all([i.getAttachment(a,u),{hash:null}]);if(!0===f)return e.all([i.getAttachment(a,u),n._signature_sub_storage.getAttachment(a,u,{format:"json"})]);throw new t.util.jIOError("Unexpected call of checkAttachmentSignatureDifference",409)}).push(function(e){return m=e[0],g=e[1].hash,t.util.readBlobAsArrayBuffer(m)}).push(function(t){var e=X(t.target.result);if(e!==g)return it(n,o,g,e,m,i,s,a,u,c,h,l,d,_);d||_.logAttachment(a,u,J)})}function at(t,e,r,n,o,i,s,a,u,c,h,l){var p;t.push(function(){return e._signature_sub_storage.getAttachment(o,i,{format:"json"})}).push(function(t){return p=t.hash,it(e,r,p,null,null,s,n,o,i,a,u,c,h,l)})}function ut(e,r,n,o,i,s,a,u){var c={},h={},l=u.from_local;return o.allAttachments(n).push(void 0,function(e){if(e instanceof t.util.jIOError&&404===e.status_code)return{};throw e}).push(function(t){var p,f,d,_=[];for(d in t)t.hasOwnProperty(d)&&(r.hasOwnProperty(d)||(c[d]=null));for(d in s)s.hasOwnProperty(d)&&(r.hasOwnProperty(d)||(h[d]=null));for(d in c)c.hasOwnProperty(d)&&(p=h.hasOwnProperty(d)&&u.check_modification,f=!h.hasOwnProperty(d)&&u.check_creation,!0===p||!0===f?_.push([void 0,e,r,o,i,n,d,u.conflict_force,u.conflict_revert,u.conflict_ignore,f,p,l,a]):h.hasOwnProperty(d)?a.logAttachment(n,d,l?U:q):a.logAttachment(n,d,l?F:H));return et(e,st,_,e._parallel_operation_attachment_amount)}).push(function(){var t,s=[];for(t in h)h.hasOwnProperty(t)&&(c.hasOwnProperty(t)||(!0===u.check_deletion?s.push([void 0,e,r,i,n,t,o,u.conflict_force,u.conflict_revert,u.conflict_ignore,l,a]):a.logAttachment(n,t,l?z:G)));return et(e,at,s,e._parallel_operation_attachment_amount)})}function ct(t,e,r,n,o,i,s){return s.logAttachment(e,r,i?x:j),t.push(function(){return n.removeAttachment(e,r)}).push(function(){return o.removeAttachment(e,r)})}function ht(t,e,r,n,o){return o.logAttachment(e,r,C),t.push(function(){return n.removeAttachment(e,r)})}function lt(e,r,n,o,i,s,a,u,c){return e.push(function(){return s.getAttachment(r,n,{format:"json"}).push(void 0,function(e){if(e instanceof t.util.jIOError&&404===e.status_code)return{hash:null};throw e}).push(function(t){if(t.hash!==a)return c.logAttachment(r,n,u?S:I),o.getAttachment(r,n).push(function(t){return i.putAttachment(r,n,t)}).push(function(){return s.putAttachment(r,n,JSON.stringify({hash:a}))})})})}function pt(r,n,o,i,c,h,l){if(void 0!==i)return function(t,r,n,o,i,s){if(n!==o)return(new e.Queue).push(function(){return e.all([t._signature_sub_storage.allAttachments(r),t._local_sub_storage.allAttachments(r),t._remote_sub_storage.allAttachments(r)])}).push(function(o){var a,u,c,h,l,p,f=[],d=[],_=[],m=o[0],g=o[1],y=o[2],v=t._check_local_attachment_modification,w=t._check_local_attachment_creation,b=t._check_local_attachment_deletion,k=t._check_remote_attachment_modification,O=t._check_remote_attachment_creation,A=t._check_remote_attachment_deletion;for(a in i?(u=g,c=y,h=t._local_sub_storage,l=t._remote_sub_storage,p=!0):(u=y,c=g,h=t._remote_sub_storage,l=t._local_sub_storage,v=k,O=w=O,A=b=A,p=!1),u)u.hasOwnProperty(a)&&(w&&!m.hasOwnProperty(a)||v&&m.hasOwnProperty(a)?f.push([void 0,r,a,h,l,t._signature_sub_storage,n,p,s]):m.hasOwnProperty(a)?s.logAttachment(r,a,p?U:q):s.logAttachment(r,a,p?F:H));for(a in m)m.hasOwnProperty(a)&&(!b||u.hasOwnProperty(a)||c.hasOwnProperty(a)||_.push([void 0,r,a,t._signature_sub_storage,s]));for(a in c)c.hasOwnProperty(a)&&(u.hasOwnProperty(a)||(b&&m.hasOwnProperty(a)||O&&!m.hasOwnProperty(a)?d.push([void 0,r,a,l,t._signature_sub_storage,p,s]):m.hasOwnProperty(a)?s.logAttachment(r,a,p?z:G):s.logAttachment(r,a,p?F:H)));return e.all([et(t,lt,f,t._parallel_operation_attachment_amount),et(t,ct,d,t._parallel_operation_attachment_amount),et(t,ht,_,t._parallel_operation_attachment_amount)])}).push(function(){return t._signature_sub_storage.put(r,{hash:n,attachment_hash:n,from_local:i})})}(r,n,c,h,l,o);var p={};return(new e.Queue).push(function(){return r._check_local_attachment_modification||r._check_local_attachment_creation||r._check_local_attachment_deletion||r._check_remote_attachment_modification||r._check_remote_attachment_creation||r._check_remote_attachment_deletion?r._signature_sub_storage.allAttachments(n):{}}).push(void 0,function(e){if(e instanceof t.util.jIOError&&404===e.status_code)return{};throw e}).push(function(t){return r._check_local_attachment_modification||r._check_local_attachment_creation||r._check_local_attachment_deletion?ut(r,p,n,r._local_sub_storage,r._remote_sub_storage,t,o,{conflict_force:r._conflict_handling===s,conflict_revert:r._conflict_handling===a,conflict_ignore:r._conflict_handling===u,check_modification:r._check_local_attachment_modification,check_creation:r._check_local_attachment_creation,check_deletion:r._check_local_attachment_deletion,from_local:!0}).push(function(){return t}):t}).push(function(t){if(r._check_remote_attachment_modification||r._check_remote_attachment_creation||r._check_remote_attachment_deletion)return ut(r,p,n,r._remote_sub_storage,r._local_sub_storage,t,o,{use_revert_post:r._use_remote_post,conflict_force:r._conflict_handling===a,conflict_revert:r._conflict_handling===s,conflict_ignore:r._conflict_handling===u,check_modification:r._check_remote_attachment_modification,check_creation:r._check_remote_attachment_creation,check_deletion:r._check_remote_attachment_deletion,from_local:!1})})}function ft(r,n,o,i,s,a,u,c,h,l){var p,f,_,m=new e.Queue;return void 0===l&&(l={}),f=l.from_local,_=l.conflict||!1,null===i&&m.push(function(){return n.get(a)}).push(function(t){i=t},function(e){if(e instanceof t.util.jIOError&&404===e.status_code)throw new Z(a);throw e}),l.use_post?m.push(function(){return h.log(a,f?O:E),o.post(i)}).push(function(t){return p=t,n.put(p,i)}).push(function(){return n.allAttachments(a)}).push(function(t){var r,o=new e.Queue;function i(t){o.push(function(){return n.getAttachment(a,t)}).push(function(e){return n.putAttachment(p,t,e)})}for(r in t)t.hasOwnProperty(r)&&i(r);return o}).push(function(){return n.remove(a)}).push(function(){return r._signature_sub_storage.remove(a)}).push(function(){return r._signature_sub_storage.put(p,{hash:s,from_local:f})}).push(function(){u[p]=null}):m.push(function(){if(_?h.log(a,f?d:y):h.log(a,f?k:T),!0===l.create_new_document)return delete c[a],r._signature_sub_storage.remove(a)}).push(function(){return o.put(a,i)}).push(function(){return r._signature_sub_storage.put(a,{hash:s,from_local:f})}),m.push(void 0,function(t){if(!(t instanceof Z))throw t})}function dt(e,r,n,o,i,s){var a,u;return void 0!==e._signature_hash_key?(s.conflict?i.log(n,s.from_local?_:v):i.log(n,s.from_local?A:P),a=r.remove(n).push(function(){return e._signature_sub_storage.remove(n)})):(u=i._list.length,a=pt(e,n,i).push(function(){var t,o=i._list.length,a=!1;for(t=u;t<o;t+=1)i._list[t][1]===n&&i._list[t][0]<100&&(a=!0);if(!a)return s.conflict?i.log(n,s.from_local?_:v):i.log(n,s.from_local?A:P),r.remove(n).push(function(){return e._signature_sub_storage.remove(n)});i.log(n,s.from_local?p:l)},function(e){if(!(e instanceof t.util.jIOError&&404===e.status_code))throw e})),a.push(function(){o[n]=null})}function _t(r,o,i,s,a,u,l,p,f,d,_,m,g,y,v,w){o[_]=null;var b=w.from_local;return(new e.Queue).push(function(){return void 0!==w.signature_hash_key?rt(r,d,s,a).push(function(t){return t.hasOwnProperty(_)?[null,t[_][w.signature_hash_key]]:[null,null]}):d.get(_).push(function(t){return[t,K(n(t))]},function(e){if(e instanceof t.util.jIOError&&404===e.status_code)return[null,null];throw e})}).push(function(t){var e=t[0],n=t[1];return l===n?(v.log(_,D),null===l?r._signature_sub_storage.remove(_):r._signature_sub_storage.put(_,{hash:l,from_local:b})):n===u||!0===m?null===l?dt(r,d,_,i,v,{from_local:b,conflict:n!==u}):ft(r,f,d,p,l,_,o,i,v,{use_post:w.use_post&&null===n,conflict:n!==u,from_local:b,create_new_document:null===n&&null!==u}):!0!==y?!0===g||null===l?null===n?dt(r,f,_,i,v,{from_local:!b,conflict:null!==l}):ft(r,d,f,e,n,_,o,i,v,{use_post:w.use_revert_post&&null===l,from_local:!b,conflict:!0,create_new_document:null===l&&null!==u}):null===n?ft(r,f,d,p,l,_,o,i,v,{use_post:w.use_post,conflict:!0,from_local:b,create_new_document:null!==u}):void v.log(_,h):void v.log(_,W)}).push(void 0,function(t){v.log(_,c,t)})}function mt(t,e,r,n,o,i,s,a,u,c,h,l,p,f){var d;t.push(function(){return e._signature_sub_storage.get(a)}).push(function(t){return d=t.hash,_t(e,r,n,o,i,d,null,null,u,s,a,c,h,l,p,f)})}function gt(t,e,r,o,i,s,a,u,c,h,l,p,f,d,_,m){t.push(function(){return null===f?a.get(c):null}).push(function(t){if(null===f&&(f=K(n(t))),f!==d)return _t(e,r,o,i,s,d,f,t,a,u,c,h,l,p,_,m);m.from_local||_.log(c,V)})}function yt(t,r,n,o,i,s,a,u,c,h,l){var p=[],f=[];return l.hasOwnProperty("use_post")||(l.use_post=!1),l.hasOwnProperty("use_revert_post")||(l.use_revert_post=!1),rt(t,a,o,i).push(function(i){var d,_,m,g,y,v,w={},b={},k=new e.Queue;for(v in i)i.hasOwnProperty(v)&&(r.hasOwnProperty(v)||(w[v]=i[v]));for(d=0;d<c.data.total_rows;d+=1)r.hasOwnProperty(c.data.rows[d].id)||(b[c.data.rows[d].id]=c.data.rows[d].value.hash);for(v in w)w.hasOwnProperty(v)&&(_=b.hasOwnProperty(v)&&l.check_modification,!0===(m=!b.hasOwnProperty(v)&&l.check_creation)?g=null:!0===_&&(g=b[v]),y=null,void 0!==l.signature_hash_key&&(y=w[v][l.signature_hash_key],!0===_&&(_=!1,y!==g&&(_=!0))),!0===_||!0===m?p.push([void 0,t,r,n,o,s,a,u,v,l.conflict_force,l.conflict_revert,l.conflict_ignore,y,g,h,l]):y===g?h.log(v,V):b.hasOwnProperty(v)?h.log(v,l.from_local?R:N):h.log(v,l.from_local?M:L));for(v in k.push(function(){return et(t,gt,p,l.operation_amount)}),b)b.hasOwnProperty(v)&&(w.hasOwnProperty(v)||(!0===l.check_deletion?f.push([void 0,t,r,n,o,s,u,v,a,l.conflict_force,l.conflict_revert,l.conflict_ignore,h,l]):(h.log(v,l.from_local?Y:Q),n[v]=null)));return 0!==f.length&&k.push(function(){return et(t,mt,f,l.operation_amount)}),k})}function vt(t,e,r,n,o,i,s,a){t.push(function(){return pt(e,r,n,o,i,s,a)})}$.prototype={constructor:$,LOG_UNEXPECTED_ERROR:c,LOG_UNRESOLVED_CONFLICT:h,LOG_UNEXPECTED_LOCAL_ATTACHMENT:l,LOG_UNEXPECTED_REMOTE_ATTACHMENT:p,LOG_UNRESOLVED_ATTACHMENT_CONFLICT:f,LOG_FORCE_PUT_REMOTE:d,LOG_FORCE_DELETE_REMOTE:_,LOG_FORCE_PUT_LOCAL:y,LOG_FORCE_DELETE_LOCAL:v,LOG_FORCE_PUT_REMOTE_ATTACHMENT:m,LOG_FORCE_DELETE_REMOTE_ATTACHMENT:g,LOG_FORCE_PUT_LOCAL_ATTACHMENT:w,LOG_FORCE_DELETE_LOCAL_ATTACHMENT:b,LOG_PUT_REMOTE:k,LOG_POST_REMOTE:O,LOG_DELETE_REMOTE:A,LOG_PUT_REMOTE_ATTACHMENT:S,LOG_DELETE_REMOTE_ATTACHMENT:x,LOG_PUT_LOCAL:T,LOG_DELETE_LOCAL:P,LOG_PUT_LOCAL_ATTACHMENT:I,LOG_DELETE_LOCAL_ATTACHMENT:j,LOG_FALSE_CONFLICT:D,LOG_FALSE_CONFLICT_ATTACHMENT:C,LOG_SKIP_LOCAL_CREATION:M,LOG_SKIP_LOCAL_MODIFICATION:R,LOG_SKIP_LOCAL_DELETION:Y,LOG_SKIP_REMOTE_CREATION:L,LOG_SKIP_REMOTE_MODIFICATION:N,LOG_SKIP_REMOTE_DELETION:Q,LOG_SKIP_LOCAL_ATTACHMENT_CREATION:F,LOG_SKIP_LOCAL_ATTACHMENT_MODIFICATION:U,LOG_SKIP_LOCAL_ATTACHMENT_DELETION:z,LOG_SKIP_REMOTE_ATTACHMENT_CREATION:H,LOG_SKIP_REMOTE_ATTACHMENT_MODIFICATION:q,LOG_SKIP_REMOTE_ATTACHMENT_DELETION:G,LOG_SKIP_CONFLICT:W,LOG_SKIP_CONFLICT_ATTACHMENT:B,LOG_NO_CHANGE:V,LOG_NO_CHANGE_ATTACHMENT:J,logConsole:function(t,e,r,n){if(this._log_console){var o,i=t,s=t;s>=300?(i+=" SKIP ",o=console.info):s>=200?(i+=" SOLVE ",o=console.log):s>=100?(i+=" FORCE ",o=console.warn):(i+=" ERROR ",o=console.error),(s=t%100)>=80?i+="idem ":s>=70?i+="conflict ":s>=60?i+="deleted ":s>=50?i+="modified ":s>=40?i+="created ":s>=30?i+="delete ":s>=20?i+="post ":s>=10&&(i+="put "),(s=t%10)>=8?i+="local ":s>=6&&(i+="remote "),0!==s&&(i+=s%2==0?"document":"attachment"),i+=" "+e,void 0!==r&&(i+=" "+r,void 0!==n&&(i+=" "+n)),o(i)}},log:function(t,e,r){void 0===e&&(void 0===r&&(r="Unknown type: "+e),e=c),e<this._log_level&&(void 0===r?(this.logConsole(e,t),this._list.push([e,t])):(this.logConsole(e,t,r),this._list.push([e,t,r])),e<100&&(this.has_error=!0))},logAttachment:function(t,e,r,n){void 0===r&&(void 0===n&&(n="Unknown type: "+r),r=c),r<this._log_level&&(void 0===n?(this.logConsole(r,t,e),this._list.push([r,t,e])):(this.logConsole(r,t,e,n),this._list.push([r,t,e,n])),r<100&&(this.has_error=!0))},toString:function(){return this._list.toString()}},Z.prototype=new Error,Z.prototype.constructor=Z,tt.prototype.remove=function(e){if(e===this._signature_hash)throw new t.util.jIOError(this._signature_hash+" is frozen",403);return this._local_sub_storage.remove.apply(this._local_sub_storage,arguments)},tt.prototype.post=function(){return this._local_sub_storage.post.apply(this._local_sub_storage,arguments)},tt.prototype.put=function(e){if(e===this._signature_hash)throw new t.util.jIOError(this._signature_hash+" is frozen",403);return this._local_sub_storage.put.apply(this._local_sub_storage,arguments)},tt.prototype.get=function(){return this._local_sub_storage.get.apply(this._local_sub_storage,arguments)},tt.prototype.getAttachment=function(){return this._local_sub_storage.getAttachment.apply(this._local_sub_storage,arguments)},tt.prototype.allAttachments=function(){return this._local_sub_storage.allAttachments.apply(this._local_sub_storage,arguments)},tt.prototype.putAttachment=function(e){if(e===this._signature_hash)throw new t.util.jIOError(this._signature_hash+" is frozen",403);return this._local_sub_storage.putAttachment.apply(this._local_sub_storage,arguments)},tt.prototype.removeAttachment=function(e){if(e===this._signature_hash)throw new t.util.jIOError(this._signature_hash+" is frozen",403);return this._local_sub_storage.removeAttachment.apply(this._local_sub_storage,arguments)},tt.prototype.hasCapacity=function(){return this._local_sub_storage.hasCapacity.apply(this._local_sub_storage,arguments)},tt.prototype.buildQuery=function(){return this._local_sub_storage.buildQuery.apply(this._local_sub_storage,arguments)},tt.prototype.repair=function(){var r=this,n=arguments,o={},i={},c={},h=new $(this._log_level,this._log_console);return(new e.Queue).push(function(){if(!1===r._custom_signature_sub_storage)return o[r._signature_hash]=null,r._signature_sub_storage.__storage._sub_storage.__storage._sub_storage.get(r._signature_hash)}).push(void 0,function(e){if(e instanceof t.util.jIOError&&404===e.status_code)return r._signature_sub_storage.__storage._sub_storage.__storage._sub_storage.put(r._signature_hash,{});throw e}).push(function(){return e.all([r._local_sub_storage.repair.apply(r._local_sub_storage,n),r._remote_sub_storage.repair.apply(r._remote_sub_storage,n)])}).push(function(){if(r._check_local_modification||r._check_local_creation||r._check_local_deletion||r._check_remote_modification||r._check_remote_creation||r._check_remote_deletion)return r._signature_sub_storage.allDocs({select_list:["hash"]})}).push(function(t){return r._check_local_modification||r._check_local_creation||r._check_local_deletion?yt(r,o,i,c,"local","remote",r._local_sub_storage,r._remote_sub_storage,t,h,{use_post:r._use_remote_post,conflict_force:r._conflict_handling===s,conflict_revert:r._conflict_handling===a,conflict_ignore:r._conflict_handling===u,check_modification:r._check_local_modification,check_creation:r._check_local_creation,check_deletion:r._check_local_deletion,operation_amount:r._parallel_operation_amount,signature_hash_key:r._signature_hash_key,from_local:!0}).push(function(){return t}):t}).push(function(t){if(r._check_remote_modification||r._check_remote_creation||r._check_remote_deletion)return yt(r,o,i,c,"remote","local",r._remote_sub_storage,r._local_sub_storage,t,h,{use_revert_post:r._use_remote_post,conflict_force:r._conflict_handling===a,conflict_revert:r._conflict_handling===s,conflict_ignore:r._conflict_handling===u,check_modification:r._check_remote_modification,check_creation:r._check_remote_creation,check_deletion:r._check_remote_deletion,operation_amount:r._parallel_operation_amount,signature_hash_key:r._signature_hash_key,from_local:!1})}).push(function(){if(r._check_local_attachment_modification||r._check_local_attachment_creation||r._check_local_attachment_deletion||r._check_remote_attachment_modification||r._check_remote_attachment_creation||r._check_remote_attachment_deletion)return r._signature_sub_storage.allDocs({select_list:["hash","attachment_hash","from_local"]}).push(function(t){var e,n,o=[],s=t.data.total_rows;for(e=0;e<s;e+=1)n=t.data.rows[e],i.hasOwnProperty(n.id)||o.push([void 0,r,n.id,h,r._signature_hash_key,n.value.hash,n.value.attachment_hash,n.value.from_local,h]);return et(r,vt,o,r._parallel_operation_amount)})}).push(function(){if(h.has_error)throw h;return h})},t.addStorage("replicate",tt)}(jIO,RSVP,Rusha,jIO.util.stringify),function(t){"use strict";var e=new t;function r(t){this._sub_storage=jIO.createJIO(t.sub_storage)}r.prototype.post=function(t){return this._sub_storage.put(e.digestFromString(JSON.stringify(t)),t)},r.prototype.get=function(){return this._sub_storage.get.apply(this._sub_storage,arguments)},r.prototype.remove=function(){return this._sub_storage.remove.apply(this._sub_storage,arguments)},r.prototype.hasCapacity=function(){return this._sub_storage.hasCapacity.apply(this._sub_storage,arguments)},r.prototype.buildQuery=function(){return this._sub_storage.buildQuery.apply(this._sub_storage,arguments)},r.prototype.getAttachment=function(){return this._sub_storage.getAttachment.apply(this._sub_storage,arguments)},r.prototype.putAttachment=function(){return this._sub_storage.putAttachment.apply(this._sub_storage,arguments)},r.prototype.removeAttachment=function(){return this._sub_storage.removeAttachment.apply(this._sub_storage,arguments)},r.prototype.allAttachments=function(){return this._sub_storage.allAttachments.apply(this._sub_storage,arguments)},r.prototype.repair=function(){return this._sub_storage.repair.apply(this._sub_storage,arguments)},jIO.addStorage("sha",r)}(Rusha),function(t){"use strict";function e(e){this._sub_storage=t.createJIO(e.sub_storage)}e.prototype.get=function(){return this._sub_storage.get.apply(this._sub_storage,arguments)},e.prototype.allAttachments=function(){return this._sub_storage.allAttachments.apply(this._sub_storage,arguments)},e.prototype.post=function(t){function e(){return("0000"+Math.floor(65536*Math.random()).toString(16)).slice(-4)}var r=e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e();return this.put(r,t)},e.prototype.put=function(){return this._sub_storage.put.apply(this._sub_storage,arguments)},e.prototype.remove=function(){return this._sub_storage.remove.apply(this._sub_storage,arguments)},e.prototype.getAttachment=function(){return this._sub_storage.getAttachment.apply(this._sub_storage,arguments)},e.prototype.putAttachment=function(){return this._sub_storage.putAttachment.apply(this._sub_storage,arguments)},e.prototype.removeAttachment=function(){return this._sub_storage.removeAttachment.apply(this._sub_storage,arguments)},e.prototype.repair=function(){return this._sub_storage.repair.apply(this._sub_storage,arguments)},e.prototype.hasCapacity=function(t){return this._sub_storage.hasCapacity(t)},e.prototype.buildQuery=function(){return this._sub_storage.buildQuery.apply(this._sub_storage,arguments)},t.addStorage("uuid",e)}(jIO),function(t,e,r){"use strict";function n(){this._database={}}n.prototype.put=function(t,r){return this._database.hasOwnProperty(t)||(this._database[t]={attachments:{}}),this._database[t].doc=e.stringify(r),t},n.prototype.get=function(r){try{return e.parse(this._database[r].doc)}catch(e){if(e instanceof TypeError)throw new t.util.jIOError("Cannot find document: "+r,404);throw e}},n.prototype.allAttachments=function(e){var r,n={};try{for(r in this._database[e].attachments)this._database[e].attachments.hasOwnProperty(r)&&(n[r]={})}catch(r){if(r instanceof TypeError)throw new t.util.jIOError("Cannot find document: "+e,404);throw r}return n},n.prototype.remove=function(t){return delete this._database[t],t},n.prototype.getAttachment=function(e,r){try{var n=this._database[e].attachments[r];if(void 0===n)throw new t.util.jIOError("Cannot find attachment: "+e+" , "+r,404);return t.util.dataURItoBlob(n)}catch(n){if(n instanceof TypeError)throw new t.util.jIOError("Cannot find attachment: "+e+" , "+r,404);throw n}},n.prototype.putAttachment=function(e,n,o){var i;try{i=this._database[e].attachments}catch(r){if(r instanceof TypeError)throw new t.util.jIOError("Cannot find document: "+e,404);throw r}return(new r.Queue).push(function(){return t.util.readBlobAsDataURL(o)}).push(function(t){i[n]=t.target.result})},n.prototype.removeAttachment=function(e,r){try{delete this._database[e].attachments[r]}catch(r){if(r instanceof TypeError)throw new t.util.jIOError("Cannot find document: "+e,404);throw r}},n.prototype.hasCapacity=function(t){return"list"===t||"include"===t},n.prototype.buildQuery=function(t){var r,n=[];for(r in this._database)this._database.hasOwnProperty(r)&&(!0===t.include_docs?n.push({id:r,value:{},doc:e.parse(this._database[r].doc)}):n.push({id:r,value:{}}));return n},t.addStorage("memory",n)}(jIO,JSON,RSVP),function(t,e,r,n){"use strict";var o="application/x-jio-utf16_lz_string";function i(t){this._sub_storage=jIO.createJIO(t.sub_storage)}function s(t,e){return t.indexOf(e)===t.length-e.length}i.prototype.get=function(){return this._sub_storage.get.apply(this._sub_storage,arguments)},i.prototype.post=function(){return this._sub_storage.post.apply(this._sub_storage,arguments)},i.prototype.put=function(){return this._sub_storage.put.apply(this._sub_storage,arguments)},i.prototype.remove=function(){return this._sub_storage.remove.apply(this._sub_storage,arguments)},i.prototype.hasCapacity=function(){return this._sub_storage.hasCapacity.apply(this._sub_storage,arguments)},i.prototype.buildQuery=function(){return this._sub_storage.buildQuery.apply(this._sub_storage,arguments)},i.prototype.getAttachment=function(e,i){return this._sub_storage.getAttachment(e,i).push(function(e){return e.type!==o?e:(new t.Queue).push(function(){return jIO.util.readBlobAsText(e,"utf16")}).push(function(t){var o=r.decompressFromUTF16(t.target.result);if(""===o)return e;try{return jIO.util.dataURItoBlob(o)}catch(t){if(t instanceof n)return e;throw t}})})},i.prototype.putAttachment=function(n,i,a){var u=this;return 0===a.type.indexOf("text/")||s(a.type,"xml")||s(a.type,"json")?(new t.Queue).push(function(){return jIO.util.readBlobAsDataURL(a)}).push(function(t){var s=r.compressToUTF16(t.target.result);return a=new e([s],{type:o}),u._sub_storage.putAttachment(n,i,a)}):this._sub_storage.putAttachment.apply(this._sub_storage,arguments)},i.prototype.removeAttachment=function(){return this._sub_storage.removeAttachment.apply(this._sub_storage,arguments)},i.prototype.allAttachments=function(){return this._sub_storage.allAttachments.apply(this._sub_storage,arguments)},jIO.addStorage("zip",i)}(RSVP,Blob,LZString,DOMException),function(t,e,r){"use strict";function n(t){this._dom_parser=(new e).parseFromString(t,"text/xml")}function o(t){this._dom_parser=(new e).parseFromString(t,"text/xml")}function i(t){this._dom_parser=(new e).parseFromString(t,"text/xml")}n.prototype.parseHead=function(){var t,e,n=this._dom_parser.querySelector("opml > head"),o={};for(e=n.childNodes.length-1;e>=0;e-=1)(t=n.childNodes[e]).nodeType===r.ELEMENT_NODE&&(o[t.tagName]=t.textContent);return o},n.prototype.parseOutline=function(t,e,r,n,o){var i,s,a,u={};if((o===r||void 0===o)&&(t.push({id:r,value:{}}),n)){for(s=e.attributes.length-1;s>=0;s-=1)(i=e.attributes[s]).value&&(u[i.name]=i.value);t[t.length-1].doc=u}for(s=e.childNodes.length-1;s>=0;s-=1)"outline"===(a=e.childNodes[s]).tagName&&this.parseOutline(t,a,r+"/"+s,n,o)},n.prototype.getDocumentList=function(t,e){var r,n,o=this._dom_parser.querySelectorAll("body > outline");for("/0"===e||void 0===e?(r=[{id:"/0",value:{}}],t&&(r[0].doc=this.parseHead())):r=[],n=0;n<o.length;n+=1)this.parseOutline(r,o[n],"/1/"+n,t,e);return r},o.prototype.parseElement=function(t){var e,n,o,i,s,a={};for(n=t.childNodes.length-1;n>=0;n-=1)if((e=t.childNodes[n]).nodeType===r.ELEMENT_NODE&&"entry"!==e.tagName)for("link"===(i=e.tagName)?i+="_"+(e.getAttribute("rel")||"alternate"):a[i]=e.textContent,o=e.attributes.length-1;o>=0;o-=1)(s=e.attributes[o]).value&&(a[i+"_"+s.name]=s.value);return a},o.prototype.getDocumentList=function(t,e){var r,n,o=this._dom_parser.querySelectorAll("feed > entry");for("/0"===e||void 0===e?(r=[{id:"/0",value:{}}],t&&(r[0].doc=this.parseElement(this._dom_parser.querySelector("feed")))):r=[],n=0;n<o.length;n+=1)e!=="/0/"+n&&void 0!==e||(r.push({id:"/0/"+n,value:{}}),t&&(r[r.length-1].doc=this.parseElement(o[n])));return r},i.prototype.parseElement=function(t){var e,n,o,i,s={};for(n=t.childNodes.length-1;n>=0;n-=1)if((e=t.childNodes[n]).nodeType===r.ELEMENT_NODE&&"item"!==e.tagName)for(s[e.tagName]=e.textContent,o=e.attributes.length-1;o>=0;o-=1)(i=e.attributes[o]).value&&(s[e.tagName+"_"+i.name]=i.value);return s},i.prototype.getDocumentList=function(t,e){var r,n,o=this._dom_parser.querySelectorAll("rss > channel > item");for("/0"===e||void 0===e?(r=[{id:"/0",value:{}}],t&&(r[0].doc=this.parseElement(this._dom_parser.querySelector("rss > channel")))):r=[],n=0;n<o.length;n+=1)e!=="/0/"+n&&void 0!==e||(r.push({id:"/0/"+n,value:{}}),t&&(r[r.length-1].doc=this.parseElement(o[n])));return r};var s={rss:i,opml:n,atom:o};function a(t){return t._sub_storage.getAttachment(t._document_id,t._attachment_id,{format:"text"}).push(function(e){return new s[t._parser_name](e)})}function u(e){this._attachment_id=e.attachment_id,this._document_id=e.document_id,this._parser_name=e.parser,this._sub_storage=t.createJIO(e.sub_storage)}u.prototype.hasCapacity=function(t){return"list"===t||"include"===t},u.prototype.buildQuery=function(t){return void 0===t&&(t={}),a(this).push(function(e){return e.getDocumentList(t.include_docs||!1)})},u.prototype.get=function(e){return a(this).push(function(r){var n=r.getDocumentList(!0,e);if(n.length)return n[0].doc;throw new t.util.jIOError("Cannot find parsed document: "+e,404)})},t.addStorage("parser",u)}(jIO,DOMParser,Node),function(t,e,r){"use strict";function n(t){t.hasOwnProperty("catch_error")?this._catch_error=t.catch_error:this._catch_error=!1,this._timeout=t.timeout||0}n.prototype.get=function(r){var n=this;return(new e.Queue).push(function(){return t.util.ajax({type:"HEAD",url:r,timeout:n._timeout})}).push(void 0,function(e){if(n._catch_error)return e;if(void 0!==e.target&&404===e.target.status)throw new t.util.jIOError("Cannot find url "+r,404);throw e}).push(function(t){var e,r,n,o=["Content-Disposition","Content-Type","Date","Last-Modified","Vary","Cache-Control","Etag","Accept-Ranges","Content-Range"],i={};for(i.Status=t.target.status,e=0;e<o.length;e+=1)r=o[e],null!==(n=t.target.getResponseHeader(r))&&(i[r]=n);return i})},n.prototype.allAttachments=function(){return{enclosure:{}}},n.prototype.getAttachment=function(n,o){var i=this;if("enclosure"!==o)throw new t.util.jIOError("Forbidden attachment: "+n+" , "+o,400);return(new e.Queue).push(function(){return t.util.ajax({type:"GET",url:n,dataType:"blob",timeout:i._timeout})}).push(void 0,function(e){if(i._catch_error)return e;if(void 0!==e.target&&404===e.target.status)throw new t.util.jIOError("Cannot find url "+n,404);throw e}).push(function(t){return new r([t.target.response||t.target.responseText],{type:t.target.getResponseHeader("Content-Type")||"application/octet-stream"})})},t.addStorage("http",n)}(jIO,RSVP,Blob),function(t,e,r,n){"use strict";var o="https://api.dropboxapi.com/2/files/delete_v2",i="https://api.dropboxapi.com/2/files/list_folder",s="https://api.dropboxapi.com/2/files/list_folder/continue";function a(e){if(0!==e.indexOf("/"))throw new t.util.jIOError("id "+e+" is forbidden (no begin /)",400);if(e.lastIndexOf("/")!==e.length-1)throw new t.util.jIOError("id "+e+" is forbidden (no end /)",400);return e.slice(0,-1)}function u(e){if(-1!==e.indexOf("/"))throw new t.util.jIOError("attachment "+e+" is forbidden",400)}function c(t){if("string"!=typeof t.access_token||!t.access_token)throw new TypeError("Access Token' must be a string which contains more than one character.");this._access_token=t.access_token}c.prototype.put=function(r,o){var i=this;if(r=a(r),Object.getOwnPropertyNames(o).length>0)throw new t.util.jIOError("Can not store properties: "+Object.getOwnPropertyNames(o),400);return(new e.Queue).push(function(){return t.util.ajax({type:"POST",url:"https://api.dropboxapi.com/2/files/create_folder_v2",headers:{Authorization:"Bearer "+i._access_token,"Content-Type":"application/json"},data:n.stringify({path:r,autorename:!1})})}).push(void 0,function(t){if(void 0!==t.target&&409===t.target.status){var e=n.parse(t.target.response||t.target.responseText);if("path"===e.error[".tag"]&&"conflict"===e.error.path[".tag"])return}throw t})},c.prototype.remove=function(e){return e=a(e),t.util.ajax({type:"POST",url:o,headers:{Authorization:"Bearer "+this._access_token,"Content-Type":"application/json"},data:n.stringify({path:e})})},c.prototype.get=function(r){var o=this;return"/"===r?{}:(r=a(r),(new e.Queue).push(function(){return t.util.ajax({type:"POST",url:"https://api.dropboxapi.com/2/files/get_metadata",headers:{Authorization:"Bearer "+o._access_token,"Content-Type":"application/json"},data:n.stringify({path:r})})}).push(function(e){if("folder"===n.parse(e.target.response||e.target.responseText)[".tag"])return{};throw new t.util.jIOError("Not a directory: "+r+"/",404)},function(e){if(void 0!==e.target&&409===e.target.status){var o=n.parse(e.target.response||e.target.responseText);if("path"===o.error[".tag"]&&"not_found"===o.error.path[".tag"])throw new t.util.jIOError("Cannot find document: "+r+"/",404)}throw e}))},c.prototype.allAttachments=function(r){return r=a(r),function r(o,a,u,c){var h,l;return void 0===c?(h={path:u,recursive:!1,include_media_info:!1,include_deleted:!1,include_has_explicit_shared_members:!1,include_mounted_folders:!0},l=i):(h={cursor:c},l=s),(new e.Queue).push(function(){return t.util.ajax({type:"POST",url:l,headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},data:n.stringify(h)})}).push(function(t){var e,i=n.parse(t.target.response||t.target.responseText);for(e=0;e<i.entries.length;e+=1)"file"===i.entries[e][".tag"]&&(o[i.entries[e].name]={});return i.has_more?r(o,a,u,i.cursor):o},function(e){if(void 0!==e.target&&409===e.target.status){var r=n.parse(e.target.response||e.target.responseText);if("path"===r.error[".tag"]&&"not_folder"===r.error.path[".tag"])throw new t.util.jIOError("Not a directory: "+u+"/",404);if("path"===r.error[".tag"]&&"not_found"===r.error.path[".tag"])throw new t.util.jIOError("Cannot find document: "+u+"/",404)}throw e})}({},this._access_token,r)},c.prototype.putAttachment=function(e,r,o){return e=a(e),u(r),t.util.ajax({type:"POST",url:"https://content.dropboxapi.com/2/files/upload",headers:{Authorization:"Bearer "+this._access_token,"Content-Type":"application/octet-stream","Dropbox-API-Arg":n.stringify({path:e+"/"+r,mode:"overwrite",autorename:!1,mute:!1})},data:o})},c.prototype.getAttachment=function(o,i){var s=this;return o=a(o),u(i),(new e.Queue).push(function(){return t.util.ajax({url:"https://content.dropboxapi.com/2/files/download",type:"POST",dataType:"blob",headers:{Authorization:"Bearer "+s._access_token,"Dropbox-API-Arg":n.stringify({path:o+"/"+i})}})}).push(function(t){return t.target.response instanceof r?t.target.response:new r([t.target.responseText],{type:t.target.getResponseHeader("Content-Type")||"application/octet-stream"})},function(s){if(void 0!==s.target&&409===s.target.status){if(!(s.target.response instanceof r)){var a=n.parse(s.target.responseText);if("path"===a.error[".tag"]&&"not_found"===a.error.path[".tag"])throw new t.util.jIOError("Cannot find attachment: "+o+"/, "+i,404);throw s}return(new e.Queue).push(function(){return t.util.readBlobAsText(s.target.response)}).push(function(e){var r=n.parse(e.target.result);if("path"===r.error[".tag"]&&"not_found"===r.error.path[".tag"])throw new t.util.jIOError("Cannot find attachment: "+o+"/, "+i,404);throw s})}throw s})},c.prototype.removeAttachment=function(r,i){var s=this;return r=a(r),u(i),(new e.Queue).push(function(){return t.util.ajax({type:"POST",url:o,headers:{Authorization:"Bearer "+s._access_token,"Content-Type":"application/json"},data:n.stringify({path:r+"/"+i})})}).push(void 0,function(e){if(void 0!==e.target&&409===e.target.status){var o=n.parse(e.target.response||e.target.responseText);if("path_lookup"===o.error[".tag"]&&"not_found"===o.error.path_lookup[".tag"])throw new t.util.jIOError("Cannot find attachment: "+r+"/, "+i,404)}throw e})},t.addStorage("dropbox",c)}(jIO,RSVP,Blob,JSON),function(t,e,r,n){"use strict";function o(r,n){return void 0===n&&(n={}),void 0!==r._authorization&&(void 0===n.headers&&(n.headers={}),n.headers.Authorization=r._authorization),void 0!==r._with_credentials&&(void 0===n.xhrFields&&(n.xhrFields={}),n.xhrFields.withCredentials=r._with_credentials),(new e.Queue).push(function(){return t.util.ajax(n)})}function i(e){if(0!==e.indexOf("/"))throw new t.util.jIOError("id "+e+" is forbidden (no begin /)",400);if(e.lastIndexOf("/")!==e.length-1)throw new t.util.jIOError("id "+e+" is forbidden (no end /)",400);return e}function s(e){if(-1!==e.indexOf("/"))throw new t.util.jIOError("attachment "+e+" is forbidden",400)}function a(t){if("string"!=typeof t.url)throw new TypeError("DavStorage 'url' is not of type string");this._url=t.url,"string"==typeof t.basic_login&&(this._authorization="Basic "+t.basic_login),this._with_credentials=t.with_credentials}a.prototype.put=function(r,n){var s=this;if(r=i(r),Object.getOwnPropertyNames(n).length>0)throw new t.util.jIOError("Can not store properties: "+Object.getOwnPropertyNames(n),400);return(new e.Queue).push(function(){return o(s,{type:"MKCOL",url:s._url+r})}).push(void 0,function(t){if(void 0===t.target||405!==t.target.status)throw t})},a.prototype.remove=function(t){return t=i(t),o(this,{type:"DELETE",url:this._url+t})},a.prototype.get=function(r){var n=this;return r=i(r),(new e.Queue).push(function(){return o(n,{type:"PROPFIND",url:n._url+r,dataType:"text",headers:{Depth:"1"}})}).push(function(){return{}},function(e){if(void 0!==e.target&&404===e.target.status)throw new t.util.jIOError("Cannot find document",404);throw e})},a.prototype.allAttachments=function(n){var s=this;return n=i(n),(new e.Queue).push(function(){return o(s,{type:"PROPFIND",url:s._url+n,dataType:"text",headers:{Depth:"1"}})}).push(function(t){var e,n,o={},i=(new r).parseFromString(t.target.responseText,"text/xml").querySelectorAll("D\\:response, response");for(e=1;e<i.length;e+=1)void 0!==(n=i[e].querySelector("D\\:href, href").textContent.split("/").slice(-1)[0])&&""!==n&&(o[n]={});return o},function(e){if(void 0!==e.target&&404===e.target.status)throw new t.util.jIOError("Cannot find document",404);throw e})},a.prototype.putAttachment=function(r,n,a){var u=this;return r=i(r),s(n),(new e.Queue).push(function(){return o(u,{type:"PUT",url:u._url+r+n,data:a})}).push(void 0,function(e){if(403===e.target.status||424===e.target.status)throw new t.util.jIOError("Cannot access subdocument",404);throw e})},a.prototype.getAttachment=function(r,a){var u=this;return r=i(r),s(a),(new e.Queue).push(function(){return o(u,{type:"GET",url:u._url+r+a,dataType:"blob"})}).push(function(t){return new n([t.target.response||t.target.responseText],{type:t.target.getResponseHeader("Content-Type")||"application/octet-stream"})},function(e){if(void 0!==e.target&&404===e.target.status)throw new t.util.jIOError("Cannot find attachment: "+r+" , "+a,404);throw e})},a.prototype.removeAttachment=function(r,n){var a=this;return r=i(r),s(n),(new e.Queue).push(function(){return o(a,{type:"DELETE",url:a._url+r+n})}).push(void 0,function(e){if(void 0!==e.target&&404===e.target.status)throw new t.util.jIOError("Cannot find attachment: "+r+" , "+n,404);throw e})},t.addStorage("dav",a)}(jIO,RSVP,DOMParser,Blob),function(t,e,r,n,o){"use strict";var i=n.parse("https://www.googleapis.com{/upload}/drive/v2/files{/id}{?uploadType,access_token}"),s=n.parse("https://www.googleapis.com/drive/v2/files{/id,trash}{?access_token}"),a=n.parse("https://www.googleapis.com/drive/v2/files?prettyPrint=false{&pageToken}&q=trashed=false&fields=nextPageToken,items(id){&access_token}"),u=n.parse("https://www.googleapis.com/drive/v2/files{/id}{?alt}");function c(e,r){if(404===e.target.status)throw new t.util.jIOError("Cannot find document: "+r,404);throw e}function h(e){if("enclosure"!==e)throw new t.util.jIOError("Only support 'enclosure' attachment",400)}function l(t){if(void 0===t||void 0===t.access_token||"string"!=typeof t.access_token)throw new TypeError("Access Token must be a string which contains more than one character.");if(void 0!==t.trashing&&!0!==t.trashing&&!1!==t.trashing)throw new TypeError("trashing parameter must be a boolean (true or false)");this._trashing=t.trashing||!0,this._access_token=t.access_token}function p(e,n){return(new r.Queue).push(function(){return function(e,n){var i,s;return(new r.Queue).push(function(){return t.util.ajax({type:"GET",url:a.expand({pageToken:e.nextPageToken||"",access_token:n})})}).push(function(t){for(s=o.parse(t.target.response||t.target.responseText),i=0;i<s.items.length;i+=1)s.items[i].value={},e.push(s.items[i]);return e.nextPageToken=s.nextPageToken,e},c)}(e,n)}).push(function(){return e.nextPageToken?p(e,n):e})}function f(e,n,s){var a="-------314159265358979323846";return(new r.Queue).push(function(){return t.util.ajax({type:e?"PUT":"POST",url:i.expand({access_token:s,id:e||[],upload:e?[]:"upload",uploadType:"multipart"}),headers:{"Content-Type":'multipart/related; boundary="'+a+'"'},data:"--"+a+"\nContent-Type: application/json; charset=UTF-8\n\n"+o.stringify(n)+"\n\n--"+a+"--"})}).push(function(t){return o.parse(t.target.responseText).id},function(t){c(t,e)})}function d(n,i,s){return(new r.Queue).push(function(){return t.util.ajax({type:"GET",dataType:i?"blob":"json",url:u.expand({id:n,alt:i?"media":[],access_token:s}),headers:{Authorization:"Bearer "+s}})}).push(function(t){return t.target.response||(i?new e([t.target.responseText],{type:t.target.responseHeaders["Content-Type"]}):o.parse(t.target.responseText))},function(t){c(t,n)})}l.prototype.hasCapacity=function(t){return"list"===t},l.prototype.buildQuery=function(){return p([],this._access_token)},l.prototype.put=function(t,e){return f(t,e,this._access_token)},l.prototype.post=function(t){return f(void 0,t,this._access_token)},l.prototype.putAttachment=function(e,n,s){return h(n),function(e,n,s){return(new r.Queue).push(function(){return t.util.ajax({type:"PUT",url:i.expand({access_token:s,upload:"upload",id:e,uploadType:"media"}),data:n})}).push(function(e){if("application/vnd.google-apps.folder"===(e=o.parse(e.target.responseText)).mimeType)throw new t.util.jIOError("cannot put attachments to folder",400);return e},function(t){c(t,e)})}(e,s,this._access_token)},l.prototype.remove=function(e){var n=this;return(new r.Queue).push(function(){return t.util.ajax({type:n._trashing?"POST":"DELETE",url:s.expand({id:e,access_token:n._access_token,trash:n._trashing?"trash":[]})})}).push(void 0,function(t){c(t,e)})},l.prototype.get=function(t){return d(t,!1,this._access_token)},l.prototype.getAttachment=function(t,e){return h(e),d(t,!0,this._access_token)},l.prototype.allAttachments=function(t){var e=this._access_token;return(new r.Queue).push(function(){return d(t,!1,e)}).push(function(t){return"application/vnd.google-apps.folder"===t.mimeType?{}:{enclosure:{}}})},t.addStorage("gdrive",l)}(jIO,Blob,RSVP,UriTemplate,JSON),function(t,e){"use strict";function r(e){if(!Array.isArray(e.storage_list))throw new t.util.jIOError("storage_list is not an Array",400);var r;for(this._storage_list=[],r=0;r<e.storage_list.length;r+=1)this._storage_list.push(t.createJIO(e.storage_list[r]))}r.prototype._getWithStorageIndex=function(){var e,r=0,n=this,o=arguments,i=this._storage_list[0].get.apply(this._storage_list[0],o);function s(e){i.push(void 0,function(i){if(i instanceof t.util.jIOError&&404===i.status_code)return n._storage_list[e].get.apply(n._storage_list[e],o).push(function(t){return r=e,t});throw i})}for(e=1;e<this._storage_list.length;e+=1)s(e);return i.push(function(t){return[r,t]})},r.prototype.get=function(){return this._getWithStorageIndex.apply(this,arguments).push(function(t){return t[1]})},r.prototype.allAttachments=function(){var t=arguments,e=this;return this._getWithStorageIndex.apply(this,arguments).push(function(r){var n=e._storage_list[r[0]];return n.allAttachments.apply(n,t)})},r.prototype.post=function(){return this._storage_list[0].post.apply(this._storage_list[0],arguments)},r.prototype.put=function(){var e=arguments,r=this;return this._getWithStorageIndex(e[0]).push(void 0,function(e){if(e instanceof t.util.jIOError&&404===e.status_code)return[0];throw e}).push(function(t){var n=r._storage_list[t[0]];return n.put.apply(n,e)})},r.prototype.remove=function(){var t=arguments,e=this;return this._getWithStorageIndex(t[0]).push(function(r){var n=e._storage_list[r[0]];return n.remove.apply(n,t)})},r.prototype.buildQuery=function(){var t,r,n=[],o={},i=this._storage_list.length;for(t=0;t<i;t+=1)r=this._storage_list[t],n.push(r.buildQuery.apply(r,arguments));return(new e.Queue).push(function(){return e.all(n)}).push(function(e){var r,n,s,a=[];for(i=e.length,t=0;t<i;t+=1)for(n=(r=e[t]).length,s=0;s<n;s+=1)o.hasOwnProperty(r[s].id)||(o[r[s].id]=null,a.push(r[s]));return a})},r.prototype.hasCapacity=function(t){var e,r,n,o;if("list"===t||"query"===t||"select"===t){for(n=!0,r=this._storage_list.length,e=0;e<r;e+=1)o=this._storage_list[e],n=n&&o.hasCapacity(t);return n}return!1},r.prototype.repair=function(){var t,r=[];for(t=0;t<this._storage_list.length;t+=1)r.push(this._storage_list[t].repair.apply(this._storage_list[t],arguments));return e.all(r)},r.prototype.getAttachment=function(){var t=arguments,e=this;return this._getWithStorageIndex.apply(this,arguments).push(function(r){var n=e._storage_list[r[0]];return n.getAttachment.apply(n,t)})},r.prototype.putAttachment=function(){var t=arguments,e=this;return this._getWithStorageIndex.apply(this,arguments).push(function(r){var n=e._storage_list[r[0]];return n.putAttachment.apply(n,t)})},r.prototype.removeAttachment=function(){var t=arguments,e=this;return this._getWithStorageIndex.apply(this,arguments).push(function(r){var n=e._storage_list[r[0]];return n.removeAttachment.apply(n,t)})},t.addStorage("union",r)}(jIO,RSVP),function(t,e,r,n,o){"use strict";function i(r,n,i,s){return void 0===i&&(i={}),void 0===i.xhrFields&&(i.xhrFields={}),void 0===i.headers&&(i.headers={}),!0===s?(i.url=r._blob_template.expand({uuid:n}),i.dataType="blob"):(i.url=r._url_template.expand({uuid:n||""}),i.headers.hasOwnProperty("Accept")||(i.headers.Accept="application/json",i.dataType="json")),r.hasOwnProperty("_access_token")?i.headers.Authorization="Basic "+r._access_token:i.xhrFields.withCredentials=!0,(new e.Queue).push(function(){return t.util.ajax(i)}).push(function(t){return!0===s?t.target.response||new o([t.target.responseText],{type:"text/plain"}):t.target.response||JSON.parse(t.target.responseText)})}function s(t){if("string"!=typeof t.url||!t.url)throw new TypeError("Linshare 'url' must be a string which contains more than one character.");this._url_template=r.parse(t.url+"/linshare/webservice/rest/user/v2/documents/{uuid}"),this._blob_template=r.parse(t.url+"/linshare/webservice/rest/user/v2/documents/{uuid}/download"),t.hasOwnProperty("access_token")&&(this._access_token=t.access_token)}var a=["list","include"];function u(t,e){var r=t.modificationDate,n=e.modificationDate;return r===n?0:r<n?1:-1}function c(t,e){return i(t,"",{type:"GET"}).push(function(t){t.sort(u);var r,n,o,i={},s=t.length,a=[];for(r=0;r<s;r+=1)if(n=t[r].name,!(e.hasOwnProperty("only_id")&&e.only_id!==n||i.hasOwnProperty(n))){if(o={id:n,value:{},_linshare_uuid:t[r].uuid},!0===e.include_docs)try{o.doc=JSON.parse(t[r].metaData)||{}}catch(t){o.doc={}}if(a.push(o),!0!==e.all_revision&&(i[n]=null,e.only_id===n))break}return a})}function h(e,r,o,s){var a=new n;return a.append("file",s,r),a.append("filesize",s.size),a.append("filename",r),a.append("description",o.title||o.description||""),a.append("metadata",t.util.stringify(o)),i(e,"",{type:"POST",data:a})}function l(e){if("enclosure"!==e)throw new t.util.jIOError("attachment name "+e+" is forbidden in linshare",400)}s.prototype.hasCapacity=function(t){return-1!==a.indexOf(t)},s.prototype.buildQuery=function(t){return c(this,{include_docs:t.include_docs})},s.prototype.get=function(e){return c(this,{include_docs:!0,only_id:e}).push(function(r){if(1===r.length)return r[0].doc;throw new t.util.jIOError("Can't find document with id : "+e,404)})},s.prototype.put=function(e,r){var n=this;return c(n,{include_docs:!0,only_id:e}).push(function(s){if(1===s.length){var a={uuid:s[0]._linshare_uuid,metaData:t.util.stringify(r),name:e,description:r.title||r.description||""};return i(n,s[0]._linshare_uuid,{type:"PUT",headers:{"Content-Type":"application/json"},data:t.util.stringify(a)})}return h(n,e,r,new o)})},s.prototype.remove=function(t){var r=this;return c(r,{only_id:t,all_revision:!0}).push(function(t){var n,o=[],s=t.length;for(n=0;n<s;n+=1)o.push(i(r,t[n]._linshare_uuid,{type:"DELETE"}));return e.all(o)})},s.prototype.allAttachments=function(t){return this.get(t).push(function(){return{enclosure:{}}})},s.prototype.putAttachment=function(t,e,r){l(e);var n=this;return n.get(t).push(function(e){return h(n,t,e,r)})},s.prototype.getAttachment=function(e,r){l(r);var n=this;return c(n,{only_id:e}).push(function(r){if(1===r.length)return i(n,r[0]._linshare_uuid,{},!0);throw new t.util.jIOError("Can't find document with id : "+e,404)})},t.addStorage("linshare",s)}(jIO,RSVP,UriTemplate,FormData,Blob),function(t,e,r,n,o,i,s,a){"use strict";function u(e,r){return void 0===r&&(r={}),void 0===r.xhrFields&&(r.xhrFields={}),void 0!==e._access_token?(void 0===r.headers&&(r.headers={}),r.headers["X-ACCESS-TOKEN"]=e._access_token,r.xhrFields.withCredentials=!1):r.xhrFields.withCredentials=!0,t.util.ajax(r)}function c(t){return(new n.Queue).push(function(){return u(t,{type:"GET",url:t._url})}).push(function(t){return JSON.parse(t.target.responseText)})}function h(r,o,i){return void 0===i&&(i={}),c(r).push(function(s){return(new n.Queue).push(function(){return u(r,{type:"GET",url:e.parse(s._links.traverse.href).expand({relative_url:o,view:i._view})})}).push(void 0,function(e){if(void 0!==e.target&&404===e.target.status)throw new t.util.jIOError("Cannot find document: "+o,404);throw e})})}var l={StringField:null,EmailField:null,IntegerField:null,FloatField:null,TextAreaField:null};function p(e,r){return e.getAttachment(r,"view").push(function(e){return t.util.readBlobAsText(e)}).push(function(t){return JSON.parse(t.target.result)}).push(function(t){return function(t){var e,r,n,i,s=t._embedded._view,a={portal_type:t._links.type.name},u={};for(r in t._links.hasOwnProperty("parent")&&(a.parent_relative_url=new o(t._links.parent.href).segment(2)),u.form_id={key:[s.form_id.key],default:s.form_id.default},s)s.hasOwnProperty(r)&&(e=s[r],n=0,0===r.indexOf("my_")&&e.editable&&(n=3),0===r.indexOf("your_")&&(n=5),0!==n&&l.hasOwnProperty(e.type)&&(u[r.substring(n)]={default:e.default,key:e.key},a[r.substring(n)]=e.default));return i={data:a,form_data:u},s.hasOwnProperty("_actions")&&s._actions.hasOwnProperty("put")&&(i.action_href=s._actions.put.href),i}(t)})}function f(t){if("string"!=typeof t.url||!t.url)throw new TypeError("ERP5 'url' must be a string which contains more than one character.");this._url=t.url,this._default_view_reference=t.default_view_reference,t.hasOwnProperty("access_token")&&(this._access_token=t.access_token)}function d(t){if(t instanceof s&&void 0===t.operator&&"local_roles"===t.key)return t.value}function _(t){if(t instanceof s&&void 0===t.operator&&void 0!==t.key&&0===t.key.indexOf("selection_domain_")){var e={};return e[t.key.slice("selection_domain_".length)]=t.value,e}}function m(t){var e,r,n=!0,o=[];if(t instanceof a&&"OR"===t.operator){for(e=0;e<t.query_list.length;e+=1)(r=t.query_list[e])instanceof s&&void 0!==r.key&&"local_roles"===r.key?o.push(r.value):n=!1;if(n)return o}}f.prototype.get=function(t){return p(this,t).push(function(t){return function(t){var e,r=t.data;for(e in r)r.hasOwnProperty(e)&&(r[e]||delete r[e]);return r}(t)})},f.prototype.post=function(t){var e,n=this;return c(this).push(function(e){var o=new r;return o.append("portal_type",t.portal_type),o.append("parent_relative_url",t.parent_relative_url),u(n,{type:"POST",url:e._actions.add.href,data:o})}).push(function(r){var i=r.target.getResponseHeader("X-Location"),s=new o(i);return e=s.segment(2),n.put(e,t)}).push(function(){return e})},f.prototype.put=function(e,r){var n=this;return p(n,e).push(function(o){var s,a=o.form_data,u={};for(s in u[a.form_id.key]=a.form_id.default,r)if(r.hasOwnProperty(s)){if("form_id"===s)throw new t.util.jIOError("ERP5: forbidden property: "+s,400);if("portal_type"!==s&&"parent_relative_url"!==s){if(!a.hasOwnProperty(s))throw new t.util.jIOError("ERP5: can not store property: "+s,400);u[a[s].key]=r[s]}}if(!o.hasOwnProperty("action_href"))throw new t.util.jIOError("ERP5: can not modify document: "+e,403);return n.putAttachment(e,o.action_href,new i([JSON.stringify(u)],{type:"application/json"}))})},f.prototype.allAttachments=function(t){var e=this;return h(this,t).push(function(){return void 0===e._default_view_reference?{links:{}}:{view:{},links:{}}})},f.prototype.getAttachment=function(e,r,o){var s=this;if(void 0===o&&(o={}),"view"===r){if(void 0===this._default_view_reference)throw new t.util.jIOError("Cannot find attachment view for: "+e,404);return h(this,e,{_view:this._default_view_reference}).push(function(t){var e=JSON.parse(t.target.responseText);return new i([JSON.stringify(e)],{type:"application/hal+json"})})}if("links"===r)return h(this,e).push(function(t){return new i([JSON.stringify(JSON.parse(t.target.responseText))],{type:"application/hal+json"})});if(0===r.indexOf(this._url))return(new n.Queue).push(function(){var e,n,i,a={type:"GET",dataType:"blob",url:r};if(void 0!==o.start||void 0!==o.end){if(e=o.start||0,void 0!==(n=o.end)&&n<0)throw new t.util.jIOError("end must be positive",400);if(e<0)i="bytes="+e;else if(void 0===n)i="bytes="+e+"-";else{if(e>n)throw new t.util.jIOError("start is greater than end",400);i="bytes="+e+"-"+n}a.headers={Range:i}}return u(s,a)}).push(function(t){return void 0===t.target.response?new i([t.target.responseText],{type:t.target.getResponseHeader("Content-Type")}):t.target.response});throw new t.util.jIOError("ERP5: not support get attachment: "+r,400)},f.prototype.putAttachment=function(e,o,i){var s=this;if(0!==o.indexOf(this._url))throw new t.util.jIOError("Can not store outside ERP5: "+o,400);return(new n.Queue).push(function(){return t.util.readBlobAsText(i)}).push(function(e){var n,i,a,c,h=JSON.parse(e.target.result),l=new r;for(a in h)if(h.hasOwnProperty(a))for(n=Array.isArray(h[a])?h[a]:[h[a]],i=0;i<n.length;i+=1)"object"==typeof(c=n[i])?l.append(a,t.util.dataURItoBlob(c.url),c.file_name):l.append(a,c);return u(s,{type:"POST",url:o,data:l,dataType:"blob"})})},f.prototype.hasCapacity=function(t){return"list"===t||"query"===t||"select"===t||"limit"===t||"sort"===t||"group"===t},f.prototype.buildQuery=function(r){var n=this;return c(this).push(function(o){var i,s,c,h,l,p,f,g=r.query,y=!1,v=[],w=[];if(r.query)if(l=d(c=t.QueryFactory.create(r.query)))g=void 0,p=l;else if(l=_(c))g=void 0,f=l;else if(l=m(c))g=void 0,p=l;else if(c instanceof a&&"AND"===c.operator)for(i=0;i<c.query_list.length;i+=1)if(h=c.query_list[i],y||((l=d(h))?(p=l,c.query_list.splice(i,1),g=t.Query.objectToSearchText(c),y=!0,h=c.query_list[i]):(l=m(h))&&(p=l,c.query_list.splice(i,1),g=t.Query.objectToSearchText(c),y=!0,h=c.query_list[i])),l=_(h)){if(c.query_list.splice(i,1),g=t.Query.objectToSearchText(c),f)for(s in l)l.hasOwnProperty(s)&&(f[s]=l[s]);else f=l;i-=1}if(r.sort_on)for(i=0;i<r.sort_on.length;i+=1)v.push(JSON.stringify(r.sort_on[i]));return r.group_by&&(w=r.group_by),f&&(f=JSON.stringify(f)),u(n,{type:"GET",url:e.parse(o._links.raw_search.href).expand({query:g,select_list:r.select_list||["title","reference"],limit:r.limit,sort_on:v,group_by:w,local_roles:p,selection_domain:f})})}).push(function(t){return JSON.parse(t.target.responseText)}).push(function(t){var e,r,n,i=t._embedded.contents,s=i.length,a=[];for(e=0;e<s;e+=1)n=i[e],r=new o(n._links.self.href),delete n._links,a.push({id:r.segment(2),value:n});return a})},t.addStorage("erp5",f)}(jIO,UriTemplate,FormData,RSVP,URI,Blob,SimpleQuery,ComplexQuery),function(t,e,r){"use strict";function n(t){return r.JIODate(new Date(t).toISOString())}function o(e){this._sub_storage=t.createJIO(e.sub_storage),this._key_schema={key_set:{},cast_lookup:{}},function(e,r){var o;for(o in r.schema)if(r.schema.hasOwnProperty(o)){if("string"!==r.schema[o].type||"date-time"!==r.schema[o].format)throw new t.util.jIOError("Wrong schema for property: "+o,400);e._key_schema.key_set[o]={read_from:o,cast_to:"dateType"},void 0===e._key_schema.cast_lookup.dateType&&(e._key_schema.cast_lookup.dateType=n)}}(this,e)}o.prototype.get=function(){return this._sub_storage.get.apply(this._sub_storage,arguments)},o.prototype.allAttachments=function(){return this._sub_storage.allAttachments.apply(this._sub_storage,arguments)},o.prototype.post=function(){return this._sub_storage.post.apply(this._sub_storage,arguments)},o.prototype.put=function(){return this._sub_storage.put.apply(this._sub_storage,arguments)},o.prototype.remove=function(){return this._sub_storage.remove.apply(this._sub_storage,arguments)},o.prototype.getAttachment=function(){return this._sub_storage.getAttachment.apply(this._sub_storage,arguments)},o.prototype.putAttachment=function(){return this._sub_storage.putAttachment.apply(this._sub_storage,arguments)},o.prototype.removeAttachment=function(){return this._sub_storage.removeAttachment.apply(this._sub_storage,arguments)},o.prototype.repair=function(){return this._sub_storage.repair.apply(this._sub_storage,arguments)},o.prototype.hasCapacity=function(t){return-1!==["limit","sort","select","query"].indexOf(t)||"list"===t&&this._sub_storage.hasCapacity(t)},o.prototype.buildQuery=function(r){var n=this._sub_storage,o=this,i={},s=!1,a=!1;if(n.hasCapacity("list")){try{void 0!==r.query&&!n.hasCapacity("query")||void 0!==r.sort_on&&!n.hasCapacity("sort")||void 0!==r.select_list&&!n.hasCapacity("select")||void 0!==r.limit&&!n.hasCapacity("limit")||(i.query=r.query,i.sort_on=r.sort_on,i.select_list=r.select_list,i.limit=r.limit)}catch(e){if(!(e instanceof t.util.jIOError&&501===e.status_code))throw e;s=!0}try{(s||!0===r.include_docs)&&n.hasCapacity("include")&&(i.include_docs=!0)}catch(e){if(!(e instanceof t.util.jIOError&&501===e.status_code))throw e;a=!0}return n.buildQuery(i).push(function(r){var o,i,s=[r];function u(e){var o=r[e].id;return n.get(o).push(function(t){return t._id=o,t},function(e){if(!(e instanceof t.util.jIOError&&404===e.status_code))throw e})}if(a){for(o=r.length,i=0;i<o;i+=1)s.push(u(i));r=e.all(s)}return r}).push(function(t){var e,r,n;if(a){for(r=(e=t[0]).length,n=0;n<r;n+=1)e[n].doc=t[n+1];t=e}return t}).push(function(e){var n,i,a=[];if(s){for(n=e.length,i=0;i<n;i+=1)e[i].doc.__id=e[i].id,a.push(e[i].doc);r.select_list&&r.select_list.push("__id"),e=t.QueryFactory.create(r.query||"",o._key_schema).exec(a,r)}return e}).push(function(t){var e,n,o,i=[];if(s){for(n=t.length,o=0;o<n;o+=1){if(e={id:t[o].__id,value:r.select_list?t[o]:{},doc:{}},r.select_list&&delete e.value.__id,r.include_docs)throw new Error("QueryStorage does not support include docs");i.push(e)}t=i}return t})}},t.addStorage("query",o)}(jIO,RSVP,jiodate),function(t,e,r){"use strict";function n(e){this._sub_storage=t.createJIO(e.sub_storage)}var o="/.jio_documents/";n.prototype.get=function(r){var n=this;return(new e.Queue).push(function(){return n._sub_storage.getAttachment(o,r+".json",{format:"json"})}).push(void 0,function(e){if(e instanceof t.util.jIOError&&404===e.status_code)return n._sub_storage.allAttachments("/").push(function(e){if(e.hasOwnProperty(r))return{};throw new t.util.jIOError("Cannot find document "+r,404)});throw e})},n.prototype.allAttachments=function(e){var r=this;return r._sub_storage.allAttachments("/").push(function(n){return n.hasOwnProperty(e)?{enclosure:{}}:r._sub_storage.getAttachment(o,e+".json").push(function(){return{}},function(r){if(r instanceof t.util.jIOError&&404===r.status_code)throw new t.util.jIOError("Cannot find document "+e,404);throw r})})},n.prototype.put=function(e,n){var i=this;return i._sub_storage.putAttachment(o,e+".json",new r([JSON.stringify(n)],{type:"application/json"})).push(void 0,function(s){if(s instanceof t.util.jIOError&&404===s.status_code)return i._sub_storage.put(o,{}).push(function(){return i._sub_storage.putAttachment(o,e+".json",new r([JSON.stringify(n)],{type:"application/json"}))});throw s}).push(function(){return e})},n.prototype.remove=function(r){var n=this,i=!1;return(new e.Queue).push(function(){return n._sub_storage.removeAttachment("/",r)}).push(void 0,function(e){if(!(e instanceof t.util.jIOError&&404===e.status_code))throw e;i=!0}).push(function(){return n._sub_storage.removeAttachment(o,r+".json")}).push(void 0,function(e){if(!i&&e instanceof t.util.jIOError&&404===e.status_code)return r;throw e})},n.prototype.hasCapacity=function(t){return"list"===t},n.prototype.buildQuery=function(){var r={},n=this;return(new e.Queue).push(function(){return n._sub_storage.allAttachments(o)}).push(function(t){var e,n,o;for(e in t)t.hasOwnProperty(e)&&(o=".json",-1!==(n=e).indexOf(o,n.length-o.length)&&(r[e.substring(0,e.length-".json".length)]=null))},function(e){if(!(e instanceof t.util.jIOError&&404===e.status_code))throw e}).push(function(){return n._sub_storage.allAttachments("/")}).push(function(t){var e;for(e in t)t.hasOwnProperty(e)&&(r[e]=null)}).push(function(){var t,e=[];for(t in r)r.hasOwnProperty(t)&&e.push({id:t,value:{}});return e})},n.prototype.getAttachment=function(e,r){if("enclosure"!==r)throw new t.util.jIOError("Only support 'enclosure' attachment",400);return this._sub_storage.getAttachment("/",e)},n.prototype.putAttachment=function(e,r,n){if("enclosure"!==r)throw new t.util.jIOError("Only support 'enclosure' attachment",400);return this._sub_storage.putAttachment("/",e,n)},n.prototype.removeAttachment=function(e,r){if("enclosure"!==r)throw new t.util.jIOError("Only support 'enclosure' attachment",400);return this._sub_storage.removeAttachment("/",e)},n.prototype.repair=function(){return this._sub_storage.repair.apply(this._sub_storage,arguments)},t.addStorage("drivetojiomapping",n)}(jIO,RSVP,Blob),function(t,e,r,n,o){"use strict";function i(e){this._sub_storage=t.createJIO(e.sub_storage),this._document_id=e.document_id,this._repair_attachment=e.repair_attachment||!1}var s=".json",a=new RegExp("^jio_document/([\\w=]+)"+s+"$"),u=new RegExp("^jio_attachment/([\\w=]+)/([\\w=]+)$"),c=function(t){return window.btoa(n(encodeURIComponent(t)))},h=function(t){return decodeURIComponent(o(window.atob(t)))};function l(t,e){return void 0===e?"jio_document/"+c(t)+s:"jio_attachment/"+c(t)+"/"+c(e)}i.prototype.get=function(t){return this._sub_storage.getAttachment(this._document_id,l(t),{format:"json"})},i.prototype.allAttachments=function(t){return this._sub_storage.allAttachments(this._document_id).push(function(e){var r,n,o={};for(n in e)if(e.hasOwnProperty(n)&&u.test(n)){r=u.exec(n);try{h(r[1])===t&&(o[h(r[2])]={})}catch(t){if(!t instanceof ReferenceError)throw t}}return o})},i.prototype.put=function(t,r){return this._sub_storage.putAttachment(this._document_id,l(t),new e([JSON.stringify(r)],{type:"application/json"})).push(function(){return t})},i.prototype.remove=function(t){var e=this;return this.allAttachments(t).push(function(n){var o,i=[];for(o in n)n.hasOwnProperty(o)&&i.push(e.removeAttachment(t,o));return r.all(i)}).push(function(){return e._sub_storage.removeAttachment(e._document_id,l(t))}).push(function(){return t})},i.prototype.repair=function(){var t=this;return this._sub_storage.repair.apply(this._sub_storage,arguments).push(function(e){return t._repair_attachment?t._sub_storage.allAttachments(t._document_id).push(function(e){var n,o,i,s,c=[],l={},p={};for(s in e)if(e.hasOwnProperty(s))if(n=void 0,o=void 0,a.test(s)){try{n=h(a.exec(s)[1])}catch(t){if(!t instanceof ReferenceError)throw t}void 0!==n&&(l[n]=null)}else if(u.test(s)){i=u.exec(s);try{n=h(i[1]),o=h(i[2])}catch(t){if(!t instanceof ReferenceError)throw t}void 0!==o&&(l.hasOwnProperty(n)||(p.hasOwnProperty(n)||(p[n]={}),p[n][o]=null))}for(n in p)if(p.hasOwnProperty(n)&&!l.hasOwnProperty(n))for(o in p[n])p[n].hasOwnProperty(o)&&c.push(t.removeAttachment(n,o));return r.all(c)}):e})},i.prototype.hasCapacity=function(t){return"list"===t},i.prototype.buildQuery=function(){return this._sub_storage.allAttachments(this._document_id).push(function(t){var e,r=[];for(e in t)if(t.hasOwnProperty(e)&&a.test(e))try{r.push({id:h(a.exec(e)[1]),value:{}})}catch(t){if(!t instanceof ReferenceError)throw t}return r})},i.prototype.getAttachment=function(t,e){return this._sub_storage.getAttachment(this._document_id,l(t,e))},i.prototype.putAttachment=function(t,e,r){return this._sub_storage.putAttachment(this._document_id,l(t,e),r)},i.prototype.removeAttachment=function(t,e){return this._sub_storage.removeAttachment(this._document_id,l(t,e))},t.addStorage("document",i)}(jIO,Blob,RSVP,unescape,escape),function(t,e,r,n){"use strict";function o(t){!0===t.sessiononly?this._storage=e:this._storage=r}function i(e){if("/"!==e)throw new t.util.jIOError("id "+e+" is forbidden (!== /)",400)}o.prototype.get=function(t){return i(t),{}},o.prototype.allAttachments=function(t){i(t);var e,r={};for(e in this._storage)this._storage.hasOwnProperty(e)&&(r[e]={});return r},o.prototype.getAttachment=function(e,r){i(e);var n=this._storage.getItem(r);if(null===n)throw new t.util.jIOError("Cannot find attachment "+r,404);return t.util.dataURItoBlob(n)},o.prototype.putAttachment=function(e,r,o){var s=this;return i(e),(new n.Queue).push(function(){return t.util.readBlobAsDataURL(o)}).push(function(t){s._storage.setItem(r,t.target.result)})},o.prototype.removeAttachment=function(t,e){return i(t),this._storage.removeItem(e)},o.prototype.hasCapacity=function(t){return"list"===t},o.prototype.buildQuery=function(){return[{id:"/",value:{}}]},t.addStorage("local",o)}(jIO,sessionStorage,localStorage,RSVP),function(t,e,r,n,o,i,s,a){"use strict";function u(t){if("string"!=typeof t.database||""===t.database)throw new TypeError("IndexedDBStorage 'database' description property must be a non-empty string");this._database_name="jio:"+t.database}function c(t){return t.join("_")}function h(t){var e,r=t.target.result;(e=r.createObjectStore("metadata",{keyPath:"_id",autoIncrement:!1})).createIndex("_id","_id",{unique:!0}),(e=r.createObjectStore("attachment",{keyPath:"_key_path",autoIncrement:!1})).createIndex("_id","_id",{unique:!1}),(e=r.createObjectStore("blob",{keyPath:"_key_path",autoIncrement:!1})).createIndex("_id_attachment",["_id","_attachment"],{unique:!1}),e.createIndex("_id","_id",{unique:!1})}function l(e,n){var o;function i(){void 0!==o&&void 0!==o.result&&o.result.close()}return new r.Promise(function(u,c){(o=t.open(e)).onerror=function(t){i(),void 0!==t&&t.target instanceof s&&t.target.error instanceof a?c("Connection to: "+e+" failed: "+t.target.error.message):c(t)},o.onabort=function(){i(),c("Aborting connection to: "+e)},o.ontimeout=function(){c("Connection to: "+e+" timeout")},o.onblocked=function(){i(),c("Connection to: "+e+" was blocked")},o.onupgradeneeded=h,o.onversionchange=function(){i(),c(e+" was upgraded")},o.onsuccess=function(){var t;try{t=n(o.result)}catch(t){c(t)}return(new r.Queue).push(function(){return t}).push(function(t){i(),u(t)},function(t){i(),c(t)})}},i)}function p(t,e,n,o){var i=t.transaction(e,n);function s(){try{i.abort()}catch(t){return}}return new r.Promise(function(t,e){var n;try{n=o(i)}catch(t){e(t)}i.oncomplete=function(){return(new r.Queue).push(function(){return n}).push(t,function(t){s(),e(t)})},i.onerror=e,i.onabort=e},s)}function f(t){return new r.Promise(function(e,r){t.onerror=r,t.onsuccess=e})}function d(t,e){var n=!1;return new r.Promise(function(r,o){t.onerror=o,t.onsuccess=function(t){var i=t.target.result;if(i&&!n){try{e(i)}catch(t){o(t)}i.continue()}else r()}},function(){n=!0})}u.prototype.hasCapacity=function(t){return"list"===t||"include"===t},u.prototype.buildQuery=function(t){var e=[],n=this;function o(t){e.push({id:t.key,value:{},doc:t.value.doc})}function i(t){e.push({id:t.key,value:{}})}return(new r.Queue).push(function(){return l(n._database_name,function(e){return p(e,["metadata"],"readonly",function(e){return!0===t.include_docs?d(e.objectStore("metadata").index("_id").openCursor(),o):d(e.objectStore("metadata").index("_id").openKeyCursor(),i)})})}).push(function(){return e})},u.prototype.get=function(t){var n=this;return(new r.Queue).push(function(){return l(n._database_name,function(e){return p(e,["metadata"],"readonly",function(e){return f(e.objectStore("metadata").get(t))})})}).push(function(r){if(r.target.result)return r.target.result.doc;throw new e.util.jIOError("IndexedDB: cannot find object '"+t+"' in the 'metadata' store",404)})},u.prototype.allAttachments=function(t){var n={},o=this;function s(t){n[t.primaryKey.slice(t.key.length+1)]={}}return(new r.Queue).push(function(){return l(o._database_name,function(e){return p(e,["metadata","attachment"],"readonly",function(e){return r.all([f(e.objectStore("metadata").get(t)),d(e.objectStore("attachment").index("_id").openKeyCursor(i.only(t)),s)])})})}).push(function(r){if(!r[0].target.result)throw new e.util.jIOError("IndexedDB: cannot find object '"+t+"' in the 'metadata' store",404);return n})},u.prototype.put=function(t,e){return l(this._database_name,function(r){return p(r,["metadata"],"readwrite",function(r){return f(r.objectStore("metadata").put({_id:t,doc:e}))})})},u.prototype.remove=function(t){return l(this._database_name,function(e){return p(e,["metadata","attachment","blob"],"readwrite",function(e){var n=[],o=e.objectStore("metadata"),s=e.objectStore("attachment"),a=e.objectStore("blob");return r.all([f(o.delete(t)),d(s.index("_id").openKeyCursor(i.only(t)),function(t){n.push(f(s.delete(t.primaryKey)))}),d(a.index("_id").openKeyCursor(i.only(t)),function(t){n.push(f(a.delete(t.primaryKey)))})]).then(function(){return r.all(n)})})})},u.prototype.getAttachment=function(t,s,a){void 0===a&&(a={});var u,h,_=this._database_name,m=[];if(u=a.start||0,h=a.end,0!==u||void 0!==h){if(u<0||void 0!==h&&h<0)throw new e.util.jIOError("_start and _end must be positive",400);if(void 0!==h&&u>h)throw new e.util.jIOError("_start is greater than _end",400);return(new r.Queue).push(function(){return l(_,function(e){return p(e,["blob"],"readonly",function(e){var n,a,l=c([t,s]),p=e.objectStore("blob"),_=[];return n=o.floor(u/2e6),void 0!==h&&(a=o.floor(h/2e6),h%2e6==0&&(a-=1)),d(p.index("_id_attachment").openKeyCursor(i.only([t,s])),function(t){var e,r=parseInt(t.primaryKey.slice(l.length+1),10);if(!(0!==u&&r<n||void 0!==h&&r>a)){for(e=r-n;e>_.length;)_.push(null),e-=1;_.splice(r-n,0,f(p.get(t.primaryKey)))}}).then(function(){return r.all(_)})})})}).push(function(t){var e,r,i;for(i=0;i<t.length;i+=1)m.push(t[i].target.result.blob);return e=new n(m,{type:"application/octet-stream"}),r=2e6*o.floor(u/2e6),void 0===h?h=e.length:h-=r,e.slice(u-r,h,"application/octet-stream")})}return(new r.Queue).push(function(){return l(_,function(e){return p(e,["attachment","blob"],"readonly",function(e){var n=c([t,s]),o=e.objectStore("attachment"),a=e.objectStore("blob");return r.all([f(o.get(n)),d(a.index("_id_attachment").openCursor(i.only([t,s])),function(t){for(var e=parseInt(t.primaryKey.slice(n.length+1),10),r=e;r>m.length;)m.push(null),r-=1;m.splice(e,0,t.value.blob)})])})})}).push(function(r){var o,i=r[0].target.result;if(!i)throw new e.util.jIOError("IndexedDB: cannot find object '"+c([t,s])+"' in the 'attachment' store",404);if((o=new n(m,{type:i.info.content_type})).length!==i.info.total_length)throw new e.util.jIOError("IndexedDB: attachment '"+c([t,s])+"' in the 'attachment' store is broken",500);return o})},u.prototype.putAttachment=function(t,n,o){var s=this._database_name;return(new r.Queue).push(function(){return e.util.readBlobAsArrayBuffer(o)}).push(function(e){for(var a=e.target.result,u=[],h=o.size,_=0;_<h;)u.push(a.slice(_,_+2e6)),_+=2e6;return l(s,function(e){return p(e,["attachment","blob"],"readwrite",function(e){var s,a,h,l=[],p=c([t,n]);for(a=[f(e.objectStore("attachment").put({_key_path:p,_id:t,_attachment:n,info:{content_type:o.type,length:o.size}}))],s=e.objectStore("blob"),h=0;h<u.length;h+=1)a.push(f(s.put({_key_path:c([t,n,h]),_id:t,_attachment:n,_part:h,blob:u[h]})));return a.push(d(s.index("_id_attachment").openKeyCursor(i.only([t,n])),function(t){parseInt(t.primaryKey.slice(p.length+1),10)>=u.length&&l.push(f(s.delete(t.primaryKey)))})),r.all(a).then(function(){if(l.length)return r.all(l)})})})})},u.prototype.removeAttachment=function(t,e){return l(this._database_name,function(n){return p(n,["attachment","blob"],"readwrite",function(n){var o=[],s=n.objectStore("attachment"),a=n.objectStore("blob");return r.all([f(s.delete(c([t,e]))),d(a.index("_id_attachment").openKeyCursor(i.only([t,e])),function(t){o.push(f(a.delete(t.primaryKey)))})]).then(function(){return r.all(o)})})})},e.addStorage("indexeddb",u)}(indexedDB,jIO,RSVP,Blob,Math,IDBKeyRange,IDBOpenDBRequest,DOMError),function(t,e,r,n,o,i,s){"use strict";var a="application/x-jio-aes-gcm-encryption";function u(e){this._key=e.key,this._jsonKey=!0,this._sub_storage=t.createJIO(e.sub_storage)}function c(t){return(new e.Queue).push(function(){return o.subtle.importKey("jwk",t._key,"AES-GCM",!1,["encrypt","decrypt"])}).push(function(e){t._key=e,t._jsonKey=!1})}u.prototype.get=function(){return this._sub_storage.get.apply(this._sub_storage,arguments)},u.prototype.post=function(){return this._sub_storage.post.apply(this._sub_storage,arguments)},u.prototype.put=function(){return this._sub_storage.put.apply(this._sub_storage,arguments)},u.prototype.remove=function(){return this._sub_storage.remove.apply(this._sub_storage,arguments)},u.prototype.hasCapacity=function(){return this._sub_storage.hasCapacity.apply(this._sub_storage,arguments)},u.prototype.buildQuery=function(){return this._sub_storage.buildQuery.apply(this._sub_storage,arguments)},u.prototype.putAttachment=function(r,u,h){var l=o.getRandomValues(new i(12)),p=this;return(new e.Queue).push(function(){if(!0===p._jsonKey)return c(p)}).push(function(){return t.util.readBlobAsDataURL(h)}).push(function(t){var e,r=t.target.result.length,n=new s(r),a=new i(n);for(t=t.target.result,e=0;e<r;e+=1)a[e]=t.charCodeAt(e);return o.subtle.encrypt({name:"AES-GCM",iv:l},p._key,n)}).push(function(t){var e=new n([l,t],{type:a});return p._sub_storage.putAttachment(r,u,e)})},u.prototype.getAttachment=function(n,s){var u=this;return u._sub_storage.getAttachment(n,s).push(function(n){return n.type!==a?n:(new e.Queue).push(function(){if(!0===u._jsonKey)return c(u)}).push(function(){return t.util.readBlobAsArrayBuffer(n)}).push(function(s){var a;return s=s.target.result,a=new i(s.slice(0,12)),(new e.Queue).push(function(){return o.subtle.decrypt({name:"AES-GCM",iv:a},u._key,s.slice(12))}).push(function(e){return e=String.fromCharCode.apply(null,new i(e)),t.util.dataURItoBlob(e)}).push(void 0,function(t){if(t instanceof r)return n;throw t})})})},u.prototype.removeAttachment=function(){return this._sub_storage.removeAttachment.apply(this._sub_storage,arguments)},u.prototype.allAttachments=function(){return this._sub_storage.allAttachments.apply(this._sub_storage,arguments)},t.addStorage("crypt",u)}(jIO,RSVP,DOMException,Blob,crypto,Uint8Array,ArrayBuffer),function(t,e,r){"use strict";var n=r.parse("https://graph.facebook.com/v2.9/{+post_id}?fields={+fields}&access_token={+access_token}"),o=r.parse("https://graph.facebook.com/v2.9/{+user_id}/feed?fields={+fields}&limit={+limit}&since={+since}&access_token={+access_token}");function i(t){if("string"!=typeof t.access_token||!t.access_token)throw new TypeError("Access Token must be a string which contains more than one character.");if("string"!=typeof t.user_id||!t.user_id)throw new TypeError("User ID must be a string which contains more than one character.");this._access_token=t.access_token,this._user_id=t.user_id,this._default_field_list=t.default_field_list||[],this._default_limit=t.default_limit||500}i.prototype.get=function(r){var o=this;return(new e.Queue).push(function(){return t.util.ajax({type:"GET",url:n.expand({post_id:r,fields:o._default_field_list,access_token:o._access_token})})}).push(function(t){return JSON.parse(t.target.responseText)})},i.prototype.buildQuery=function(r){var n=[],i=this._default_limit,s={user_id:this._user_id,limit:i,access_token:this._access_token};return r.include_docs&&(n=n.concat(this._default_field_list)),r.select_list&&(n=n.concat(r.select_list)),r.limit&&(i=r.limit[1]),s.fields=n,s.limit=i,function r(n,o,i){return(new e.Queue).push(function(){return t.util.ajax({type:"GET",url:n})}).push(function(t){return JSON.parse(t.target.responseText)},function(e){throw new t.util.jIOError("Getting feed failed "+e.toString(),e.target.status)}).push(function(t){if(0===t.data.length)return o;var e,n,s={};for(e=0;e<t.data.length;e+=1){for(s.id=t.data[e].id,s.value={},n=0;n<i.length;n+=1)s.value[i[n]]=t.data[e][i[n]];o.push(s),s={}}return r(t.paging.next,o,i)})}(o.expand(s),[],n).push(function(t){return r.limit?t.slice(r.limit[0],r.limit[1]):t})},i.prototype.hasCapacity=function(t){if(-1!==["list","select","include","limit"].indexOf(t))return!0},t.addStorage("facebook",i)}(jIO,RSVP,UriTemplate),function(t,e,r,n){"use strict";var o=new r,i=new n;function s(r,n,s,a){return(new e.Queue).push(function(){return t.util.readBlobAsDataURL(n)}).push(function(e){return t.util.ajax({type:"POST",url:r,data:function(t,e,r){var n=o.parseFromString('<?xml version="1.0" encoding="UTF-8"?><methodCall><methodName>convertFile</methodName><params><param><value><string></string></value></param><param><value><string></string></value></param><param><value><string></string></value></param></params></methodCall>',"text/xml"),s=n.getElementsByTagName("string");return s[0].textContent=t,s[1].textContent=e,s[2].textContent=r,i.serializeToString(n)}(e.target.result.split("base64,")[1],s,a)})}).push(function(e){var r,n=o.parseFromString(e.target.responseText,"application/xml");if(0===n.getElementsByTagName("fault").length)return t.util.base64toBlob(n.querySelector("string").textContent,a);throw(r=new t.util.jIOError("Conversion failed",500)).detail=n.querySelector("string").textContent,r})}function a(e){this._url=e.url,this._sub_storage=t.createJIO(e.sub_storage)}a.prototype.get=function(){return this._sub_storage.get.apply(this._sub_storage,arguments)},a.prototype.put=function(){return this._sub_storage.put.apply(this._sub_storage,arguments)},a.prototype.remove=function(){return this._sub_storage.remove.apply(this._sub_storage,arguments)},a.prototype.getAttachment=function(){return this._sub_storage.getAttachment.apply(this._sub_storage,arguments)},a.prototype.putAttachment=function(t,e,r){var n=this;return n.get(t).push(function(t){return s(n._url,r,t.from,t.to)}).push(function(r){return n._sub_storage.putAttachment(t,e,r)})},a.prototype.allAttachments=function(){return this._sub_storage.allAttachments.apply(this._sub_storage,arguments)},a.prototype.repair=function(){return this._sub_storage.repair.apply(this._sub_storage,arguments)},a.prototype.hasCapacity=function(){return this._sub_storage.hasCapacity.apply(this._sub_storage,arguments)},a.prototype.buildQuery=function(){return this._sub_storage.buildQuery.apply(this._sub_storage,arguments)},t.addStorage("cloudooo",a)}(jIO,RSVP,DOMParser,XMLSerializer);
//! moment.js